(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[60741,47365],{196726:(e,t,i)=>{"use strict";function s(e){e.cancelable&&e.preventDefault()}function o(e){return t=>{s(t),e(t)}}i.d(t,{preventDefault:()=>s,wrapHandlerWithPreventEvent:()=>o})},719255:(e,t,i)=>{"use strict";i.d(t,{createAliasSymbolInfoWV:()=>d,createSymbolOrAliasWV:()=>_,getSymbolAliasService:()=>h});var s=i(536794),o=i(62802),r=i(251924),n=i(4944),l=i(157432);function a(e){return"SymbolAliasService"+(e?`_${e}`:"")}class c{constructor(e){this._onChanged=new r.Delegate;const t=e.state??o.getJSON(a(e?.id))??[];this._aliasesByProName=new Map(t),this._aliasesByName=new Map(Array.from(this._aliasesByProName.values()).map((e=>[e.aliasName,e]))),this._context=e}getAllAliases(){return Array.from(this._aliasesByProName.values())}getAliasByProName(e){return this._aliasesByProName.get(e)??null}getAliasByName(e){return this._aliasesByName.get(e)??null}addAlias(e){if(this._aliasesByName.has(e.aliasName))throw new Error(`Alias ${e.aliasName} already exists`);if(this._aliasesByProName.has(e.symbolProName))throw new Error(`Alias for symbol ${e.symbolProName} already exists`);this._aliasesByProName.set(e.symbolProName,e),this._aliasesByName.set(e.aliasName,e),this._onChanged.fire(e.symbolProName,e.aliasName,e),this._save()}updateAlias(e){const t=this._aliasesByName.get(e.aliasName);if(!t)throw new Error(`Alias ${e.aliasName} does not exist`);if("symbolProName"in e)throw new Error("Cannot update alias pro name");(0,s.merge)(t,e),this._aliasesByProName.set(t.symbolProName,t),this._aliasesByName.set(t.aliasName,t),this._onChanged.fire(t.symbolProName,t.aliasName,t),this._save()}removeAlias(e){const t=this._aliasesByName.get(e);if(!t)throw new Error(`Alias ${e} not found`);this._aliasesByProName.delete(t.symbolProName),this._aliasesByName.delete(e),this._onChanged.fire(e,t.symbolProName,null),this._save()}onAliasChanged(){return this._onChanged}state(e){const t=new Set(e??[]);return Array.from(this._aliasesByProName.entries()).filter((([i])=>!e||t.has(i)))}_save(){o.setJSON(a(this._context?.id),Array.from(this._aliasesByProName.entries()))}}const u=new Map;function h(e){const t=e??{id:""};let i=u.get(t.id);return i||(i=new c(t)),u.set(t.id,i),i}function d(e,t){return t?(0,n.combine)(((e,i)=>{if(!e)return null;const s=t.getAliasByProName(e.pro_name);return{...e,name:s?.aliasName??e.name,description:s?.description??e.description,local_description:s?.description??e.local_description,...s?.formattingOptions}}),e,(0,l.createWVFromGetterAndSubscription)((e=>(e??0)+1),t.onAliasChanged()).ownership()).ownership():e}function _(e,t,i){return i?(0,n.combine)(((e,t,s)=>{if(!t)return e;const o=i.getAliasByProName(t.pro_name);return o?.aliasName??e}),e,t,(0,l.createWVFromGetterAndSubscription)((e=>(e??0)+1),i.onAliasChanged()).ownership()).ownership():e}},594632:(e,t,i)=>{"use strict";var s,o;i.d(t,{HorizontalAlign:()=>s,VerticalAlign:()=>o}),function(e){e.Left="left",e.Right="right",e.Center="center"}(s||(s={})),function(e){e.Top="top",e.Bottom="bottom",
e.Middle="middle"}(o||(o={}))},325788:(e,t,i)=>{"use strict";i.d(t,{clone:()=>s.clone,isNumber:()=>s.isNumber,isObject:()=>s.isObject,merge:()=>s.merge});var s=i(536794)},147477:(e,t,i)=>{"use strict";i.d(t,{CHART_FONT_FAMILY:()=>n,CHART_MONOSPACE_FONT_FAMILY:()=>l});var s=i(314802);const o="'Trebuchet MS', Roboto, Ubuntu, sans-serif",r=`-apple-system, BlinkMacSystemFont, ${o}`;let n=((0,s.isOnMobileAppPage)("old"),o);const l="monospace";{const e=["U+2E80-2FD5","U+3040-309F","U+1B100-1B12F","U+1AFF0-1AFFF","U+1B000-1B0FF","U+1B130-1B16F","U+3190-319F","U+30A0-30FF","U+31F0-31FF","U+3400-4DBF","U+4E00-9FFF","U+0E00-0E7F"],t=n;(async()=>{if(!/iPhone OS 15_\d+?/.test(navigator.userAgent))return r;{if(["kr","zh_CN","zh_TW"].includes(window.locale))return n;const t=new FontFace("ChartIosFont","local(Helvetica), local(Arial)",{unicodeRange:e.join(", ")});try{return document.fonts.add(await t.load()),`ChartIosFont, ${r}`}catch(e){return n}}})().then((e=>{t===n&&(n=e)}))}},853290:(e,t,i)=>{"use strict";i.r(t),i.d(t,{MouseEventHandler:()=>b,defaultPreventedHandler:()=>p,getClickPosition:()=>d,ignoreClickOrTapOnDblClickOrDblTapHandlers:()=>m,isTouchMouseEvent:()=>_});var s=i(481251),o=i(650151),r=i(536794),n=i(638456),l=i(196726),a=i(793750);let c=2;const u=n.isSafari?"click":"auxclick",h={treatVertTouchDragAsPageScroll:!1,treatHorzTouchDragAsPageScroll:!1,ignoreClickAndTapOnDblClickOrDblTap:!1};function d(e){if(_(e))return{x:e.clientX,y:e.clientY};if("touches"in(t=e)&&void 0!==t.touches){if(1===e.touches.length){const t=(0,o.ensureNotNull)(e.target).getBoundingClientRect(),i=e.touches[0];return{x:i.clientX-t.left,y:i.clientY-t.top}}return null}var t;return{x:e.offsetX,y:e.offsetY}}function _(e){return"isTouch"in e&&"stylus"in e}function p(e){return t=>{t.preventDefault(),e(t)}}function m(e,t){let i=!1;return{clickOrTap:(...s)=>{t?.()?e.clickOrTap(...s):(i=!1,setTimeout((()=>!i&&e.clickOrTap(...s)),501))},doubleClickOrDoubleTap:(...t)=>{i=!0,e.doubleClickOrDoubleTap?.(...t)}}}class b{constructor(e,t,i){if(this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY},this._longTapTimeoutId=null,this._longTapActive=!1,this._mouseMoveStartPosition=null,this._touchMoveStartPosition=null,this._touchMoveExceededManhattanDistance=!1,this._cancelClick=!1,this._cancelTap=!1,this._unsubscribeOutsideMouseEvents=null,this._unsubscribeOutsideTouchEvents=null,this._unsubscribeMobileSafariEvents=null,this._unsubscribeMousemove=null,this._unsubscribeRootMouseEvents=null,this._unsubscribeRootTouchEvents=null,this._unsubscribePinchEvents=null,this._unsubscribeTargetElementEvents=null,this._pinchInfo=null,this._pinchPrevented=!1,this._preventTouchDragProcess=!1,this._mousePressed=!1,this._lastTouchEventTimeStamp=0,this._activeTouchId=null,this._acceptMouseLeave=!n.CheckMobile.iOS(),this._onFirefoxOutsideMouseUp=e=>{this._mouseUpHandler(e)},
this._onMobileSafariDoubleClick=e=>{if(this._firesTouchEvents(e)){const t=this._makeCompatEvent(e);if(++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:i}=this._touchMouseMoveWithDownInfo(C(e),this._tapPosition);i<30&&!this._cancelTap&&this._processTouchEvent(t,this._handlers.doubleTapEvent),this._resetTapTimeout()}}else{const t=this._makeCompatEvent(e);if(++this._clickCount,this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:i}=this._touchMouseMoveWithDownInfo(C(e),this._clickPosition);i<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}}},this._target=e,this._options=(0,r.merge)((0,r.clone)(h),i||{}),this._options.ignoreClickAndTapOnDblClickOrDblTap){if(t.mouseClickEvent&&t.mouseDoubleClickEvent){const e=m({clickOrTap:t.mouseClickEvent.bind(t),doubleClickOrDoubleTap:t.mouseDoubleClickEvent.bind(t)});t.mouseClickEvent=e.clickOrTap,t.mouseDoubleClickEvent=e.doubleClickOrDoubleTap}if(t.tapEvent&&t.doubleTapEvent){const e=m({clickOrTap:t.tapEvent.bind(t),doubleClickOrDoubleTap:t.doubleTapEvent.bind(t)});t.tapEvent=e.clickOrTap,t.doubleTapEvent=e.doubleClickOrDoubleTap}}this._handlers=t,this._init()}destroy(){null!==this._unsubscribeOutsideMouseEvents&&(this._unsubscribeOutsideMouseEvents(),this._unsubscribeOutsideMouseEvents=null),null!==this._unsubscribeOutsideTouchEvents&&(this._unsubscribeOutsideTouchEvents(),this._unsubscribeOutsideTouchEvents=null),null!==this._unsubscribeMousemove&&(this._unsubscribeMousemove(),this._unsubscribeMousemove=null),null!==this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),null!==this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null),null!==this._unsubscribeMobileSafariEvents&&(this._unsubscribeMobileSafariEvents(),this._unsubscribeMobileSafariEvents=null),null!==this._unsubscribePinchEvents&&(this._unsubscribePinchEvents(),this._unsubscribePinchEvents=null),null!==this._unsubscribeTargetElementEvents&&(this._unsubscribeTargetElementEvents(),this._unsubscribeTargetElementEvents=null),this._clearLongTapTimeout(),this._resetClickTimeout()}_mouseEnterHandler(e){this._unsubscribeMousemove&&this._unsubscribeMousemove();const t=this._mouseMoveHandler.bind(this);if(this._unsubscribeMousemove=()=>{this._target.removeEventListener("mousemove",t)},this._target.addEventListener("mousemove",t),this._firesTouchEvents(e))return;const i=this._makeCompatEvent(e);this._processMouseEvent(i,this._handlers.mouseEnterEvent),this._acceptMouseLeave=!0}_resetClickTimeout(){null!==this._clickTimeoutId&&clearTimeout(this._clickTimeoutId),this._clickCount=0,this._clickTimeoutId=null,this._clickPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_resetTapTimeout(){null!==this._tapTimeoutId&&clearTimeout(this._tapTimeoutId),this._tapCount=0,this._tapTimeoutId=null,this._tapPosition={x:Number.NEGATIVE_INFINITY,y:Number.POSITIVE_INFINITY}}_mouseMoveHandler(e){
if(this._mousePressed||null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseMoveEvent),this._acceptMouseLeave=!0}_touchMoveHandler(e){const t=y(e.changedTouches,(0,o.ensureNotNull)(this._activeTouchId));if(null===t)return;if(this._lastTouchEventTimeStamp=S(e),null!==this._pinchInfo)return;if(this._preventTouchDragProcess)return;this._pinchPrevented=!0;const i=this._touchMouseMoveWithDownInfo(C(t),(0,o.ensureNotNull)(this._touchMoveStartPosition)),{xOffset:s,yOffset:r,manhattanDistance:n}=i;if(this._touchMoveExceededManhattanDistance||!(n<5)){if(!this._touchMoveExceededManhattanDistance){const e=.5*s,t=this._options.shouldAllowTouchDrag?.()??!1,i=r>=e&&(!this._options.treatVertTouchDragAsPageScroll||t),o=e>r&&(!this._options.treatHorzTouchDragAsPageScroll||t);i||o||(this._preventTouchDragProcess=!0),this._touchMoveExceededManhattanDistance=!0,this._cancelTap=!0,this._clearLongTapTimeout(),this._resetTapTimeout()}if(!this._preventTouchDragProcess){const i=this._makeCompatEvent(e,t);this._processTouchEvent(i,this._handlers.touchMoveEvent),(0,l.preventDefault)(e)}}}_mouseMoveWithDownHandler(e){if(0!==e.button)return;const t=this._touchMouseMoveWithDownInfo(C(e),(0,o.ensureNotNull)(this._mouseMoveStartPosition)),{manhattanDistance:i}=t;if(i>=5&&(this._cancelClick=!0,this._resetClickTimeout()),this._cancelClick){const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.pressedMouseMoveEvent)}}_touchMouseMoveWithDownInfo(e,t){const i=Math.abs(t.x-e.x),s=Math.abs(t.y-e.y);return{xOffset:i,yOffset:s,manhattanDistance:i+s}}_touchEndHandler(e){let t=y(e.changedTouches,(0,o.ensureNotNull)(this._activeTouchId));if(null===t&&0===e.touches.length&&(t=e.changedTouches[0]),null===t)return;this._activeTouchId=null,this._lastTouchEventTimeStamp=S(e),this._clearLongTapTimeout(),this._touchMoveStartPosition=null,this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);const i=this._makeCompatEvent(e,t);if(this._processTouchEvent(i,this._handlers.touchEndEvent),++this._tapCount,this._tapTimeoutId&&this._tapCount>1){const{manhattanDistance:e}=this._touchMouseMoveWithDownInfo(C(t),this._tapPosition);e<30&&!this._cancelTap&&this._processTouchEvent(i,this._handlers.doubleTapEvent),this._resetTapTimeout()}else this._cancelTap||(this._processTouchEvent(i,this._handlers.tapEvent),this._handlers.tapEvent&&(0,l.preventDefault)(e));0===this._tapCount&&(0,l.preventDefault)(e),0===e.touches.length&&this._longTapActive&&(this._longTapActive=!1,(0,l.preventDefault)(e))}_touchCancelHandler(e){this._touchEndHandler(e)}_mouseUpHandler(e){if(0!==e.button)return;const t=this._makeCompatEvent(e);if(this._mouseMoveStartPosition=null,this._mousePressed=!1,this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null),n.isFF){this._target.ownerDocument.documentElement.removeEventListener("mouseleave",this._onFirefoxOutsideMouseUp)}
if(!this._firesTouchEvents(e))if(this._processMouseEvent(t,this._handlers.mouseUpEvent),++this._clickCount,this._clickTimeoutId&&this._clickCount>1){const{manhattanDistance:i}=this._touchMouseMoveWithDownInfo(C(e),this._clickPosition);i<5&&!this._cancelClick&&this._processMouseEvent(t,this._handlers.mouseDoubleClickEvent),this._resetClickTimeout()}else this._cancelClick||this._processMouseEvent(t,this._handlers.mouseClickEvent)}_clearLongTapTimeout(){null!==this._longTapTimeoutId&&(clearTimeout(this._longTapTimeoutId),this._longTapTimeoutId=null)}_touchStartHandler(e){if(null!==this._activeTouchId)return this._clearLongTapTimeout(),void this._resetTapTimeout();const t=e.changedTouches[0];this._activeTouchId=t.identifier,this._lastTouchEventTimeStamp=S(e);const i=this._target.ownerDocument.documentElement;this._cancelTap=!1,this._touchMoveExceededManhattanDistance=!1,this._preventTouchDragProcess=!1,this._touchMoveStartPosition=C(t),this._unsubscribeRootTouchEvents&&(this._unsubscribeRootTouchEvents(),this._unsubscribeRootTouchEvents=null);{const t=this._touchMoveHandler.bind(this),s=this._touchEndHandler.bind(this);this._unsubscribeRootTouchEvents=()=>{i.removeEventListener("touchmove",t),i.removeEventListener("touchend",s)},i.addEventListener("touchmove",t,{passive:!1}),i.addEventListener("touchend",s,{passive:!1}),this._clearLongTapTimeout(),this._longTapTimeoutId=setTimeout(this._longTapHandler.bind(this,e),333)}const s=this._makeCompatEvent(e,t);this._processTouchEvent(s,this._handlers.touchStartEvent),this._tapTimeoutId||(this._tapCount=0,this._tapTimeoutId=setTimeout(this._resetTapTimeout.bind(this),500),this._tapPosition=C(t))}_wheelClickHandler(e){if(1!==e.button)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.wheelClickEvent)}_mouseDownHandler(e){if(0!==e.button)return;const t=this._target.ownerDocument.documentElement;n.isFF&&t.addEventListener("mouseleave",this._onFirefoxOutsideMouseUp),this._cancelClick=!1,this._mouseMoveStartPosition=C(e),this._unsubscribeRootMouseEvents&&(this._unsubscribeRootMouseEvents(),this._unsubscribeRootMouseEvents=null);{const e=this._mouseMoveWithDownHandler.bind(this),i=this._mouseUpHandler.bind(this);this._unsubscribeRootMouseEvents=()=>{t.removeEventListener("mousemove",e),t.removeEventListener("mouseup",i)},t.addEventListener("mousemove",e),t.addEventListener("mouseup",i)}if(this._mousePressed=!0,this._firesTouchEvents(e))return;const i=this._makeCompatEvent(e);this._processMouseEvent(i,this._handlers.mouseDownEvent),this._clickTimeoutId||(this._clickCount=0,this._clickTimeoutId=setTimeout(this._resetClickTimeout.bind(this),500),this._clickPosition=C(e))}_init(){const e=this._mouseEnterHandler.bind(this);this._target.addEventListener("mouseenter",e);const t=this._touchCancelHandler.bind(this);this._target.addEventListener("touchcancel",t);{const e=this._target.ownerDocument,t=e=>!e.target||!this._target.contains(e.target),i=e=>{if(!t(e))return;const i=e.changedTouches[0];this._lastTouchEventTimeStamp=S(e),
this._processTouchEvent(this._makeCompatEvent(e,i),this._handlers.touchStartOutsideEvent)},s=e=>{t(e)&&!this._firesTouchEvents(e)&&this._processMouseEvent(this._makeCompatEvent(e),this._handlers.mouseDownOutsideEvent)};this._unsubscribeOutsideTouchEvents=()=>{e.removeEventListener("touchstart",i)},this._unsubscribeOutsideMouseEvents=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",i,{passive:!0})}n.CheckMobile.iOS()&&(this._unsubscribeMobileSafariEvents=()=>{this._target.removeEventListener("dblclick",this._onMobileSafariDoubleClick)},this._target.addEventListener("dblclick",this._onMobileSafariDoubleClick));const i=this._mouseLeaveHandler.bind(this);this._target.addEventListener("mouseleave",i);const s=this._contextMenuHandler.bind(this);this._target.addEventListener("contextmenu",s);const o=this._touchStartHandler.bind(this);let r;this._target.addEventListener("touchstart",o,{passive:!0}),n.isChrome&&(r=e=>{if(1===e.button)return e.preventDefault(),!1},this._target.addEventListener("mousedown",r));const l=this._mouseDownHandler.bind(this);this._target.addEventListener("mousedown",l);const a=this._wheelClickHandler.bind(this);this._target.addEventListener(u,a);const c=()=>{};this._target.addEventListener("touchmove",c,{passive:!1}),this._unsubscribeTargetElementEvents=()=>{this._target.removeEventListener("mouseleave",i),this._target.removeEventListener("contextmenu",s),this._target.removeEventListener("touchstart",o),r&&this._target.removeEventListener("mousedown",r),this._target.removeEventListener("mousedown",l),this._target.removeEventListener(u,a),this._target.removeEventListener("touchmove",c)},this._initPinch()}_initPinch(){if(void 0===this._handlers.pinchStartEvent&&void 0===this._handlers.pinchEvent&&void 0===this._handlers.pinchEndEvent)return;const e=e=>this._checkPinchState(e.touches);this._target.addEventListener("touchstart",e,{passive:!0});const t=e=>{if(null===this._pinchInfo)return;const t=y(e.touches,(0,o.ensureNotNull)(this._activeTouchId)),i=y(e.touches,this._pinchInfo.secondTouchId);if(t&&i&&void 0!==this._handlers.pinchEvent){const{startPinchDistance:s,startPinchMiddlePoint:o}=this._pinchInfo,r=g(t,i)/s,n=v(this._target);this._handlers.pinchEvent(o,{x:t.clientX-n.left,y:t.clientY-n.top},{x:i.clientX-n.left,y:i.clientY-n.top},r),(0,l.preventDefault)(e)}};this._target.addEventListener("touchmove",t,{passive:!1});const i=e=>this._checkPinchState(e.touches);this._target.addEventListener("touchend",i),this._unsubscribePinchEvents=()=>{this._target.removeEventListener("touchstart",e),this._target.removeEventListener("touchmove",t),this._target.addEventListener("touchend",i)}}_checkPinchState(e){1===e.length&&(this._pinchPrevented=!1),2!==e.length||this._pinchPrevented||this._longTapActive?this._stopPinch():this._startPinch(e)}_startPinch(e){if(void 0!==this._handlers.pinchStartEvent&&null===this._pinchInfo){const t=v(this._target);let i,s;e[0].identifier===this._activeTouchId?(i=e[0],s=e[1]):(i=e[1],s=e[0]);const o={x:i.clientX-t.left,
y:i.clientY-t.top},r={x:s.clientX-t.left,y:s.clientY-t.top},n={x:(o.x+r.x)/2,y:(o.y+r.y)/2};this._handlers.pinchStartEvent(n,o,r,{bothPointsOnTargetElement:this._target.contains(s.target)})&&(this._pinchInfo={startPinchDistance:g(i,s),startPinchMiddlePoint:n,secondTouchId:s.identifier})}this._clearLongTapTimeout()}_stopPinch(){null!==this._pinchInfo&&(this._pinchInfo=null,this._handlers.pinchEndEvent?.())}_mouseLeaveHandler(e){if(this._unsubscribeMousemove&&this._unsubscribeMousemove(),this._firesTouchEvents(e))return;if(!this._acceptMouseLeave)return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.mouseLeaveEvent),this._acceptMouseLeave=!n.CheckMobile.iOS()}_longTapHandler(e){const t=y(e.touches,(0,o.ensureNotNull)(this._activeTouchId));if(null===t)return;const i=this._makeCompatEvent(e,t);this._processTouchEvent(i,this._handlers.longTapEvent),this._processTouchEvent(i,this._handlers.touchContextMenuEvent),this._cancelTap=!0,this._longTapActive=!0}_contextMenuHandler(e){if((0,l.preventDefault)(e),null!==this._touchMoveStartPosition)return;if(this._firesTouchEvents(e))return;const t=this._makeCompatEvent(e);this._processMouseEvent(t,this._handlers.contextMenuEvent),this._cancelClick=!0}_firesTouchEvents(e){return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:S(e)<this._lastTouchEventTimeStamp+500}_processTouchEvent(e,t){(0,a.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e)}_processMouseEvent(e,t){window.TVD&&("mouseenter"===e.srcType||"mousemove"===e.srcType)&&c>0?c--:("mouseleave"!==e.srcType&&(0,a.setLastMouseOrTouchEventInfo)(e),t&&t.call(this._handlers,e))}_makeCompatEvent(e,t){const i=t||e,o=t?void 0:e.buttons,r=(0,s.default)((()=>this._target.getBoundingClientRect()||{left:0,top:0}));return{clientX:i.clientX,clientY:i.clientY,pageX:i.pageX,pageY:i.pageY,screenX:i.screenX,screenY:i.screenY,get localX(){return i.clientX-r().left},get localY(){return i.clientY-r().top},ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,buttons:o,isTouch:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,stylus:"stylus"===t?.touchType,srcType:e.type,target:i.target,view:e.view,preventDefault:()=>{"touchstart"!==e.type&&(0,l.preventDefault)(e)}}}}function v(e){return e.getBoundingClientRect()||{left:0,top:0}}function C(e){return{x:e.pageX,y:e.pageY}}function g(e,t){const i=e.clientX-t.clientX,s=e.clientY-t.clientY;return Math.sqrt(i*i+s*s)}function S(e){return e.timeStamp||performance.now()}function y(e,t){for(let i=0;i<e.length;++i)if(e[i].identifier===t)return e[i];return null}},142347:(e,t,i)=>{"use strict";i.d(t,{barFunctionByStyle:()=>o});var s=i(888365);function o(e,t){switch(e){case 12:return(0,s.barFunction)("low","low","close");case 2:case 18:case 20:case 14:case 15:case 3:case 10:case 13:return(0,s.barFunction)(t??"close");default:return(0,s.barFunction)("close","open")}}},637282:(e,t,i)=>{"use strict";i.d(t,{CustomSourceBase:()=>s});class s{constructor(e,t){this._id=e,this._model=t}
id(){return this._id}isHoveredEnabled(){return!0}isSelectionEnabled(){return!1}priceScale(){return null}paneViews(e){return[]}labelPaneViews(e){return[]}priceAxisViews(e,t){return[]}updateViewsForPane(e,t){e.containsMainSeries()&&this.updateAllViews(t)}}},338887:(e,t,i)=>{"use strict";i.d(t,{getDataVendorString:()=>o});var s=i(687037);function o(e){return null==e||s.enabled("bovespa_widget")?null:"QUANDL"===e.exchange?"Quandl.com":["BMFBOVESPA","BME","NAG","TSE","TFX","NZX","BCBA","TWSE","TASE","EURONEXT","TOCOM","BMV","SIX","SGX","GPW","SWB","BCS","WB","SZSE","BELEX","BAHRAIN","EGX","TADAWUL","BVL","LUXSE","DFM","BVC","NSENG","IDX","HSI","QSE","OSE"].includes(e.exchange)?"ICE Data Services":null}},303677:(e,t,i)=>{"use strict";i.d(t,{customFormatters:()=>s});const s={dateFormatter:null,timeFormatter:null,tickMarkFormatter:null,priceFormatterFactory:null,studyFormatterFactory:null}},514181:(e,t,i)=>{"use strict";i.d(t,{availableDateFormats:()=>y,dateFormatFunctions:()=>g,defaultDateFormat:()=>f,getDateFormatWithWeekday:()=>S,getQuarter:()=>a,monthFormatFunction:()=>C,yyyy:()=>v});var s=i(444372),o=i(39654),r=i(866893);const n={1:()=>s.t(null,void 0,i(562310)),2:()=>s.t(null,void 0,i(302507)),3:()=>s.t(null,void 0,i(92767)),4:()=>s.t(null,void 0,i(227072)),5:()=>s.t(null,{context:"short"},i(13132)),6:()=>s.t(null,void 0,i(800429)),7:()=>s.t(null,void 0,i(853786)),8:()=>s.t(null,void 0,i(546450)),9:()=>s.t(null,void 0,i(806816)),10:()=>s.t(null,void 0,i(912179)),11:()=>s.t(null,void 0,i(526899)),12:()=>s.t(null,void 0,i(532084))},l={1:()=>s.t(null,void 0,i(914568)),2:()=>s.t(null,void 0,i(913534)),3:()=>s.t(null,void 0,i(914530)),4:()=>s.t(null,void 0,i(903762))},a=(e,t)=>Math.floor((c(e,t)-1)/3)+1,c=(e,t)=>(t?e.getMonth():e.getUTCMonth())+1,u=(e,t)=>t?e.getFullYear():e.getUTCFullYear(),h=(e,t)=>e.toLocaleDateString(window.language?(0,o.getIsoLanguageCodeFromLanguage)(window.language):void 0,{weekday:"short",timeZone:"local"===t?void 0:t}),d=(e,t)=>l[a(e,t)](),_=(e,t)=>(0,r.numberToStringWithLeadingZero)(((e,t)=>t?e.getDate():e.getUTCDate())(e,t),2),p=(e,t)=>n[c(e,t)](),m=(e,t)=>(0,r.numberToStringWithLeadingZero)(c(e,t),2),b=(e,t)=>(0,r.numberToStringWithLeadingZero)(u(e,t)%100,2),v=(e,t)=>(0,r.numberToStringWithLeadingZero)(u(e,t),4),C=(e,t)=>p(e,t),g={"qq 'yy":(e,t)=>`${d(e,t)} '${b(e,t)}`,"qq yyyy":(e,t)=>`${d(e,t)} ${v(e,t)}`,"dd MMM 'yy":(e,t)=>`${_(e,t)} ${p(e,t)} '${b(e,t)}`,"MMM 'yy":(e,t)=>`${p(e,t)} '${b(e,t)}`,"MMM dd, yyyy":(e,t)=>`${p(e,t)} ${_(e,t)}, ${v(e,t)}`,"MMM yyyy":(e,t)=>`${p(e,t)} ${v(e,t)}`,"MMM dd":(e,t)=>`${p(e,t)} ${_(e,t)}`,"dd MMM":(e,t)=>`${_(e,t)} ${p(e,t)}`,"yyyy-MM-dd":(e,t)=>`${v(e,t)}-${m(e,t)}-${_(e,t)}`,"yy-MM-dd":(e,t)=>`${b(e,t)}-${m(e,t)}-${_(e,t)}`,"yy/MM/dd":(e,t)=>`${b(e,t)}/${m(e,t)}/${_(e,t)}`,"yyyy/MM/dd":(e,t)=>`${v(e,t)}/${m(e,t)}/${_(e,t)}`,"dd-MM-yyyy":(e,t)=>`${_(e,t)}-${m(e,t)}-${v(e,t)}`,"dd-MM-yy":(e,t)=>`${_(e,t)}-${m(e,t)}-${b(e,t)}`,"dd/MM/yy":(e,t)=>`${_(e,t)}/${m(e,t)}/${b(e,t)}`,"dd/MM/yyyy":(e,t)=>`${_(e,t)}/${m(e,t)}/${v(e,t)}`,
"MM/dd/yy":(e,t)=>`${m(e,t)}/${_(e,t)}/${b(e,t)}`,"MM/dd/yyyy":(e,t)=>`${m(e,t)}/${_(e,t)}/${v(e,t)}`};function S(e,t){return"ja"===window.language?(i,s)=>`${g[e](i,s)} (${h(i,t)})`:(i,s)=>`${h(i,t)} ${g[e](i,s)}`}const y=Object.keys(g),f=()=>-1!==["ja","ko","zh","zh_TW"].indexOf(window.language||"")?"yyyy-MM-dd":"dd MMM 'yy"},412158:(e,t,i)=>{"use strict";i.d(t,{alwaysShowLastPriceAndLastDayChange:()=>s,lastDayChangeAvailable:()=>o});i(687037);const s=!1,o=!0},966353:(e,t,i)=>{"use strict";i.d(t,{LogicalRange:()=>o});var s=i(650151);class o{constructor(e,t){(0,s.assert)(e<=t,"The left value should be greater than or equal to the right value"),this._left=e,this._right=t}left(){return this._left}right(){return this._right}length(){return this._right-this._left+1}contains(e,t){return e<this._left-.5?!0===t&&1:e>this._right+.5?!0===t&&2:!0!==t||0}before(e){return e<this._left-.5}after(e){return e>this._right+.5}intersects(e){return!(this.after(e.left())||this.before(e.right()))}equals(e){return this._left===e.left()&&this._right===e.right()}static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}},304642:(e,t,i)=>{"use strict";i.d(t,{getNumericFormatter:()=>u,getPercentageFormatter:()=>h,getPipFormatter:()=>p,getVolumeFormatter:()=>d});var s=i(39485),o=i(754032),r=i(796114),n=i(339563);class l extends n.PriceFormatter{constructor(e){const{priceScale:t,minMove:i=1,type:s,typespecs:o,minMove2:n,ignoreLocaleNumberFormat:l}=e;("forex"===s||(0,r.isCFDSymbol)(s,o))&&n?(super({priceScale:n,ignoreLocaleNumberFormat:l}),this._isForex=!0):(super({priceScale:1,ignoreLocaleNumberFormat:l}),this._isForex=!1),this._pipPriceScale=t,this._pipMinMove=i,this._pipMinMove2=n}format(e,t={}){const{signPositive:i,tailSize:s,ignoreLocaleNumberFormat:o,noExponentialForm:r}=t;let n=this._isForex?this._pipMinMove2:this._pipMinMove;return void 0===n&&(n=NaN),super.format(e*this._pipPriceScale/n,{signPositive:i,tailSize:s,ignoreLocaleNumberFormat:o,noExponentialForm:r})}}var a=i(235614),c=i(866893);const u=(0,c.numDependencyFormatter)((e=>new s.NumericFormatter({precision:e}))),h=(0,c.numDependencyFormatter)((e=>new o.PercentageFormatter({priceScale:Math.pow(10,e??2),minMove:1}))),d=(0,c.numDependencyFormatter)((e=>new a.VolumeFormatter({precision:e}))),_=new WeakMap;function p(e){let t=_.get(e);return t||(t=new l({priceScale:e.pricescale,minMove:e.minmov,minMove2:e.minmove2,type:e.type,typespecs:e.typespecs}),_.set(e,t)),t}},418092:(e,t,i)=>{"use strict";var s;i.d(t,{PaneCursorType:()=>s}),function(e){e[e.Default=0]="Default",e[e.Pointer=1]="Pointer",e[e.Eraser=2]="Eraser",e[e.Dot=3]="Dot",e[e.Grabbing=4]="Grabbing",e[e.ZoomIn=5]="ZoomIn",e[e.VerticalResize=6]="VerticalResize",e[e.HorizontalResize=7]="HorizontalResize",e[e.DiagonalNeSwResize=8]="DiagonalNeSwResize",e[e.DiagonalNwSeResize=9]="DiagonalNwSeResize",e[e.Text=10]="Text",e[e.None=11]="None"}(s||(s={}))},289417:(e,t,i)=>{"use strict";i.d(t,{coordinateIsValid:()=>b,extendAndClipLineSegment:()=>u,fillScaledRadius:()=>C,getArrowPoints:()=>h,interactionTolerance:()=>m,
optimalBarWidth:()=>d,optimalCandlestickWidth:()=>_,optimalHiLoWidth:()=>p,roundToMax:()=>S,setValidLineStyle:()=>v,strokeScaledRadius:()=>g});var s=i(536794),o=i(610555),r=i(648892),n=i(793750),l=i(850699);const a={common:13,line:13,tradingLine:16,minDistanceBetweenPoints:10,series:14,curve:10,anchor:13,esd:4},c={common:3,line:3,tradingLine:3,minDistanceBetweenPoints:5,series:2,curve:3,anchor:2,esd:0};function u(e,t,i,s,n,l){if((0,o.equalPoints)(e,t))return null;const a=new o.Point(0,0),c=new o.Point(i,s);if(n){if(l){const i=(0,r.intersectLineAndBox)((0,o.lineThroughPoints)(e,t),(0,o.box)(a,c));return Array.isArray(i)?i:null}{const i=(0,r.intersectRayAndBox)(t,e,(0,o.box)(a,c));return null===i||(0,o.equalPoints)(t,i)?null:(0,o.lineSegment)(t,i)}}if(l){const i=(0,r.intersectRayAndBox)(e,t,(0,o.box)(a,c));return null===i||(0,o.equalPoints)(e,i)?null:(0,o.lineSegment)(e,i)}{const i=(0,r.intersectLineSegmentAndBox)((0,o.lineSegment)(e,t),(0,o.box)(a,c));return Array.isArray(i)?i:null}}function h(e,t,i,s,o){const r=.5*i,n=Math.sqrt(2),l=t.subtract(e),a=l.normalized();let c=5*i;s&&(c=Math.min(c,.35*l.length()));const u=1*r;if(c*n*.2<=u)return[];const h=a.scaled(c),d=t.subtract(h),_=a.transposed(),p=1*c,m=_.scaled(p),b=d.add(m),v=d.subtract(m),C=b.subtract(t).normalized().scaled(u),g=v.subtract(t).normalized().scaled(u),S=o?t:t.add(C),y=o?t:t.add(g),f=r*(n-1),w=_.scaled(f),T=Math.min(c-1*r/n,r*n*1),P=a.scaled(T),M=t.subtract(w),E=t.add(w),x=t.subtract(P);return[[b,S],[y,v],[M,x.subtract(w)],[E,x.add(w)]]}function d(e,t){return t=t||1,Math.floor(.3*e*t)}function _(e,t){if(e>=2.5&&e<=4)return Math.floor(3*t);const i=1-.2*Math.atan(Math.max(4,e)-4)/(.5*Math.PI),s=Math.floor(e*i*t),o=Math.floor(e*t),r=Math.min(s,o);return Math.max(Math.floor(t),r)}function p(e){return.4*e}function m(){return(0,n.lastMouseOrTouchEventInfo)().isTouch?a:c}function b(e){return null!=e&&!(0,s.isNaN)(e)}function v(e,t){void 0!==t&&(0,l.setLineStyle)(e,t)}function C(e,t){const i=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+i}function g(e,t,i){const s=Math.max(1,Math.floor(t))%2?.5:0;return Math.round(e*t)+(s!==i%2?.5:0)}function S(e){return Math.max(Math.floor(e),1)}},205432:(e,t,i)=>{"use strict";i.d(t,{fromIndexedTo100:()=>u,fromLog:()=>p,fromPercent:()=>l,getCurrentModePriceText:()=>v,getOppositeModePriceText:()=>C,logFormulaForBase:()=>m,logFormulasAreSame:()=>b,toIndexedTo100:()=>h,toIndexedTo100Range:()=>d,toLog:()=>_,toPercent:()=>a,toPercentRange:()=>c});var s=i(432641),o=i(462140);const r={logicalOffset:4,coordOffset:1e-4},n=305;function l(e,t){return t<0&&(e=-e),e/100*t+t}function a(e,t){const i=100*(e-t)/(t||1);return t<0?-i:i}function c(e,t){const i=a(e.minValue(),t),o=a(e.maxValue(),t);return new s.PriceRange(i,o)}function u(e,t){return t<0&&(e=-e),(e-=100)/100*t+t}function h(e,t){const i=100*(e-t)/t+100;return t<0?-i:i}function d(e,t){const i=h(e.minValue(),t),o=h(e.maxValue(),t);return new s.PriceRange(i,o)}function _(e,t){const i=Math.min(10**n-t.coordOffset,Math.abs(e));if(i<1e-25)return 0;const s=(0,
o.log10)(i+t.coordOffset)+t.logicalOffset;return e<0?-s:s}function p(e,t){const i=Math.abs(e);if(i<1e-15)return 0;const s=Math.pow(10,Math.min(i-t.logicalOffset,n))-t.coordOffset;return e<0?-s:s}function m(e){if(null===e)return r;const t=1/e;if(t>=r.coordOffset||t<1e-15)return r;const i=Math.abs(Math.log10(e));return{logicalOffset:i,coordOffset:1/Math.pow(10,i)}}function b(e,t){return e.logicalOffset===t.logicalOffset&&e.coordOffset===t.coordOffset}function v(e,t){return e.isPercentage()?t.formattedPricePercentage:e.isIndexedTo100()?t.formattedPriceIndexedTo100:t.formattedPriceAbsolute}function C(e,t){return e.isPercentage()||e.isIndexedTo100()?t.formattedPriceAbsolute:t.formattedPricePercentage}},235666:(e,t,i)=>{"use strict";i.d(t,{priceSourceTitles:()=>o});var s=i(444372);const o={open:s.t(null,{context:"price source"},i(306976)),high:s.t(null,{context:"price source"},i(893496)),low:s.t(null,{context:"price source"},i(17887)),close:s.t(null,{context:"price source"},i(837054)),hl2:s.t(null,{context:"price source"},i(668916)),hlc3:s.t(null,{context:"price source"},i(204821)),ohlc4:s.t(null,{context:"price source"},i(268163)),hlcc4:s.t(null,{context:"price source"},i(4767))}},432641:(e,t,i)=>{"use strict";i.d(t,{PriceRange:()=>r,mergePriceRanges:()=>n});var s=i(325788);const o=(0,i(735566).getLogger)("Chart.PriceRange");class r{constructor(e,t){if(null!==e&&"object"==typeof e){const t=e;this._minValue=t.m_minValue,this._maxValue=t.m_maxValue}else{const i=e;this._minValue=i,void 0!==t&&(this._maxValue=t)}}equals(e){return this._minValue===e._minValue&&this._maxValue===e._maxValue}clone(){return new r(this._minValue,this._maxValue)}minValue(){return this._minValue}setMinValue(e){this._minValue=e}maxValue(){return this._maxValue}setMaxValue(e){this._maxValue=e}length(){return this._maxValue-this._minValue}isEmpty(){return this._maxValue===this._minValue||this._maxValue!=this._maxValue||this._minValue!=this._minValue}serialize(){return{m_maxValue:this._maxValue,m_minValue:this._minValue}}state(){return{max:this._maxValue,min:this._minValue}}merge(e){return new r(Math.min(this.minValue(),e.minValue()),Math.max(this.maxValue(),e.maxValue()))}apply(e,t){this._minValue=Math.min(this._minValue,e),this._maxValue=Math.max(this._maxValue,t)}set(e,t){this._minValue=e,this._maxValue=t}scaleAroundCenter(e){if(!(0,s.isNumber)(e))return void o.logDebug("PriceRange.scaleAroundCenter: invalid coeff");if(0===this._maxValue-this._minValue)return;const t=.5*(this._maxValue+this._minValue);let i=this._maxValue-t,r=this._minValue-t;i*=e,r*=e,this._maxValue=t+i,this._minValue=t+r}shift(e){(0,s.isNumber)(e)?(this._maxValue+=e,this._minValue+=e):o.logDebug("PriceRange.shift: invalid coeff")}containsStrictly(e){return e.minValue()>this._minValue&&e.maxValue()<this._maxValue}containPrice(e){return e>=this._minValue&&e<=this._maxValue}intersection(e){return this.containPrice(e.minValue())||this.containPrice(e.maxValue())||e.containPrice(this._minValue)?new r(Math.max(this._minValue,e.minValue()),Math.min(this._maxValue,e.maxValue())):null}
static compare(e,t){return null===e||null===t?e===t:e.equals(t)}}function n(e){return e.reduce(((e,t)=>e?t?e.merge(t):e:t),null)}},751818:(e,t,i)=>{"use strict";i.r(t),i.d(t,{QuotesProvider:()=>n});var s=i(111495),o=i(251924),r=i(900608);class n{constructor(e="full",t){this._quotes=null,this._quoteSessionSymbol=null,this._quoteSessionClientId="",this._pausedQuoteSessionSymbol=null,this._quotesUpdate=new o.Delegate,this._quoteSymbolChanged=new o.Delegate,this._multiplexerType=e,this._hibernated=t,this._hibernated?.subscribe((e=>{e?this.pause():this.resume()}))}setQuotesSessionSymbol(e){this._quoteSessionSymbol!==e&&(this._pausedQuoteSessionSymbol=null,this._quoteSessionClientId||(this._quoteSessionClientId="series-"+(0,r.guid)()),this._unsubscribeQuoteSession(),this._quoteSessionSymbol=e,this._quoteSymbolChanged.fire(),e&&this._subscribeQuoteSession(e))}symbol(){return this._quoteSessionSymbol}quotesUpdate(){return this._quotesUpdate}quoteSymbolChanged(){return this._quoteSymbolChanged}quotes(){return this._quotes}async quotesSnapshot(e){return(0,s.getQuoteSessionInstance)("simple").snapshot(e)}isPaused(){return null!==this._pausedQuoteSessionSymbol}pause(){null===this._pausedQuoteSessionSymbol&&(this._pausedQuoteSessionSymbol=this._quoteSessionSymbol,this._unsubscribeQuoteSession())}resume(){null!==this._pausedQuoteSessionSymbol&&(this._subscribeQuoteSession(this._pausedQuoteSessionSymbol),this._pausedQuoteSessionSymbol=null)}destroy(){this._unsubscribeQuoteSession(),this._hibernated?.release()}_onUpdate(e,t){this._quotes=e&&e.values||null,t&&t.values&&this._quotesUpdate.fire(e,t)}_subscribeQuoteSession(e){this._quoteSessionSymbol=e,(0,s.getQuoteSessionInstance)(this._multiplexerType).subscribe(this._quoteSessionClientId,this._quoteSessionSymbol,this._onUpdate.bind(this))}_unsubscribeQuoteSession(){this._quoteSessionSymbol&&((0,s.getQuoteSessionInstance)(this._multiplexerType).unsubscribe(this._quoteSessionClientId,this._quoteSessionSymbol),this._quoteSessionSymbol=null,this._quotes=null)}}},383296:(e,t,i)=>{"use strict";i.d(t,{SelectionRenderer:()=>u});var s=i(610555),o=i(906453),r=i(790188),n=i(578679),l=i(418092),a=i(753530);const c=r.colorsPalette["color-tv-blue-600"];class u extends a.BitmapCoordinatesPaneRenderer{constructor(e){super(),this._data=e||null}setData(e){this._data=e}hitTest(e){if(!this._data||!this._data.visible)return null;for(let t=0;t<this._data.points.length;t++){const i=this._data.points[t];if(i.point.subtract(e).length()<=6)return i.hitTestResult?i.hitTestResult:new n.HitTestResult(this._data.hittestResult,{pointIndex:i.pointIndex,cursorType:i.cursorType??l.PaneCursorType.Default,ownerSourceId:this._data.ownerSourceId})}return null}doesIntersectWithBox(e){return!!this._data&&this._data.points.some((t=>(0,o.pointInBox)(t.point,e)))}_drawImpl(e){if(null===this._data||!this._data.visible)return;const{points:t,bgColors:i,vertOffset:o=0}=this._data;for(let n=0;n<t.length;++n){const{point:l,lineWidth:a}=t[n];(r=l,Number.isFinite(r.x)&&Number.isFinite(r.y))&&this._drawMarker(e,l.add((0,
s.point)(0,o)),this._data,i[n],a)}var r}_drawMarker(e,t,i,o,r=1){const{context:n,horizontalPixelRatio:l,verticalPixelRatio:a}=e,{color:u=c,withOutline:d=!0}=i,_=Math.max(1,Math.floor(l))%2/2,p=(0,s.point)(Math.round(t.x*l)+_,Math.round(t.y*a)+_),m=h(p,Math.round(4*l));n.fillStyle=o,n.fill(d?h(p,Math.round(5*l)+_):m),n.fillStyle=u,m.addPath(h(p,Math.floor((4-r)*l))),n.fill(m,"evenodd")}}function h(e,t){const i=new Path2D;return i.arc(e.x,e.y,t,0,2*Math.PI,!0),i}},333298:(e,t,i)=>{"use strict";i.d(t,{SeriesBarColorer:()=>p});var s=i(790188),o=i(650151),r=i(732218),n=i(498374),l=i(633407);const a=(0,s.getHexColorByName)("color-minty-green-500"),c=(0,s.getHexColorByName)("color-ripe-red-500");function u(e){return{barColor:e.upColor.value(),barBorderColor:e.borderUpColor?e.borderUpColor.value():e.borderColor.value()}}function h(e){return{barColor:e.downColor.value(),barBorderColor:e.borderDownColor?e.borderDownColor.value():e.borderColor.value()}}function d(e,t){return e.borderUpColorProjection&&e.borderUpColor?{barColor:t?e.upColorProjection.value():e.upColor.value(),barBorderColor:t?e.borderUpColorProjection.value():e.borderUpColor.value()}:{barColor:t?e.upColorProjection.value():e.upColor.value()}}function _(e,t){return e.borderDownColorProjection&&e.borderDownColor?{barColor:t?e.downColorProjection.value():e.downColor.value(),barBorderColor:t?e.borderDownColorProjection.value():e.borderDownColor.value()}:{barColor:t?e.downColorProjection.value():e.downColor.value()}}class p extends l.AbstractBarColorer{constructor(e){super(),this._series=e}applyBarStyle(e,t,i,s){const o=i;o.barColor=void 0,o.barBorderColor=void 0,o.barWickColor=void 0,o.isBarHollow=void 0,o.isBarUp=void 0,o.upColor=void 0,o.downColor=void 0,o.isTwoColorBar=void 0,o.isMergedBar=void 0;const r=this._series.properties();switch(r.childs().style.value()){case 2:case 14:case 15:this._applyLineStyle(e,t,i,s,r);break;case 18:this._applyLineStyle(e,t,i,s,r,!0);break;case 3:this._applyAreaStyle(i,r);break;case 16:this._applyHLCAreaStyle(e,t,i,s,r);break;case 0:this._applyBarStyle(e,i,s,r);break;case 17:case 1:case 19:this._applyCandleStyle(e,i,s,r);break;case 9:this._applyHollowCandleStyle(e,i,s,r);break;case 8:this._applyHAStyle(e,t,i,s,r);break;case 10:this._applyBaseLineStyle(e,t,i,s,r);break;case 12:this._applyHiLoStyle(t,i,r);break;case 13:this._applyColumnStyle(e,i,s,r);break;case 4:this._applyRenkoStyle(e,t,i,s,r);break;case 7:this._applyPBStyle(e,t,i,s,r);break;case 5:this._applyKagiStyle(e,t,i,s,r);break;case 6:this._applyPnfStyle(e,t,i,s,r);break;case 11:this._applyRangeStyle(e,t,i,s,r);break;case 20:this._applySVPStyle(e,i,s,r);break;case 21:this._applyHLCBarsStyle(e,i,s,r)}return i}static upColor(e,t){const i=e.childs(),s=i.style.value();switch(s){case 18:return{barColor:i.tpoStyle.childs().color.value()};case 20:return{barColor:i.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 2:return{barColor:i.lineStyle.childs().color.value()};case 14:return{barColor:i.lineWithMarkersStyle.childs().color.value()};case 15:return{
barColor:i.steplineStyle.childs().color.value()};case 3:return{barColor:i.areaStyle.childs().linecolor.value()};case 16:return{barColor:i.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:a};case 0:return{barColor:i.barStyle.childs().upColor.value()};case 17:return u(i.volFootprintStyle.childs());case 19:return u(i.volCandlesStyle.childs());case 1:return u(i.candleStyle.childs());case 9:return u(i.hollowCandleStyle.childs());case 8:return u(i.haStyle.childs());case 10:return{barColor:i.baselineStyle.childs().topLineColor.value()};case 12:return{barColor:i.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:i.columnStyle.childs().upColor.value()};case 4:return d(i.renkoStyle.childs(),t);case 7:return d(i.pbStyle.childs(),t);case 5:return d(i.kagiStyle.childs(),t);case 6:return d(i.pnfStyle.childs(),t);case 11:0;const s=i.rangeStyle.childs(),o=s.barStyle.value()===r.RangeBarStyle.Bars;return{barColor:t?s.upColorProjection.value():o?s.upColor.value():s.candlesUpColor.value(),barBorderColor:t?s.upColorProjection.value():o?s.upColor.value():s.candlesBorderUpColor.value()};case 21:return{barColor:i.hlcBarsStyle.childs().color.value()}}(0,o.ensureNever)(s)}static downColor(e,t){const i=e.childs(),s=i.style.value();switch(s){case 2:return{barColor:i.lineStyle.childs().color.value()};case 18:return{barColor:i.tpoStyle.childs().color.value()};case 20:return{barColor:i.svpStyle.childs().volumeProfile.childs().volumeColorUp.value()};case 14:return{barColor:i.lineWithMarkersStyle.childs().color.value()};case 15:return{barColor:i.steplineStyle.childs().color.value()};case 3:return{barColor:i.areaStyle.childs().linecolor.value()};case 16:return{barColor:i.hlcAreaStyle.childs().closeLineColor.value(),barBorderColor:c};case 0:return{barColor:i.barStyle.childs().downColor.value()};case 17:return h(i.volFootprintStyle.childs());case 1:return h(i.candleStyle.childs());case 19:return h(i.volCandlesStyle.childs());case 9:return h(i.hollowCandleStyle.childs());case 8:return h(i.haStyle.childs());case 10:return{barColor:i.baselineStyle.childs().bottomLineColor.value()};case 12:return{barColor:i.hiloStyle.childs().color.value(),barBorderColor:e.childs().hiloStyle.childs().borderColor.value()};case 13:return{barColor:i.columnStyle.childs().downColor.value()};case 4:return _(i.renkoStyle.childs(),t);case 7:return _(i.pbStyle.childs(),t);case 5:return _(i.kagiStyle.childs(),t);case 6:return _(i.pnfStyle.childs(),t);case 11:0;const s=i.rangeStyle.childs(),o=s.barStyle.value()===r.RangeBarStyle.Bars;return{barColor:t?s.downColorProjection.value():o?s.downColor.value():s.candlesDownColor.value(),barBorderColor:t?s.downColorProjection.value():o?s.downColor.value():s.candlesBorderDownColor.value()};case 21:return{barColor:i.hlcBarsStyle.childs().color.value()}}(0,o.ensureNever)(s)}_applyLineStyle(e,t,i,s,r,n){if(i.barColor=p.upColor(r).barColor,n)return;const l=this._findBar(e,t,s),a=this._series.barFunction()(l),c=this._series.priceScale(),u=this._series.firstValue()
;if(null==a||c.isEmpty()||null==u)return;const h=c.priceToCoordinate(a,u);i.barColor=(0,o.ensureNotNull)(this._series.lineColorAtYPercentFromTop(h/c.height()))}_applyAreaStyle(e,t){e.barColor=p.upColor(t).barColor}_applyHLCAreaStyle(e,t,i,s,o){const r=this._isUp(e,!1,s,this._series.data().first()?.index!==e)?p.upColor(o,t):p.downColor(o,t);i.barColor=r.barColor,i.barBorderColor=r.barBorderColor}_applyBarStyle(e,t,i,s){const o=this._isUp(e,!1,i,s.childs().barStyle.childs().barColorsOnPrevClose.value())?p.upColor(s):p.downColor(s);t.barColor=o.barColor,t.barBorderColor=o.barBorderColor}_applyCandleStyle(e,t,i,s){const o=s.childs(),r=1===o.style.value()?o.candleStyle.childs():19===o.style.value()?o.volCandlesStyle.childs():o.volFootprintStyle.childs(),n=this._isUp(e,!1,i,r.barColorsOnPrevClose.value()&&this._series.data().first()?.index!==e),l=n?p.upColor(s):p.downColor(s);t.barColor=l.barColor,t.barBorderColor=l.barBorderColor,t.barWickColor=n?r.wickUpColor?r.wickUpColor.value():r.wickColor.value():r.wickDownColor?r.wickDownColor.value():r.wickColor.value()}_applyHollowCandleStyle(e,t,i,s){const o=s.childs().hollowCandleStyle.childs(),r=this._isUp(e,!1,i,this._series.data().first()?.index!==e),n=r?p.upColor(s):p.downColor(s);t.barColor=n.barColor,t.barBorderColor=n.barBorderColor,t.barWickColor=r?o.wickUpColor?o.wickUpColor.value():o.wickColor.value():o.wickDownColor?o.wickDownColor.value():o.wickColor.value();const l=this._findBar(e,!1,i);t.isBarHollow=l[1]<=l[4]}_applyHAStyle(e,t,i,s,o){const r=o.childs().haStyle.childs(),n=this._isUp(e,t,s,r.barColorsOnPrevClose.value()),l=n?p.upColor(o):p.downColor(o);i.barColor=l.barColor,i.barBorderColor=l.barBorderColor,i.barWickColor=n?r.wickUpColor.value():r.wickDownColor.value()}_applyBaseLineStyle(e,t,i,s,r){const n=this._findBar(e,t,s),l=r.childs().baselineStyle.childs(),a=this._series.priceScale(),c=Math.round(a.height()*(Math.abs(100-l.baseLevelPercentage.value())/100)),u=(0,o.ensureNotNull)(this._series.firstValue()),h=a.coordinateToPrice(c,u);n[4]>h?i.barColor=p.upColor(r,t).barColor:i.barColor=p.downColor(r,t).barColor}_applyHiLoStyle(e,t,i){const s=p.upColor(i,e);t.barColor=s.barColor,t.barBorderColor=s.barBorderColor}_applyColumnStyle(e,t,i,s){const o=s.childs().columnStyle.childs(),r=this._isUp(e,!1,i,o.barColorsOnPrevClose.value())?p.upColor(s):p.downColor(s);t.color=r.barColor,t.barColor=t.color}_applyRenkoStyle(e,t,i,s,o){const r=o.childs().renkoStyle.childs(),n=this._isUp(e,t,s,!1),l=n?p.upColor(o,t):p.downColor(o,t);i.barColor=l.barColor,i.barBorderColor=l.barBorderColor,i.barWickColor=n?r.wickUpColor.value():r.wickDownColor.value(),i.isBarUp=n}_applyPBStyle(e,t,i,s,o){const r=this._isUp(e,t,s,!1),n=r?p.upColor(o,t):p.downColor(o,t);i.barColor=n.barColor,i.barBorderColor=n.barBorderColor,i.isBarUp=r}_applyKagiStyle(e,t,i,s,o){let r;i.upColor=p.upColor(o,t).barColor,i.downColor=p.downColor(o,t).barColor;const n=this._findBar(e,t,s);n[3]<n[6]&&n[6]<n[2]?(r=n[1]<=n[4],i.isTwoColorBar=!0):(r=n[1]<=n[4]?n[1]===n[6]:n[1]!==n[6],i.isTwoColorBar=!1),
i.barColor=r?i.upColor:i.downColor,i.isBarUp=n[1]<=n[4]}_applyPnfStyle(e,t,i,s,o){const r=this._findBar(e,t,s)[6],n=r>0,l=p.upColor(o,t),a=p.downColor(o,t);i.isBarUp=n,i.isMergedBar=2===Math.abs(r),i.upColor=l.barColor,i.downColor=a.barColor,i.barColor=n?l.barColor:a.barColor}_applyRangeStyle(e,t,i,s,o){const n=o.childs().rangeStyle.childs(),l=n.barStyle.value()===r.RangeBarStyle.Bars,a=this._isUp(e,!1,s,!1),c=a?p.upColor(o,t):p.downColor(o,t),u=a?t?n.upColorProjection.value():l?void 0:n.candlesWickUpColor.value():t?n.downColorProjection.value():l?void 0:n.candlesWickDownColor.value();i.barColor=c.barColor,i.barBorderColor=c.barBorderColor,i.wickColor=u,i.barWickColor=u}_applySVPStyle(e,t,i,s){const o=this._isUp(e,!1,i,!1)?p.upColor(s,!1):p.downColor(s,!1);t.barColor=o.barColor,t.barBorderColor=o.barBorderColor}_applyHLCBarsStyle(e,t,i,s){t.barColor=s.childs().hlcBarsStyle.childs().color.value()}_findBar(e,t,i){return i?i.value:this._getSeriesBars(t).valueAt(e)||[]}_findPrevBar(e,t,i){if(i&&i.previousValue)return i.previousValue;const s=this._series.bars().search(e-1,n.PlotRowSearchMode.NearestLeft,4);return null!==s?s.value:[]}_getSeriesBars(e){return e?this._series.nsBars():this._series.bars()}_isUp(e,t,i,s){const o=this._findBar(e,t,i);if(s){return this._findPrevBar(e,t,i)[4]<=o[4]}return o[1]<=o[4]}}},759199:(e,t,i)=>{"use strict";i.d(t,{SeriesAreaPaneView:()=>a});var s=i(650369),o=i(78842),r=i(743099),n=i(383296),l=i(612610);class a extends l.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().areaStyle.childs(),i=t.transparency.value(),l={simpleMode:!1,barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:t.linecolor.value(),lineStyle:t.linestyle.value(),lineWidth:t.linewidth.value(),isSeries:!0,withMarkers:!1,bottom:e.height(),color1:(0,s.generateColor)(t.color1.value(),i),color2:(0,s.generateColor)(t.color2.value(),i),skipHoles:!0},a=new r.CompositeRenderer;return a.append(new o.PaneRendererArea(l)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new n.SelectionRenderer(this._selectionData)),a}}},776016:(e,t,i)=>{"use strict";i.d(t,{SeriesBarsPaneView:()=>l});var s=i(743099),o=i(383296),r=i(378817),n=i(167380);class l extends r.SeriesBarCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:e.barStyle.childs().dontDrawOpen.value(),thinBars:11===e.style.value()?e.rangeStyle.childs().thinBars.value():e.barStyle.childs().thinBars.value()},i=new s.CompositeRenderer;return i.append(new n.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&i.append(new o.SelectionRenderer(this._selectionData)),i}_createItem(e,t,i){const s={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:i.barColor,left:NaN,right:NaN,timePointIndex:e}
;return(0,r.baseBarCandlesUpdater)(t,s)?s:null}}},966324:(e,t,i)=>{"use strict";i.d(t,{SeriesBaselinePaneView:()=>b});var s=i(650369),o=i(743099),r=i(610555),n=i(648892),l=i(2624),a=i(289417),c=i(615790),u=i(973274),h=i(578679),d=i(850699);class _ extends u.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null}setData(e){this._data=e}hitTest(e){if(null===this._data)return null;const{items:t,topLineWidth:i,bottomLineWidth:s}=this._data,o=(0,a.interactionTolerance)().series+(i+s)/4,n=(0,c.lowerbound)(t,e,((e,t)=>e.center<=t.x)),u=Math.max(1,n-1),d=Math.min(t.length-1,n+1);for(let i=u;i<=d;++i){const s=t[i-1],n=t[i],{distance:a}=(0,l.distanceToSegment)((0,r.point)(s.center,s.y),(0,r.point)(n.center,n.y),(0,r.point)(e.x,e.y));if(a<=o)return new h.HitTestResult(h.HitTarget.Regular)}return null}_drawImpl(e){if(null===this._data)return;const{items:t,baseLevelCoordinate:i,bottom:s,bottomFillColor1:o,bottomFillColor2:l,topFillColor1:c,topFillColor2:u,topLineColor:h,bottomLineColor:_,topLineWidth:p,bottomLineWidth:m,topLineStyle:b,bottomLineStyle:v}=this._data;if(!function(e){if(0===e.length)return!1;const t=e.findIndex((e=>(0,a.coordinateIsValid)(e.y)));if(-1===t)return!1;let i=e.length-1;for(;i>t&&!(0,a.coordinateIsValid)(e[i].y);)i--;return!(t>i)}(t))return;const C=e.context,{topItems:g,bottomItems:S}=function(e,t){const i=[],s=[];let o=null;for(let l=0;l<e.length;l++){let c=e[l];const u=e[l+1]||{};if((0,a.coordinateIsValid)(c.y))c.y<=t&&i.push(c),c.y>=t&&s.push(c),o=c;else{if(null===o)continue;c=o}if((0,a.coordinateIsValid)(u.y)&&(c.y>t&&u.y<t||c.y<t&&u.y>t))if(Math.abs(c.center-u.center)<1){const e={center:c.center,y:t};i.push(e),s.push(e)}else{const e=(0,n.intersectLineSegments)((0,r.point)(c.center,c.y),(0,r.point)(u.center,u.y),(0,r.point)(c.center,t),(0,r.point)(u.center,t));if(null!==e){const t={center:c.center+(u.center-c.center)*e,y:c.y+(u.y-c.y)*e};i.push(t),s.push(t)}}}return{topItems:i,bottomItems:s}}(t,i);C.lineCap="round",C.lineJoin="round",0!==g.length&&(C.beginPath(),C.moveTo(g[0].center,i),this._makeLine(C,g,!0,0),C.closePath(),C.fillStyle=this._makeLinearGradient(C,c,u,i-s,i),C.fill(),C.beginPath(),this._makeLine(C,g,!1,0),C.lineWidth=p,C.strokeStyle=h,(0,d.setLineStyle)(C,b),C.stroke()),0!==S.length&&(C.beginPath(),C.moveTo(S[0].center,i),this._makeLine(C,S,!0,1),C.closePath(),C.fillStyle=this._makeLinearGradient(C,o,l,i,i+s),C.fill(),C.beginPath(),this._makeLine(C,S,!1,1),C.lineWidth=m,C.strokeStyle=_,(0,d.setLineStyle)(C,v),C.stroke())}_makeLine(e,t,i,s){if(null===this._data)return;const o=t.findIndex((e=>(0,a.coordinateIsValid)(e.y)));if(-1===o)return;const{barSpacing:r,baseLevelCoordinate:n}=this._data,l=.25*r;let c;const u=t.length;for(let r=o;r<u;r++){const u=t[r],h=t[r+1]||{};if((0,a.coordinateIsValid)(u.y)){if(0===s){if(c&&c.y>=n&&u.y>=n){e.moveTo(u.center,u.y);continue}}else if(c&&c.y<=n&&u.y<=n){e.moveTo(u.center,u.y);continue}if(c&&(0,a.coordinateIsValid)(c.y))e.lineTo(u.center,u.y),i&&!(0,a.coordinateIsValid)(h.y)&&e.lineTo(u.center,n);else if(h&&(0,
a.coordinateIsValid)(h.y))i?(r!==o&&e.lineTo(u.center,n),e.lineTo(u.center,u.y)):e.moveTo(u.center,u.y);else if(i){if(0===r)continue;r!==o&&e.lineTo(u.center-l,n),e.lineTo(u.center-l,u.y),e.lineTo(u.center+l,u.y),e.lineTo(u.center+l,n)}else e.moveTo(u.center-l,u.y),e.lineTo(u.center+l,u.y);c=u}}}_makeLinearGradient(e,t,i,s,o){const r=e.createLinearGradient(0,s,0,o);return r.addColorStop(0,t),r.addColorStop(1,i),r}}var p=i(383296),m=i(612610);class b extends m.SeriesSingleLinePaneView{constructor(){super(...arguments),this._renderer=new _,this._topFillColor1="",this._topFillColor2="",this._bottomFillColor1="",this._bottomFillColor2="",this._topLineColor="",this._bottomLineColor="",this._topLineWidth=0,this._bottomLineWidth=0,this._topLineStyle=0,this._bottomLineStyle=0,this._barSpacing=0,this._bottom=0,this._baseLevelCoordinate=0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer.setData({items:this._items,topFillColor1:this._topFillColor1,topFillColor2:this._topFillColor2,bottomFillColor1:this._bottomFillColor1,bottomFillColor2:this._bottomFillColor2,topLineColor:this._topLineColor,bottomLineColor:this._bottomLineColor,topLineWidth:this._topLineWidth,bottomLineWidth:this._bottomLineWidth,topLineStyle:this._topLineStyle,bottomLineStyle:this._bottomLineStyle,barSpacing:this._barSpacing,baseLevelCoordinate:this._baseLevelCoordinate,bottom:this._bottom});const e=new o.CompositeRenderer;return e.append(this._renderer),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&e.append(new p.SelectionRenderer(this._selectionData)),e}_updateImpl(){super._updateImpl();const e=this._source.priceScale();if(!e)return;const t=this._source.properties().childs().baselineStyle.childs(),i=t.transparency.value();this._topFillColor1=(0,s.generateColor)(t.topFillColor1.value(),i),this._topFillColor2=(0,s.generateColor)(t.topFillColor2.value(),i),this._bottomFillColor1=(0,s.generateColor)(t.bottomFillColor1.value(),i),this._bottomFillColor2=(0,s.generateColor)(t.bottomFillColor2.value(),i),this._topLineColor=t.topLineColor.value(),this._bottomLineColor=t.bottomLineColor.value(),this._topLineWidth=t.topLineWidth.value(),this._bottomLineWidth=t.bottomLineWidth.value(),this._topLineStyle=t.topLineStyle.value(),this._bottomLineStyle=t.bottomLineStyle.value(),this._barSpacing=this._model.timeScale().barSpacing(),this._bottom=e.height(),this._baseLevelCoordinate=Math.round(this._bottom*(Math.abs(100-t.baseLevelPercentage.value())/100))}}},577196:(e,t,i)=>{"use strict";i.d(t,{SeriesWaterlinePaneView:()=>l});var s=i(869366),o=i(418092),r=i(578679),n=i(981182);class l extends s.HorizontalLinePaneView{constructor(e){super(),this._getters=e;const t={cursorType:o.PaneCursorType.VerticalResize,activeItem:0,areaName:r.AreaName.SourceItemMove};this._lineRenderer.setHitTest(new r.HitTestResult(r.HitTarget.MovePoint,t)),this._lineRendererData.visible=!0,this._lineRendererData.linestyle=n.LINESTYLE_SPARSE_DOTTED}_updateImpl(){
const{baseLevelPercentage:e,paneHeight:t,color:i}=this._getters,s=Math.abs(100-e());this._lineRendererData.y=Math.round(t()*(s/100)),this._lineRendererData.color=i()}}},423263:(e,t,i)=>{"use strict";i.d(t,{SeriesCandlesPaneView:()=>a});var s=i(743099),o=i(289417),r=i(383296),n=i(378817),l=i(238477);class a extends n.SeriesBarCandlesPaneView{constructor(e,t,i=1){super(e,t),this._scaleCoeff=1,this._scaleCoeff=i}renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs(),i=1===t.style.value()?t.candleStyle.childs():19===t.style.value()?t.volCandlesStyle.childs():t.volFootprintStyle.childs(),n=this._model.timeScale().barSpacing(),a={bars:this._bars,barSpacing:n,bodyVisible:i.drawBody.value(),borderVisible:i.drawBorder.value(),borderColor:i.borderColor.value(),wickColor:i.wickColor.value(),barWidth:(0,o.optimalBarWidth)(n),wickVisible:i.drawWick.value(),isPriceScaleInverted:e.isInverted(),scaleCoeff:this._scaleCoeff},c=new s.CompositeRenderer;return c.append(new l.PaneRendererCandles(a)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&c.append(new r.SelectionRenderer(this._selectionData)),c}_createItem(e,t,i){const s={center:NaN,open:NaN,high:NaN,low:NaN,close:NaN,left:NaN,right:NaN,timePointIndex:e,color:i.barColor,borderColor:i.barBorderColor,wickColor:i.barWickColor,hollow:i.isBarHollow};return(0,n.baseBarCandlesUpdater)(t,s)?s:null}}},740465:(e,t,i)=>{"use strict";i.d(t,{SeriesColumnsPaneView:()=>_});var s=i(650151),o=i(610555),r=i(687037),n=i(569708),l=i(578679),a=i(743099),c=i(498374),u=i(771175),h=i(383296),d=i(964121);i(205432);class _{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,r.enabled)("source_selection_markers"),this._selectionData=null,this._histogramBase=0,this._source=e,this._model=t,this._selectionIndexer=new u.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e={barSpacing:this._model.timeScale().barSpacing(),items:this._items,lineColor:"",histogramBase:this._histogramBase},t=new a.CompositeRenderer;return t.append(new d.PaneRendererColumns(e)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new h.SelectionRenderer(this._selectionData)),t}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const i=e.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;const r=this._source.nearestIndex(i.firstBar(),c.PlotRowSearchMode.NearestRight),a=this._source.nearestIndex(i.lastBar(),c.PlotRowSearchMode.NearestLeft);if(void 0===r||void 0===a)return;const u=this._source.barColorer(),h={},d=this._source.barFunction();for(const{index:e,value:t}of this._source.bars().rangeIterator(r,a)){const i=d(t);if(!(0,n.default)(i))continue;h.value=t;let s=this._source.precomputedBarStyle(t)
;void 0===s&&(s=u.barStyle(e,!1,h),this._source.setPrecomputedBarStyle(t,s)),this._items.push({timePointIndex:e,price:i,left:NaN,center:NaN,right:NaN,y:NaN,style:s}),h.previousValue=t}const _=this._source.firstValue();if(null===_)return;t.fillYCoordinates(this._items,_),e.fillBarBorders(this._items);this._source.properties().childs().columnStyle.childs().baselinePosition?.value();if(this._histogramBase=t.isInverted()?0:t.height(),this._model.selection().isSelected(this._source)){const i=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:l.HitTarget.Regular};const r=(0,s.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=l.HitTarget.Regular;for(let s=0;s<i.length;s++){const n=i[s],l=this._source.bars().valueAt(n);if(null===l)continue;const a=d(l),c=e.indexToCoordinate(n),u=t.priceToCoordinate(a,_);this._selectionData.points.push({point:new o.Point(c,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/r))}}else this._selectionIndexer.clear()}}},598845:(e,t,i)=>{"use strict";i.d(t,{SeriesHiLoPaneView:()=>b});var s=i(259332),o=i(348730),r=i(615790),n=i(289417),l=i(578679),a=i(973274);class c extends a.MediaCoordinatesPaneRenderer{constructor(){super(...arguments),this._data=null,this._barWidth=null}setData(e){this._data=e,this._barWidth=Math.max(1,Math.round((0,n.optimalHiLoWidth)(e.barSpacing)))}hitTest(e){if(null===this._data||null===this._barWidth)return null;const t=this._data.bars,i=.5*this._data.barSpacing;if(0===t.length)return null;if(e.x<t[0].center-i)return null;if(e.x>t[t.length-1].center+i)return null;const s=t[(0,r.lowerbound)(t,e.x-i,((e,t)=>e.center<t))];if(e.x<s.center-i||e.x>s.center+i)return null;const o=(0,n.interactionTolerance)().series+this._barWidth/2,a=Math.min(s.high,s.low),c=Math.max(s.high,s.low),u=this._data.fontSize;return a-o-u<=e.y&&e.y<=a+o||c-o<=e.y&&e.y<=c+o+u?new l.HitTestResult(l.HitTarget.Regular):null}_drawImpl(e){if(null===this._data||null===this._barWidth)return;const{font:t,fontSize:i,labelColor:s,bars:r,inverted:n,labelsPadding:l}=this._data,a=e.context;a.textAlign="center",a.fillStyle=s,a.font=(0,o.makeFont)(i,t);for(let e=0;e<r.length;++e){const t=r[e],i=Math.round(Math.min(t.high,t.low)),s=Math.round(Math.max(t.high,t.low)),o=Math.round(t.center);a.textBaseline="alphabetic",a.fillText(n?t.lowLabel:t.highLabel,o,i-l),a.textBaseline="top",a.fillText(n?t.highLabel:t.lowLabel,o,s+l)}}}var u=i(743099),h=i(383296),d=i(147477),_=i(436465),p=i(238477),m=i(378817);class b extends m.SeriesBarCandlesPaneView{constructor(e,t){super(e,t),this._labelsRenderer=new c,this._candlesRenderer=new p.PaneRendererCandles,this._maxLengthLabel="",this._calculateFontSize=(0,s.default)(((e,t)=>Math.max(1,(0,r.lowerboundExt)((e=>e+1),null,(i=>{const s=(0,o.makeFont)(i,d.CHART_FONT_FAMILY);return(0,_.measureText)(e,s).width<=t}),7,36))),((e,t)=>`${e}/${t}`))}renderer(){const e=this._source.priceScale();if(!e||e.isEmpty())return null
;const t=new u.CompositeRenderer,i=this._needLabels(),s=this._source.properties().childs().hiloStyle.childs(),o=this._model.timeScale().barSpacing();if(this._invalidated){const e=this._source.formatter();this._maxLengthLabel="",this._updateImpl({generateLabels:i,formatter:e}),this._invalidated=!1}if(this._candlesRenderer.setData({bars:this._bars,wickVisible:!1,bodyVisible:s.drawBody.value(),barSpacing:o,borderVisible:s.showBorders.value(),barWidth:(0,n.optimalHiLoWidth)(o),isPriceScaleInverted:e.isInverted()}),t.append(this._candlesRenderer),i){const i=this._calculateLabelFontSize();i&&i>=8&&(this._labelsRenderer.setData({bars:this._bars,barSpacing:o,font:d.CHART_FONT_FAMILY,fontSize:i,labelColor:s.labelColor.value(),inverted:e.isInverted(),labelsPadding:.4*i}),t.append(this._labelsRenderer))}return this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&t.append(new h.SelectionRenderer(this._selectionData)),t}topPixelMargin(){return this._margin()}bottomPixelMargin(){return this._margin()}_createItem(e,t,i,s){const o={center:NaN,left:NaN,right:NaN,open:NaN,high:NaN,low:NaN,close:NaN,color:i.barColor,borderColor:i.barBorderColor,hollow:!1,highLabel:"",lowLabel:"",timePointIndex:e};if(!(0,m.baseBarCandlesUpdater)(t,o))return null;if(o.open=o.high,o.close=o.low,s.generateLabels){const e=s.formatter.format(o.high),t=s.formatter.format(o.low);o.highLabel=e,o.lowLabel=t;const i=(e.length>t.length?e:t).replace(/\d/g,"0");i.length>this._maxLengthLabel.length&&(this._maxLengthLabel=i)}return o}_margin(){if(this._needLabels()){const e=this._calculateLabelFontSize();if(e&&e>=8)return 1.4*e}return 0}_calculateLabelFontSize(){return""===this._maxLengthLabel?null:this._calculateFontSize(this._maxLengthLabel,Math.floor(this._model.timeScale().barSpacing())-2)}_needLabels(){const e=this._source.properties().childs().hiloStyle.childs().showLabels.value(),t=this._model.timeScale().barSpacing();return e&&t>5}}},474953:(e,t,i)=>{"use strict";i.d(t,{SeriesHLCAreaPaneView:()=>b});var s=i(610555),o=i(650151),r=i(687037),n=i(804616),l=i(771175),a=i(383296),c=i(498374),u=i(289417),h=i(743099),d=i(578679),_=i(938933),p=i(834340);class m extends p.ObjectValuesCache{_newObject(){return{high:void 0,close:void 0,low:void 0}}_clearObject(e){e.high=void 0,e.close=void 0,e.low=void 0}}class b{constructor(e,t){this._isMarkersEnabled=(0,r.enabled)("source_selection_markers"),this._hlcAreaCache=new m,this._highPoints=new p.CachedContainer,this._closePoints=new p.CachedContainer,this._lowPoints=new p.CachedContainer,this._barsBorders=new p.CachedContainer,this._filledAreas=new n.CachedMap,this._renderer=new h.CompositeRenderer,this._invalidated=!0,this._source=e,this._model=t,this._selectionIndexer=new l.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}renderer(){return this._invalidated&&(this._updateImpl(),this._invalidated=!1),this._renderer}_updateImpl(){this._renderer.clear();const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return
;const i=e.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;const r=this._source.firstValue();if(null===r)return;const l=this._source.nearestIndex(i.firstBar()-1,c.PlotRowSearchMode.NearestLeft)??i.firstBar()-1,h=this._source.nearestIndex(i.lastBar()+1,c.PlotRowSearchMode.NearestRight)??i.lastBar()+1;this._hlcAreaCache.invalidateCache(),this._hlcAreaCache.setStartIndex(l),this._barsBorders.invalidateCache(),this._highPoints.invalidateCache(),this._lowPoints.invalidateCache(),this._closePoints.invalidateCache(),this._filledAreas.invalidateCache();let p,m,b;this._source.bars().range(l,h).each(((e,t)=>{if(this._hlcAreaCache.isValidIndex(e)){const i=this._hlcAreaCache.at(e);i.close=t[4],i.high=t[2],i.low=t[3]}return!1}));const v=new Map,C=l+this._hlcAreaCache.length();for(let e=l;e<C;e++){const t=this._hlcAreaCache.at(e),i=t.close??null,s=t.high??null,o=t.low??null;(null!==i||null!==s||null!==o||Number.isFinite(p)||Number.isFinite(m)||Number.isFinite(b))&&(p=i,m=s,b=o,this._highPoints.push(s),this._closePoints.push(i),this._lowPoints.push(o),this._barsBorders.push({timePointIndex:e,left:NaN,center:NaN,right:NaN}),v.set(e,this._barsBorders.length()-1))}t.pricesArrayToCoordinates(this._highPoints.data(),r,this._highPoints.length()),t.pricesArrayToCoordinates(this._closePoints.data(),r,this._closePoints.length()),t.pricesArrayToCoordinates(this._lowPoints.data(),r,this._lowPoints.length()),e.fillBarBorders(this._barsBorders.data(),{startItemIndex:0,endItemIndex:this._barsBorders.length()});const g=this._source.properties().childs().hlcAreaStyle.childs(),S=g.highCloseFillColor.value(),y=g.closeLowFillColor.value(),f=this._filledAreas.get(S)??new n.AreaBackgroundItemsGroup({type:0,color:S}),w=f.newItem()??new n.AreaBackgroundItem;f.push(w),this._filledAreas.set(S,f);const T=this._filledAreas.get(y)??new n.AreaBackgroundItemsGroup({type:0,color:y}),P=T.newItem()??new n.AreaBackgroundItem;T.push(P),this._filledAreas.set(y,T);const M=[],E=[],x=[],I=this._barsBorders.length();for(let e=0;e<I;e++){const t=this._closePoints.at(e),i=this._highPoints.at(e),s=this._lowPoints.at(e),o=this._barsBorders.at(e),r=o.center,n=(0,u.coordinateIsValid)(t),l=(0,u.coordinateIsValid)(i),a=(0,u.coordinateIsValid)(s);n&&l&&a&&(w.addPoints1Point(r,i),w.addPoints2Point(r,t),P.addPoints1Point(r,t),P.addPoints2Point(r,s),M.push({y:i,price:NaN,...o}),E.push({y:t,price:NaN,...o}),x.push({y:s,price:NaN,...o}))}const N=e.barSpacing();if(this._renderer.append(new n.AreaBackgroundRenderer({barSpacing:N,colorAreas:this._filledAreas})),g.lowLineVisible.value()&&this._renderer.append(new _.PaneRendererLine({barSpacing:N,items:x,simpleMode:!0,withMarkers:!1,lineColor:g.lowLineColor.value(),lineStyle:g.lowLineStyle.value(),lineWidth:g.lowLineWidth.value(),skipHoles:!0})),g.highLineVisible.value()&&this._renderer.append(new _.PaneRendererLine({barSpacing:N,items:M,simpleMode:!0,withMarkers:!1,lineColor:g.highLineColor.value(),lineStyle:g.highLineStyle.value(),lineWidth:g.highLineWidth.value(),skipHoles:!0})),
this._renderer.append(new _.PaneRendererLine({barSpacing:N,items:E,simpleMode:!0,withMarkers:!1,lineColor:g.closeLineColor.value(),lineStyle:g.closeLineStyle.value(),lineWidth:g.closeLineWidth.value(),skipHoles:!0})),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled){const t=this._selectionIndexer.indexes(),i=[],r=[],n=(0,o.ensureNotNull)(this._model.paneForSource(this._source)).height();for(let e=0;e<t.length;e++){const o=t[e],l=v.get(o);if(void 0===l)continue;const a=this._closePoints.at(l),c=this._barsBorders.at(l).center;i.push({point:new s.Point(c,a)}),r.push(this._model.backgroundColorAtYPercentFromTop(a/n))}this._renderer.append(new a.SelectionRenderer({bgColors:r,points:i,visible:!0,barSpacing:e.barSpacing(),hittestResult:d.HitTarget.Regular}))}else this._selectionIndexer.clear()}}},897088:(e,t,i)=>{"use strict";i.d(t,{SeriesHLCBarsPaneView:()=>a});var s=i(743099),o=i(383296),r=i(167380),n=i(776016);function l(e){return null!=e}class a extends n.SeriesBarsPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.properties().childs(),t={bars:this._bars,dontDrawOpen:!0,thinBars:e.hlcBarsStyle.childs().thinBars.value()},i=new s.CompositeRenderer;return i.append(new r.PaneRendererBars(t)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&i.append(new o.SelectionRenderer(this._selectionData)),i}_createItem(e,t,i){const s=t[2],o=t[3],r=t[4];if(!l(s)||!l(o)||!l(r))return null;return{center:NaN,open:NaN,high:s,low:o,close:r,color:i.barColor,left:NaN,right:NaN,timePointIndex:e}}}},832171:(e,t,i)=>{"use strict";i.d(t,{SeriesHollowCandlesPaneView:()=>a});var s=i(743099),o=i(289417),r=i(383296),n=i(238477),l=i(423263);class a extends l.SeriesCandlesPaneView{renderer(){this._invalidated&&(this._updateImpl(null),this._invalidated=!1);const e=this._source.priceScale();if(!e)return null;const t=this._source.properties().childs().hollowCandleStyle.childs(),i=this._model.timeScale().barSpacing(),l={bars:this._bars,barSpacing:i,bodyVisible:t.drawBody.value(),borderVisible:t.drawBorder.value(),borderColor:t.borderColor.value(),wickColor:t.wickColor.value(),barWidth:(0,o.optimalBarWidth)(i),wickVisible:t.drawWick.value(),isPriceScaleInverted:e.isInverted()},a=new s.CompositeRenderer;return a.append(new n.PaneRendererCandles(l)),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData&&a.append(new r.SelectionRenderer(this._selectionData)),a}}},743010:(e,t,i)=>{"use strict";i.d(t,{SeriesLinePaneView:()=>u});var s=i(578679),o=i(743099),r=i(938933),n=i(501849),l=i(383296),a=i(612610),c=i(487122);class u extends a.SeriesSingleLinePaneView{renderer(){this._invalidated&&(this._updateImpl(),this._invalidated=!1);const e=this._source.properties().childs(),t=e.style.value();let i,a=!1;2===t?i=e.lineStyle.childs():14===t?(i=e.lineWithMarkersStyle.childs(),a=!0):15===t?i=e.steplineStyle.childs():18===t&&(i=e.tpoStyle.childs())
;const u=this._model.timeScale().barSpacing(),h=i.colorType?.value()!==c.ColorType.Gradient?{type:c.ColorType.Solid,color:i.color.value()}:{type:c.ColorType.Gradient,startColor:i.gradientStartColor.value(),endColor:i.gradientEndColor.value()},d={barSpacing:u,items:this._items,lineColor:h,lineStyle:i.linestyle.value(),withMarkers:a,lineWidth:i.linewidth.value(),simpleMode:!0,hitTestResult:s.HitTarget.Regular,skipHoles:!0};let _,p;if(_=15===t?new n.PaneRendererStepLine(d):new r.PaneRendererLine(d),this._model.selection().isSelected(this._source)&&this._isMarkersEnabled&&this._selectionData){const e=new o.CompositeRenderer;e.append(_),e.append(new l.SelectionRenderer(this._selectionData)),p=e}else p=_;return p}}},378817:(e,t,i)=>{"use strict";i.d(t,{SeriesBarCandlesPaneView:()=>u,baseBarCandlesUpdater:()=>c});var s=i(610555),o=i(687037),r=i(771175),n=i(498374),l=i(578679);function a(e){return null!=e}function c(e,t){const i=e[1],s=e[2],o=e[3],r=e[4];return!!(a(i)&&a(s)&&a(o)&&a(r))&&(t.open=i,t.high=s,t.low=o,t.close=r,!0)}class u{constructor(e,t){this._bars=[],this._invalidated=!0,this._isMarkersEnabled=(0,o.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new r.SelectionIndexes(t.timeScale())}items(){return this._bars}update(){this._invalidated=!0}_updateImpl(e){const t=this._model.timeScale(),i=this._source.priceScale();if(this._bars=[],t.isEmpty()||!i||i.isEmpty())return;const o=t.visibleBarsStrictRange();if(null===o)return;if(0===this._source.bars().size())return;let r=this._source.nearestIndex(o.firstBar(),n.PlotRowSearchMode.NearestRight);const a=this._source.nearestIndex(o.lastBar(),n.PlotRowSearchMode.NearestLeft);if(void 0===r||void 0===a)return;for(;r<=a;r++){if(null!==this._source.bars().valueAt(r))break}if(r>a)return;const c=this._source.bars().range(r,a),u=this._source.barColorer(),h={};if(c.each(((t,i)=>{h.value=i;const s=u.firstColoredBar(t);let o;null!==s&&s>=t?this._source.setPrecomputedBarStyle(i,void 0):o=this._source.precomputedBarStyle(i),void 0===o&&(o=u.barStyle(t,!1,h),this._source.setPrecomputedBarStyle(i,o));const r=this._createItem(t,i,o,e);return!!r&&(h.previousValue=i,this._bars.push(r),!1)})),0===this._bars.length)return;const d=this._source.firstValue();if(null!==d)if(i.barPricesToCoordinates(this._bars,d),t.fillBarBorders(this._bars),this._model.selection().isSelected(this._source)){const e=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,hittestResult:l.HitTarget.Regular,barSpacing:t.barSpacing()};const o=this._model.paneForSource(this._source);if(!o)return;const r=o.height();for(let o=0;o<e.length;o++){const n=e[o],l=this._source.bars().valueAt(n);if(null===l)continue;const a=l[1],c=l[4];if(null==a||null==c)continue;const u=.5*(a+c),h=t.indexToCoordinate(n),_=i.priceToCoordinate(u,d);this._selectionData.points.push({point:new s.Point(h,_)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(_/r))}}else this._selectionIndexer.clear()}}},612610:(e,t,i)=>{
"use strict";i.d(t,{SeriesSingleLinePaneView:()=>h});var s=i(569708),o=i(610555),r=i(650151),n=i(687037),l=i(771175),a=i(498374),c=i(578679),u=i(615790);class h{constructor(e,t){this._items=[],this._invalidated=!0,this._isMarkersEnabled=(0,n.enabled)("source_selection_markers"),this._selectionData=null,this._source=e,this._model=t,this._selectionIndexer=new l.SelectionIndexes(t.timeScale())}update(){this._invalidated=!0}_updateImpl(){this._items=[];const e=this._model.timeScale(),t=this._source.priceScale();if(e.isEmpty()||!t||t.isEmpty())return;const i=e.visibleBarsStrictRange();if(null===i)return;if(0===this._source.bars().size())return;const n=this._source.nearestIndex(i.firstBar()-1,a.PlotRowSearchMode.NearestLeft)??i.firstBar()-1,l=this._source.nearestIndex(i.lastBar()+1,a.PlotRowSearchMode.NearestRight)??i.lastBar()+1,h=this._source.barFunction(),d=this._model.timeScale().barSpacing();if(d<.1&&this._source.supportsConflatedChunks()){const e=this._source.conflatedChunks(d,(0,r.ensureNotNull)(this._source.priceSource())),t=(0,u.lowerbound)(e,n,((e,t)=>e.startTime<t)),i=Math.min(e.length-1,(0,u.lowerbound)(e,l,((e,t)=>e.endTime<t)));for(let s=t;s<=i;s++){const t=e[s];[t.open,t.high,t.low,t.close].forEach((e=>{this._items.push({timePointIndex:t.startTime,price:e,y:NaN,left:NaN,center:NaN,right:NaN})}))}}else for(const{index:e,value:t}of this._source.bars().rangeIterator(n,l)){const i=h(t);(0,s.default)(i)&&this._items.push({timePointIndex:e,price:i,y:NaN,left:NaN,center:NaN,right:NaN})}const _=this._source.firstValue();if(null!==_)if(t.fillYCoordinates(this._items,_),e.fillBarBorders(this._items),this._model.selection().isSelected(this._source)){const i=this._selectionIndexer.indexes();this._selectionData={points:[],bgColors:[],visible:!0,barSpacing:e.barSpacing(),hittestResult:c.HitTarget.Regular};const s=(0,r.ensureNotNull)(this._model.paneForSource(this._source)).height();this._selectionData.hittestResult=c.HitTarget.Regular;for(let r=0;r<i.length;r++){const n=i[r],l=this._source.bars().valueAt(n);if(null===l)continue;const a=h(l),c=e.indexToCoordinate(n),u=t.priceToCoordinate(a,_);this._selectionData.points.push({point:new o.Point(c,u)}),this._selectionData.bgColors.push(this._model.backgroundColorAtYPercentFromTop(u/s))}}else this._selectionIndexer.clear();else this._items=[]}}},375644:(e,t,i)=>{"use strict";i.d(t,{SeriesTableViewValuesProvider:()=>l,fillSymbolSourceValuesProviderItemsVisibility:()=>n});var s=i(702077),o=i(104779),r=i(235666);function n(e,t,i,s){const n=12!==i,l=s.properties().childs().paneProperties.childs().legendProperties.childs(),a=12!==i&&16!==i&&21!==i,c=12!==i,u=(0,o.isPriceSourceStyle)(i),h=!u;e[5].visible=!1;const d=s.mainSeries().intervalObj().value().is1Tick();e[0].visible=h&&a&&!d,e[1].visible=h&&!d,e[2].visible=h&&!d,e[3].visible=h&&c,e[6].visible=l.showBarChange.value()&&n,e[4].visible=u,e[4].title=t?r.priceSourceTitles[t]:""}class l{constructor(e,t){this._model=t,this._series=e,this._valuesProvider=new s.SeriesValuesProvider(e,t,!1)}getItems(){
const e=this._valuesProvider.getItems(),t=this._series.style();n(e,this._series.priceSource(),t,this._model);const i=this._model.properties().childs().paneProperties.childs().legendProperties.childs();return e[8].visible=!1,e[7].visible=i.showVolume.value(),e}getValues(e){const t=this._series.bars().lastIndex();return null===t||t<e?null:this._valuesProvider.getValues(e)}}},702077:(e,t,i)=>{"use strict";i.d(t,{SeriesValuesProvider:()=>M,calculateColor:()=>T,changesData:()=>P});var s=i(650151),o=i(150335),r=i(724377),n=i(444372),l=i(638456),a=i(650369),c=i(680574),u=i(498374),h=i(313344),d=i(304642),_=i(333298);function p(e,t){return 100*(t-e)/Math.abs(e||1)}var m=i(277243),b=i(772717),v=i(634334),C=i(412158);const g=C.lastDayChangeAvailable||C.alwaysShowLastPriceAndLastDayChange,S=l.CheckMobile.any(),y=(0,d.getPercentageFormatter)(),f=(0,d.getVolumeFormatter)(2),w=`${v.notAvailable} (${v.notAvailable}%)`;function T(e,t){const i=(0,r.parseRgb)(t),s=(0,r.parseRgb)(e);return(0,r.distanceRgb)(i,s)<70?(0,r.rgbToHexString)((0,r.invertRgb)(i)):t}function P(e,t,i,s,o){let r,n;if(null!==t){const e=o[4],i=t.change||0;n={change:i,currentPrice:e,prevPrice:e-i,percentChange:t.change_percent||0}}const l=i[4],a=e.search(s-1,u.PlotRowSearchMode.NearestLeft,1),c=a?.value[4]??null;return null!==c&&null!=l&&(r={change:l-c,currentPrice:l,prevPrice:c,percentChange:p(c,l)}),{barChange:r,lastDayChange:n}}class M{constructor(e,t,s=!0){this._series=e,this._model=t,this._searchNearestLeftValue=s,this._emptyValues=[{title:n.t(null,void 0,i(16610)),visible:!1,value:"",index:0,orderIndex:0,id:"open"},{title:n.t(null,void 0,i(778254)),visible:!1,value:"",index:1,orderIndex:1,id:"high"},{title:n.t(null,void 0,i(165318)),visible:!1,value:"",index:2,orderIndex:2,id:"low"},{title:n.t(null,{context:"input"},i(51408)),visible:!1,value:"",index:3,orderIndex:3,id:"close"},{title:"",visible:!1,value:"",index:4,orderIndex:4,id:"source"},{title:"",visible:!1,value:"",index:5,orderIndex:5,id:"lastPrice"},{title:n.t(null,void 0,i(537276)),visible:!1,value:"",index:6,orderIndex:6,id:"change"},{title:n.t(null,{context:"study"},i(424261)),visible:!1,value:"",index:7,orderIndex:7,id:"volume"},{title:n.t(null,void 0,i(463815)),visible:!1,value:"",index:8,orderIndex:8,id:"lastDayChange"}]}getItems(){return this._emptyValues}getValues(e){const t=this._showLastPriceAndChangeOnly(),i=this._emptyValues.map(((e,i)=>({...e,value:6===i||8===i?w:v.notAvailable,visible:5!==i&&4!==i&&!t})));if(this._model.timeScale().isEmpty()||0===this._series.bars().size()||this._series.priceScale().isEmpty())return i;const r=(0,s.ensureNotNull)(this._series.data().bars().last());(0,o.isNumber)(e)||(e=r.index);const n=this._searchNearestLeftValue?u.PlotRowSearchMode.NearestLeft:u.PlotRowSearchMode.Exact,l=this._series.nearestIndex(e,n);if(void 0===l)return i;const h=this._series.data().valueAt(l),d=this._model.backgroundTopColor().value();if(null===h)return i;const _=h[1],p=h[2],b=h[3],C=h[4],{barChange:S,lastDayChange:M}=P(this._series.data(),this._series.quotes(),h,l,r.value),E=(0,
m.getPriceValueFormatterForSource)(this._series);if((0,m.shouldBeFormattedAsPercent)(this._series)||(0,m.shouldBeFormattedAsIndexedTo100)(this._series))i[6].value="",i[8].value="";else{const e=this._series.formatter(),t={signPositive:!0};if(void 0!==S){const{currentPrice:s,prevPrice:o,change:r,percentChange:n}=S,l=e.formatChange?.(s,o,t)??e.format(r,t);i[6].value=(0,c.forceLTRStr)(`${l} (${y.format(n,t)})`)}if(void 0!==M){const{currentPrice:s,prevPrice:o,change:r,percentChange:n}=M,l=e.formatChange?.(s,o,t)??e.format(r,t);i[8].value=(0,c.forceLTRStr)(`${l} (${y.format(n,t)})`)}}let x=null;if(t)i[5].value=null==C?v.notAvailable:E(C),i[5].visible=!0,x=this._getChangeColor(M?.change,r.index),i[6].visible=void 0!==S,i[8].visible=void 0!==M||g;else{i[0].value=null==_?v.notAvailable:E(_),i[1].value=null==p?v.notAvailable:E(p),i[2].value=null==b?v.notAvailable:E(b),i[3].value=null==C?v.notAvailable:E(C),i[4].value=E(this._series.barFunction()(h));const e=h[5];(0,o.isNumber)(e)?i[7].value=f.format(e):i[7].visible=!1;const t=this._series.intervalObj().value().is1Tick(),s=21!==this._series.style();i[0].visible=!t&&s,i[1].visible=!t,i[2].visible=!t,i[8].visible=void 0!==M||g,i[6].visible=void 0!==S;const r=this._series.barColorer().barStyle(l,!1);x=T(d,r.barBorderColor??r.barColor)}x=(0,a.resetTransparency)(T(d,x));for(const e of i)e.color||(e.color=x);return i[8].visible&&(i[8].color=(0,a.resetTransparency)(T(d,this._getChangeColor(M?.change,r.index)))),i}_mobileNonTrackingMode(){return S&&(null===this._model.crosshairSource().pane||(0,b.isLineToolName)(h.tool.value())||null!==this._model.lineBeingEdited())}_showLastPriceAndChangeOnly(){return C.alwaysShowLastPriceAndLastDayChange||this._mobileNonTrackingMode()}_getChangeColor(e,t){const i=this._series.style();if(2===i||15===i||14===i)return this._series.barColorer().barStyle(t,!1).barColor;const s=void 0===e||e>=0?_.SeriesBarColorer.upColor(this._series.properties()):_.SeriesBarColorer.downColor(this._series.properties());return s.barBorderColor??s.barColor}}},728032:(e,t,i)=>{"use strict";i.d(t,{StudyWithSummaryDataSource:()=>o});var s=i(543961);class o extends s.PriceDataSource{constructor(e,t){super(e,t)}barColorer(){return null}formatter(e){return this._model.mainSeries().formatter(e)}sessionId(){return this._model.mainSeries().sessionId()}sessionIdChanged(){return this._model.mainSeries().sessionIdChanged()}currency(){return this._model.mainSeries().currency()}unit(){return this._model.mainSeries().unit()}onStatusChanged(){return this._model.mainSeries().onStatusChanged()}symbolSource(){return this._model.mainSeries().symbolSource()}barsProvider(){return this._model.mainSeries().barsProvider()}valuesProvider(){return this._model.mainSeries().valuesProvider()}legendValuesProvider(){return this._model.mainSeries().legendValuesProvider()}statusProvider(e){return this._model.mainSeries().statusProvider(e)}paneViews(e){return this._model.mainSeries().paneViews(e)}updateAllViews(e){this._model.mainSeries().updateAllViews(e)}widgetSideAreaViews(e){
return this._model.mainSeries().widgetSideAreaViews?.(e)??null}properties(){return this._model.mainSeries().properties()}hasStateForAlert(){return!1}allowsMovingBetweenPanes(){return!1}isUserDeletable(){return!1}canBeHidden(){return!1}isDraggable(){return!1}symbolSourceWV(){return this._model.mainSeries().symbolSourceWV()}}},714129:(e,t,i)=>{"use strict";i.d(t,{constants:()=>n,darkColors:()=>o,lightColors:()=>r});var s=i(553407);const o={textColor:s.colors.colorColdGray200,hoveredRowColor:"#B2B5BE33"},r={textColor:s.colors.colorColdGray900,hoveredRowColor:"#5D606B26"},n={cellHeight:20,horzCellMinMargin:4,minAllowedFontSize:8,maxAllowedFontSize:12,fontSizeCoeff:.6,horzCellMarginsCoeff:.1,maxSymbols:40,legendLeftPadding:9,legendFontSize:13}},941878:(e,t,i)=>{"use strict";i.d(t,{TpoSummaryDataSource:()=>r,tpoSummaryDataSourceId:()=>o});var s=i(728032);const o="_seriesTpoSummaryId";class r extends s.StudyWithSummaryDataSource{constructor(e){super(e,o)}name(){return"TPO Summary"}state(){return{id:this.id(),type:"TpoSummaryDataSource",zorder:this.zorder()}}contextMenuStatName(){return"TpoSummaryContextMenu"}}},918725:(e,t,i)=>{"use strict";i.d(t,{VolumeFootprintSummaryDataSource:()=>n,volumeFootpringSummaryDataSourceId:()=>r});var s=i(519073),o=i(728032);const r="_seriesVolumeFootprintSummaryId";class n extends o.StudyWithSummaryDataSource{constructor(e){super(e,r)}openInterestSupported(){const e=this._model.mainSeries().symbolInfo();return null!==e&&(0,s.isFutures)(e.type)&&!(0,s.hasCryptoTypespec)(e.typespecs)}extendedOpenInterestSupported(){const e=this._model.mainSeries().symbolInfo();return null!==e&&((0,s.isFutures)(e.type)||"swap"===e.type)&&(0,s.hasCryptoTypespec)(e.typespecs)}name(){return"Volume Footprint Summary"}state(){return{id:this.id(),type:"VolumeFootprintSummaryDataSource",zorder:this.zorder()}}contextMenuStatName(){return"VolumeFootprintSummaryContextMenu"}}},582143:(e,t,i)=>{"use strict";i.d(t,{generateColorCached:()=>n});var s=i(259332),o=i(650369),r=i(169958);function n(e=1e3){const t=s.default.Cache;s.default.Cache=r.CircularCacheBuffer.bind(r.CircularCacheBuffer,e);const i=(0,s.default)(o.generateColor,((e,t,i)=>`${e}_${t}_${i}`));return s.default.Cache=t,i}},348730:(e,t,i)=>{"use strict";function s(e,t,i,s){return`${s?s+" ":""}${i?i+" ":""}${e}px ${t}`}i.d(t,{makeFont:()=>s,parseFont:()=>r});const o=/(bold )?(italic )?(\d+)(px|pt) (.*)$/;function r(e){const t=o.exec(e);return null===t?null:{family:t[5],size:parseInt(t[3])*("pt"===t[4]?.75:1),bold:Boolean(t[1]),italic:Boolean(t[2])}}},315507:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.57 5.5h-.07a3.5 3.5 0 1 0 .07 7A4.98 4.98 0 0 1 4 9a5 5 0 0 1 8.57-3.5z"/></svg>'},85290:e=>{
e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" width="18" height="18"><path fill="currentColor" d="M12.22 11.78A3.47 3.47 0 0 0 9 6.98a3.48 3.48 0 0 0-3.22 4.8 6.97 6.97 0 0 1 6.44 0zM4.18 9.83L2.1 9.28l.33-1.24 2.07.55-.33 1.24zM6.38 6.36l-.9-1.94 1.16-.54.9 1.94-1.16.54zM10.46 5.82l.9-1.94 1.16.54-.9 1.94-1.16-.54zM13.49 8.6l2.07-.56.33 1.24-2.07.55-.33-1.24z"/></svg>'}}]);