"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[2147],{793750:(e,t,i)=>{i.d(t,{lastMouseOrTouchEventInfo:()=>o,setLastMouseOrTouchEventInfo:()=>a});let r=(0,i(638456).supportTouch)()?{isTouch:!0,stylus:!1}:{isTouch:!1};function o(){return r}function a(e){r=e.isTouch?{isTouch:!0,stylus:e.stylus}:{isTouch:!1}}},294721:(e,t,i)=>{i.d(t,{DefaultProperty:()=>E,allowSavingDefaults:()=>I,cleanUpStateKeys:()=>M,createDefaultsState:()=>x,extractAllPropertiesKeys:()=>k,extractState:()=>V,extractThemedColors:()=>L});var r=i(154834),o=i(998034),a=i(936714),s=i(954029),n=i(219780),l=i(111832),u=i(650279),d=i(715943),c=i(182433),h=i(283873),f=i(650151),m=i(724377),p=i(735566),y=i(549904),v=i(61499),g=i(909740),_=i(308721),b=i(251924),w=i(113640),P=i(453287),D=i(751610);const T=(0,p.getLogger)("ThemedDefaults");function S(e){return e.value()===v.StdTheme.Dark?v.StdTheme.Dark:v.StdTheme.Light}function M(e,t,i){for(const r of t)if((0,a.default)(e,r),i){const t=r.split(".");for(t.pop();t.length;){const i=(0,s.default)(e,t);if(!(0,c.default)(i)||0!==Object.keys(i).length)break;(0,a.default)(e,t),t.pop()}}}function x(e,t,i,a){const s=e?P.defaults:P.factoryDefaults,n=t.startsWith("study_")?(0,r.default)(s("study")):{};let l=(0,r.default)(s(t,a));return t.startsWith("study_")&&l.inputs&&delete l.inputs.symbol,"linetoolicon"===t&&e&&(l.icon=(0,P.defaults)(t).icon),"linetooemoji"===t&&e&&(l.emoji=(0,P.defaults)(t).emoji),"linetoolsticker"===t&&e&&(l.sticker=(0,P.defaults)(t).sticker),l=(0,r.default)(l),M(l,i),(0,o.default)(n,l),n}let C=!1;function I(e){C=e}function k(e){const t=Object.keys(e),i=[];return t.forEach((t=>{const r=e[t];if((0,c.default)(r)){k(r).forEach((e=>i.push(`${t}.${e}`)))}else i.push(t)})),i}function R(e,t,i=""){if(1===t.length&&"*"===t[0])return e;const r={};for(const o of t){const a=o.split("."),s=a[0],n=e[s],l=""===i?s:`${i}.${s}`;if(e.hasOwnProperty(s))if(a.length>1){if(!(0,c.default)(n)){T.logError(`path ${l} must be an object, but it is a primitive`);continue}{const e=t.filter((e=>e.startsWith(`${s}.`))).map((e=>e.split(".").slice(1).join(".")));r[s]=R(n,e,l)}}else{if((0,c.default)(n)){T.logError(`path ${l} must be a primitive, but it is an object`);continue}r[s]=n}}return r}function V(e,t,i){if(!e)return{};let r=e;return t&&(r=R(e,t)),i&&M(r,i,!0),r}function L(e,t){const i=k(e),r=[];for(const o of i){const i=(0,s.default)(e,o),a=(0,s.default)(t,o);(0,f.assert)(void 0!==i,`Light theme value for ${o} is undefined`),(0,f.assert)(void 0!==a,`Dark theme value for ${o} is undefined`),r.push({path:o,colors:[i,a]})}return r}function A(e,t){e.includes(t)||e.push(t)}function K(e,t){const i=e.indexOf(t);-1!==i&&e.splice(i,1)}function N(e,t){const i=(0,l.default)(e,((e,i,r)=>{if(void 0===t[r])return e;if(!(0,u.default)(i,t[r]))if((0,c.default)(i)&&(0,c.default)(t[r])){const o=N(i,t[r]);void 0!==o&&(e[r]=o)}else e[r]=i;return e}),{});return(0,d.default)(i)?void 0:i}function F(e){return e===v.StdTheme.Dark?1:0}function O(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(!(0,
h.default)(e)||!(0,h.default)(t))return!1;const i=(0,m.tryParseRgba)(e),r=(0,m.tryParseRgba)(t);return!(!i||!r)&&!!(0,y.colorsAreCloseEnough)(e,t)}class E extends D.Property{constructor(e){const{defaultName:t,nonThemedDefaultsKeys:i,themedDefaultsKeys:r,excludedDefaultsKeys:a=[],themedColors:s,replaceThemedColorsOnThemeChange:n=!1,allStateKeys:l,excludedStateKeys:u=[],excludedTemplateKeys:d=[],state:c,useUserPreferences:h=!0,saveNonDefaultUserPreferencesOnly:m=!1,ignoreAllowSavingDefaults:p=!1,alwaysSaveDefaultKeys:y=["version"],saveDefaultsConsumer:D=P.saveDefaults,factoryDefaultsSupplier:T=()=>x(!1,t,[],null),schema:M=(0,w.createPropertySchema)(T()),theme:C=g.watchedTheme.spawnOwnership()}=e;super(void 0,M),this._themedColors=[],this._restoreFactoryDefaultsEvent=new b.Delegate,this._replaceThemedColorsOnThemeChange=!1,this._forbidSavingDefaults=!1,this._defaultName=t,this._useUserPreferences=h,this._saveNonDefaultUserPreferencesOnly=m,this._ignoreAllowSavingDefaults=p,this._saveDefaultsConsumer=D,this._factoryDefaultsSupplier=T,this._allStateKeys=l,this._excludedStateKeys=u,this._nonThemedDefaultsKeys=i,this._themedDefaultsKeys=r,this._allDefaultsKeys=i||r?[...i??[],...r??[]]:void 0,this._excludedDefaultsKeys=a,this._excludedTemplateKeys=d,this._themedColors=s,this._alwaysSaveDefaultKeys=y,(0,f.assert)(void 0===this._allDefaultsKeys||0===this._excludedDefaultsKeys.length,"Defaults keys and excluded defaults keys cannot be used at the same time"),(0,f.assert)(void 0===this._allStateKeys||0===this._excludedStateKeys.length,"State keys and excluded state keys cannot be used at the same time"),this._theme=C;const I=S(this._theme);this.merge((0,o.default)(this._factoryDefaultsForTheme((0,_.isStdThemeName)(I)?I:v.StdTheme.Light),this._userSettings(),V(c,l,u))),s&&n&&this.setThemedColors(s),this._restoreFactoryDefaultsEvent=new b.Delegate}destroy(){this._theme?.release(),this._unsubscribeWatchedTheme?.(),super.destroy()}applyTemplate(e,t){this.mergeAndFire(V((0,o.default)((0,r.default)(t),e),this._allStateKeys,this._excludedTemplateKeys))}preferences(){return V(this.state(this._excludedDefaultsKeys),this._allDefaultsKeys)}template(){return V(this.state(void 0,4),void 0,this._excludedTemplateKeys)}mergePreferences(e){this.mergeAndFire(V(e,this._allDefaultsKeys,this._excludedDefaultsKeys))}addExcludedKey(e,t){1&t&&A(this._excludedDefaultsKeys,e),2&t&&A(this._excludedStateKeys,e),4&t&&A(this._excludedTemplateKeys,e)}removeExcludedKey(e,t){1&t&&K(this._excludedDefaultsKeys,e),2&t&&K(this._excludedStateKeys,e)}restoreFactoryDefaults(){const e=this.factoryDefaults();M(e,this._excludedDefaultsKeys),this.mergeAndFire(e),this._defaultName.startsWith("study_")&&!this._defaultName.startsWith("study_VbPFixed")||this._saveDefaultsConsumer(this._defaultName),this._restoreFactoryDefaultsEvent.fire()}onRestoreFactoryDefaults(){return this._restoreFactoryDefaultsEvent}saveDefaults(){if(!this._useUserPreferences||this._forbidSavingDefaults)return;let e;if(this._saveNonDefaultUserPreferencesOnly){
const t=this.state(this._excludedDefaultsKeys),i=this.factoryDefaults();if(e=N(V(t,this._nonThemedDefaultsKeys),V(i,this._nonThemedDefaultsKeys,this._excludedDefaultsKeys)),this._alwaysSaveDefaultKeys.length){const i=V(t,this._alwaysSaveDefaultKeys);e=e??{},(0,o.default)(e,i)}const r=this.themeDefaults(S(this._theme)),a=this.themeState(),s=N(a,r);(0,d.default)(s)||(e=e??{},(0,o.default)(e,a))}else e=this.preferences();this._saveDefaultsConsumer(this._defaultName,e)}themeDefaults(e){if(this._themedColors)return function(e,t){const i={};for(const{path:r,colors:o}of e)(0,n.default)(i,r,o[F(t)]);return i}(this._themedColors,e===v.StdTheme.Dark?v.StdTheme.Dark:v.StdTheme.Light);return V(this._factoryDefaultsSupplier(),this._themedDefaultsKeys,this._excludedDefaultsKeys)}factoryDefaults(){return this._factoryDefaultsForTheme(S(this._theme))}themeState(){const e=super.state(this._excludedDefaultsKeys),t=this._themedColors;return V(e,t?t.map((e=>e.path)):this._themedDefaultsKeys)}allThemePropertiesAreDefault(e){(0,f.assert)(!!this._themedColors,"This method should not be called if themed colors are not set");return function(e,t,i=[]){for(const r of i){const i=r.path;if(!O((0,s.default)(e,i),(0,s.default)(t,i)))return!1}return!0}(this.themeState(),this.themeDefaults(e),this._themedColors)}clone(e){return new E(this._options())}setThemedColors(e){if(this._themedColors=e,void 0===this._unsubscribeWatchedTheme){const e=()=>{this._updateThemedColors(!1)};this._theme.subscribe(e),this._unsubscribeWatchedTheme=()=>this._theme.unsubscribe(e)}this._updateThemedColors(!0)}applyDefaultThemedProperties(e){this._themedColors&&this.mergeAndFire(this.themeDefaults(e))}state(e,t){return V(super.state([...this._excludedStateKeys,...e??[]],t),this._allStateKeys)}_updateThemedColors(e){if(!this._themedColors)return;const t=S(this._theme),i=t===v.StdTheme.Light?v.StdTheme.Dark:v.StdTheme.Light;for(const r of this._themedColors){const o=(0,f.ensureDefined)(this.childByPath(r.path)),a=r.colors[F(i)];(""===o.value()||!e&&O(o.value(),a))&&o.setValue(r.colors[F(t)])}}_userSettings(){if(!this._useUserPreferences)return;const e=x(!0,this._defaultName,[],null);if(!e)return;return V((0,w.extractStateWithSchema)(e,this._schema,1),this._allDefaultsKeys,this._excludedDefaultsKeys)}_options(){return{defaultName:this._defaultName,factoryDefaultsSupplier:this._factoryDefaultsSupplier,state:this.state(),nonThemedDefaultsKeys:this._nonThemedDefaultsKeys,themedDefaultsKeys:this._themedDefaultsKeys,excludedDefaultsKeys:this._excludedDefaultsKeys,themedColors:this._themedColors,replaceThemedColorsOnThemeChange:this._replaceThemedColorsOnThemeChange,allStateKeys:this._allStateKeys,excludedStateKeys:this._excludedDefaultsKeys,excludedTemplateKeys:this._excludedTemplateKeys,useUserPreferences:this._useUserPreferences,saveNonDefaultUserPreferencesOnly:this._saveNonDefaultUserPreferencesOnly,ignoreAllowSavingDefaults:this._ignoreAllowSavingDefaults,saveDefaultsConsumer:this._saveDefaultsConsumer,alwaysSaveDefaultKeys:this._alwaysSaveDefaultKeys,
theme:this._theme.spawnOwnership()}}_childChanged(e,t){super._childChanged(e,t),this._propertyAffectsDefaults(t)&&this.saveDefaults()}_fireMergeAndFireChangedProps(e){this._forbidSavingDefaults=!0,super._fireMergeAndFireChangedProps(e),this._forbidSavingDefaults=!1,e.some((e=>this._propertyAffectsDefaults(e.pathToRootProperty())))&&this.saveDefaults()}_factoryDefaultsForTheme(e){return(0,o.default)(this._factoryDefaultsSupplier(),this.themeDefaults(e))}_propertyAffectsDefaults(e){return(this._ignoreAllowSavingDefaults||C)&&!this._defaultName.startsWith("replayStudyStrategy")&&(!this._defaultName.startsWith("study_")||this._defaultName.startsWith("study_VbPFixed"))&&(this._allDefaultsKeys&&this._allDefaultsKeys.includes(e)||!this._allDefaultsKeys&&!this._excludedDefaultsKeys?.includes(e))&&(0,D.isPrimitiveType)(this.childByPath(e)?.value())}}},313344:(e,t,i)=>{i.r(t),i.d(t,{SelectPointMode:()=>r,activePointSelectionMode:()=>J,alignTo45Degrees:()=>xe,barTimesUnderCursor:()=>X,beenSetLineToolLastPoint:()=>O,cancelLineTool:()=>oe,cancelledLineTool:()=>F,changeLineStyle:()=>me,changeLineTool:()=>de,changedLineStyle:()=>G,changedLineTool:()=>z,continueLineTool:()=>re,continuedLineTool:()=>N,copiedLineTool:()=>U,copyLineTool:()=>pe,createLineTool:()=>ie,createdLineTool:()=>K,crosshairLock:()=>S,cursorTool:()=>k,drawOnAllCharts:()=>Ce,drawOnAllChartsMode:()=>Ie,emojiTool:()=>C,finishChangingLineTool:()=>ce,finishLineTool:()=>fe,finishMovingLineTool:()=>le,finishedChangingLineTool:()=>j,finishedLineTool:()=>$,finishedMovingLineTool:()=>H,hideAllDrawings:()=>De,hideAllIndicators:()=>Te,hideMarksOnBars:()=>Me,iconTool:()=>x,init:()=>be,isDirectionalMovementActive:()=>A,isStudyEditingNow:()=>Q,isToolCreatingNow:()=>R,isToolEditingNow:()=>V,isToolMovingNow:()=>L,lockDrawings:()=>Se,moveLineTool:()=>ne,movedLineTool:()=>B,properties:()=>Pe,removeLineTool:()=>he,removedLineTool:()=>q,resetToCursor:()=>g,restoreLineTool:()=>ye,restoreLineToolState:()=>ve,restoredLineTool:()=>Z,restoredLineToolState:()=>Y,runOnDrawingStateReady:()=>we,setLineToolLastPoint:()=>ae,startChangingLineTool:()=>ue,startMovingLineTool:()=>se,startedChangingLineTool:()=>W,startedMovingLineTool:()=>E,stickerTool:()=>I,tool:()=>M,toolIsCursor:()=>m,toolIsDemonstration:()=>y,toolIsEraser:()=>p,toolIsMeasure:()=>v});var r,o=i(650151),a=i(673378),s=i(294721),n=i(77294),l=i(817585),u=i(251924),d=i(62802),c=i(251954),h=i(345848);!function(e){e[e.None=0]="None",e[e.Replay=1]="Replay",e[e.Study=2]="Study"}(r||(r={}));const f=new Set(["cursor","arrow","dot","performance","demonstration"]);function m(e){return f.has(e)}function p(e){return"eraser"===e}function y(e){return"demonstration"===e}function v(e){return"measure"===e}function g(e=!1){if(!e&&_){if(_.childs().stayInDrawingMode.value())return}M.setValue(k.value())}let _=null,b=null,w=null,P=null,D=null,T=null
;const S=new l.WatchedObject(null),M=new n.WatchedValue,x=new n.WatchedValue,C=new n.WatchedValue,I=new n.WatchedValue,k=new n.WatchedValue,R=new n.WatchedValue(!1),V=new n.WatchedValue(!1),L=new n.WatchedValue(!1),A=new n.WatchedValue(!1),K=new u.Delegate,N=new u.Delegate,F=new u.Delegate,O=new u.Delegate,E=new u.Delegate,B=new u.Delegate,H=new u.Delegate,W=new u.Delegate,z=new u.Delegate,j=new u.Delegate,q=new u.Delegate,$=new u.Delegate,G=new u.Delegate,U=new u.Delegate,Z=new u.Delegate,Y=new u.Delegate,J=new n.WatchedValue(r.None),Q=new n.WatchedValue(!1),X=new Map;function ee(e,t){const i=t||{value:!1};return t=>{i.value||(i.value=!0,e.fire(t),i.value=!1)}}const te={value:!1},ie=ee(K,te),re=ee(N,te),oe=ee(F,te),ae=ee(O,te),se=ee(E),ne=ee(B),le=ee(H),ue=ee(W),de=ee(z),ce=ee(j),he=ee(q),fe=ee($),me=ee(G,te),pe=ee(U,te),ye=ee(Z),ve=ee(Y);let ge=!1,_e=[];function be(){if(ge)return;const e=d.getValue("chart.cursorPreference","cursor");M.setValue(m(e)?e:"cursor"),M.subscribe((e=>{m(e)?k.setValue(e):p(e)&&(0,h.trackEvent)("Chart cursors",e)}),{callWithLast:!0}),k.subscribe((e=>{(0,h.trackEvent)("Chart cursors",e),e&&"performance"!==e&&!y(e)&&d.setValue("chart.cursorPreference",e)})),_=new s.DefaultProperty({defaultName:"drawings"}),b=(0,a.createPrimitiveProperty)(!1),w=(0,a.createPrimitiveProperty)(!1),P=(0,a.createPrimitiveProperty)(!1),D=(0,a.createPrimitiveProperty)(!d.getBool("BarsMarksContainer.visibile",!0)),T=(0,a.createPrimitiveProperty)(!1),M.subscribe((e=>{(0,c.emit)("onSelectedLineToolChanged")})),ge=!0,_e.forEach((e=>e())),_e=[]}function we(e){ge?e():_e.push(e)}function Pe(){return(0,o.ensureNotNull)(_)}function De(){return(0,o.ensureNotNull)(b)}function Te(){return(0,o.ensureNotNull)(w)}function Se(){return(0,o.ensureNotNull)(P)}function Me(){return(0,o.ensureNotNull)(D)}function xe(){return(0,o.ensureNotNull)(T)}function Ce(){return Pe().childs().drawOnAllCharts}function Ie(){return Pe().childs().drawOnAllChartsMode}},578679:(e,t,i)=>{i.d(t,{AreaName:()=>r,HitTarget:()=>o,HitTestResult:()=>d,hitTestResultDataAreEqual:()=>u,shouldDefaultActionBeExecuted:()=>l,tryCallHandler:()=>n});var r,o,a=i(650279),s=i(650151);function n(e,t,i,r){if(e.isTouch){if(void 0!==r)return r(e,t),!0}else if(void 0!==i)return i(e,t),!0;return!1}function l(e,t,i,r){return void 0!==t.executeDefaultAction&&(e.isTouch?Boolean(t.executeDefaultAction[r]):Boolean(t.executeDefaultAction[i]))}function u(e,t){return e&&t&&e.equals&&t.equals?e.equals(t):(0,a.default)(e,t)}!function(e){e.Style="Style",e.Text="Text",e.Line="Line",e.Tooltip="Tooltip",e.Button="Button",e.SourceItemMove="SourceItemMove",e.AnchorPoint="AnchorPoint"}(r||(r={})),function(e){e[e.MovePointBackground=1]="MovePointBackground",e[e.Regular=2]="Regular",e[e.MovePoint=3]="MovePoint",e[e.ChangePoint=4]="ChangePoint",e[e.Custom=5]="Custom"}(o||(o={}));class d{constructor(e,t,i){this._target=e,this._data=t||null,this._eraseMarker=i}target(){return this._target}data(){return this._data}mergeData(e){this._data={...(0,s.ensureNotNull)(this._data),...e}}hasPressedMoveHandler(e){
return null!==this._data&&function(e,t,i){if(e.isTouch){if(void 0!==i)return!0}else if(void 0!==t)return!0;return!1}(e,this._data.pressedMouseMoveHandler,this._data.touchMoveHandler)}tryCallMouseDownOrTouchStartHandler(e,t){return null!==this._data&&n(e,t,this._data.mouseDownHandler,this._data.touchStartHandler)}tryCallMouseUpOrTouchEndHandler(e,t){return null!==this._data&&n(e,t,this._data.mouseUpHandler,this._data.touchEndHandler)}tryCallMouseEnterHandler(e,t){return null!==this._data&&n(e,t,this._data.mouseEnterHandler)}tryCallMouseLeaveHandler(e,t){return null!==this._data&&n(e,t,this._data.mouseLeaveHandler)}tryCallMouseMoveHandler(e,t){return null!==this._data&&n(e,t,this._data.mouseMoveHandler)}tryCallClickOrTapHandler(e,t){return null!==this._data&&n(e,t,this._data.clickHandler,this._data.tapHandler)}tryCallDblClickOrDblTapHandler(e,t){return null!==this._data&&n(e,t,this._data.doubleClickHandler,this._data.doubleTapHandler)}tryCallContextMenuHandler(e,t){return null!==this._data&&n(e,t,this._data.contextMenuHandler,this._data.touchContextMenuHandler)}eraseMarker(){return this._eraseMarker}}},841528:(e,t,i)=>{i.d(t,{intervalsVisibilitiesDefaults:()=>r});const r={ticks:!0,seconds:!0,secondsFrom:1,secondsTo:59,minutes:!0,minutesFrom:1,minutesTo:59,hours:!0,hoursFrom:1,hoursTo:24,days:!0,daysFrom:1,daysTo:366,weeks:!0,weeksFrom:1,weeksTo:52,months:!0,monthsFrom:1,monthsTo:12,ranges:!0}},61689:(e,t,i)=>{i.d(t,{IntervalsVisibilitiesProperty:()=>a});var r=i(751610),o=i(507083);class a extends r.Property{state(e,t){return(0,o.nonDefaultIntervalsVisibilities)(super.state(e,t))??void 0}storeStateIfUndefined(){return!1}}},507083:(e,t,i)=>{i.d(t,{getIntervalsVisibilitiesForMode:()=>f,isActualInterval:()=>d,makeIntervalsVisibilitiesVisibleAtInterval:()=>l,mergeIntervalVisibilitiesDefaults:()=>h,nonDefaultIntervalsVisibilities:()=>c});var r=i(998034),o=i(154834),a=i(650151),s=i(666310),n=i(841528);function l(e,t){let i=t.multiplier();if(t.isTicks()&&(e.ticks=!0),t.isSeconds()&&(i<60?(e.seconds=!0,e.secondsFrom=Math.min(e.secondsFrom,i),e.secondsTo=Math.max(e.secondsTo,i)):(i=Math.floor(i/60),t=new s.Interval(s.ResolutionKind.Minutes,i))),t.isMinutes())if(i<60)e.minutes=!0,e.minutesFrom=Math.min(e.minutesFrom,i),e.minutesTo=Math.max(e.minutesTo,i);else{const t=Math.floor(i/60);e.hours=!0,e.hoursFrom=Math.min(e.hoursFrom,t),e.hoursTo=Math.max(e.hoursTo,t)}t.isDays()&&(e.days=!0,e.daysFrom=Math.min(e.daysFrom,i),e.daysTo=Math.max(e.daysTo,i)),t.isWeeks()&&(e.weeks=!0,e.weeksFrom=Math.min(e.weeksFrom,i),e.weeksTo=Math.max(e.weeksTo,i)),t.isMonths()&&(e.months=!0,e.monthsFrom=Math.min(e.monthsFrom,i),e.monthsTo=Math.max(e.monthsTo,i)),t.isRange()&&(e.ranges=!0)}function u(e,t,i,r){return e&&r>=t&&r<=i}function d(e,t){const i=t.childs();switch(e.kind()){case s.ResolutionKind.Ticks:return i.ticks.value();case s.ResolutionKind.Seconds:if(e.multiplier()<60)return u(i.seconds.value(),i.secondsFrom.value(),i.secondsTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60)
;return u(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),t)}case s.ResolutionKind.Minutes:if(e.multiplier()<60)return u(i.minutes.value(),i.minutesFrom.value(),i.minutesTo.value(),e.multiplier());{const t=Math.floor(e.multiplier()/60);return u(i.hours.value(),i.hoursFrom.value(),i.hoursTo.value(),t)}case s.ResolutionKind.Days:return u(i.days.value(),i.daysFrom.value(),i.daysTo.value(),e.multiplier());case s.ResolutionKind.Weeks:return u(i.weeks.value(),i.weeksFrom.value(),i.weeksTo.value(),e.multiplier());case s.ResolutionKind.Months:return u(i.months.value(),i.monthsFrom.value(),i.monthsTo.value(),e.multiplier());case s.ResolutionKind.Range:return i.ranges.value()}return(0,a.assert)(!1,`Unsupported resolution: ${e.value()}`),!1}function c(e){const t=Object.keys(e).filter((t=>n.intervalsVisibilitiesDefaults[t]!==e[t]));return 0===t.length?null:t.reduce(((t,i)=>(t[i]=e[i],t)),{})}function h(e){return(0,r.default)((0,o.default)(n.intervalsVisibilitiesDefaults),e??{})}function f(e,t){if(0===t||e.isTicks()&&3===t||e.isRange()&&2===t)return h();let i=!1;const r={ticks:!1,seconds:!1,minutes:!1,hours:!1,days:!1,weeks:!1,months:!1,ranges:!1},o=e=>e.multiplier();return[{checker:e=>e.isTicks(),getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.ticks=!0}},{checker:e=>e.isSeconds()&&e.multiplier()<60,getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.seconds=!0,r.secondsFrom=e,r.secondsTo=t}},{checker:e=>e.isSeconds()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{r.minutes=!0,r.minutesFrom=e,r.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()<60,getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.minutes=!0,r.minutesFrom=e,r.minutesTo=t}},{checker:e=>e.isMinutes()&&e.multiplier()>=60,getIntervalMultiplier:e=>Math.floor(e.multiplier()/60),markIntervalAsVisible:(e,t)=>{r.hours=!0,r.hoursFrom=e,r.hoursTo=t}},{checker:e=>e.isDays(),getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.days=!0,r.daysFrom=e,r.daysTo=t}},{checker:e=>e.isWeeks(),getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.weeks=!0,r.weeksFrom=e,r.weeksTo=t}},{checker:e=>e.isMonths(),getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.months=!0,r.monthsFrom=e,r.monthsTo=t}},{checker:e=>e.isRange(),getIntervalMultiplier:o,markIntervalAsVisible:(e,t)=>{r.ranges=!0}}].forEach((r=>{if(r.checker(e)){i=!0;const o=r.getIntervalMultiplier(e);1===t?r.markIntervalAsVisible(o,o):3===t?r.markIntervalAsVisible(o,void 0):r.markIntervalAsVisible(void 0,o)}else(!i&&2===t||i&&3===t)&&r.markIntervalAsVisible(void 0,void 0)})),h(r)}},830842:(e,t,i)=>{i.d(t,{crosshairMoveEvent:()=>m,globalChangeEvent:()=>s,hoverChangeEvent:()=>h,selectionChangeEvent:()=>d,sourceChangeEvent:()=>o,viewportChangeEvent:()=>l});var r=i(283873);function o(e){return(0,r.default)(e)?{type:"data-source-change",sourceId:e}:{type:"data-source-change",...e}}const a={type:"global-change"};function s(){return a}const n={type:"viewport-change"};function l(e){return e?{type:"viewport-change",pane:e}:n}const u={
type:"selection-change"};function d(){return u}const c={type:"hover-change"};function h(){return c}const f={type:"crosshair-move"};function m(){return f}},850699:(e,t,i)=>{i.r(t),i.d(t,{addHorizontalLineToPath:()=>c,addLineToPath:()=>S,addPixelPerfectLineToPath:()=>x,addVerticalLineToPath:()=>f,clearRectWithGradient:()=>u,clipPolygonByEdge:()=>I,computeDashPattern:()=>T,createCircle:()=>w,drawHorizontalLine:()=>h,drawLine:()=>M,drawPixelPerfectLine:()=>C,drawPoly:()=>P,drawRoundRect:()=>v,drawRoundRectWithInnerBorder:()=>g,drawVerticalLine:()=>m,fillRectInnerBorder:()=>d,fillRectWithBorder:()=>b,scaleDrawRoundRectRadii:()=>p,scalePath2D:()=>k,scaledDashPattern:()=>_,setLineStyle:()=>D});var r=i(610555),o=i(648892),a=i(981182),s=i(250468),n=i(436465),l=i(260670);function u(e,t,i,r,o,a,s){e.save(),e.globalCompositeOperation="copy";const n=e.createLinearGradient(0,0,0,o);n.addColorStop(0,a),n.addColorStop(1,s),e.fillStyle=n,e.fillRect(t,i,r,o),e.restore()}function d(e,t,i,r,o,a){e.fillRect(t+a,i,r-2*a,a),e.fillRect(t+a,i+o-a,r-2*a,a),e.fillRect(t,i,a,o),e.fillRect(t+r-a,i,a,o)}function c(e,t,i,r){const o=e.lineWidth%2?.5:0;e.moveTo(i,t+o),e.lineTo(r,t+o)}function h(e,t,i,r){e.beginPath(),c(e,t,i,r),e.stroke()}function f(e,t,i,r){const o=e.lineWidth%2?.5:0;e.moveTo(t+o,i),e.lineTo(t+o,r)}function m(e,t,i,r){e.beginPath(),f(e,t,i,r),e.stroke()}function p(e,t){return Array.isArray(e)?e.map((e=>Math.round(e*t))):Math.round(e*t)}function y(e,t){return Array.isArray(e)?e.map((e=>0===e?e:e+t)):e+t}function v(e,t,i,r,o,a,s){let n,l,u,d;if(Array.isArray(a))if(2===a.length){const e=Math.max(0,a[0]),t=Math.max(0,a[1]);n=e,l=e,u=t,d=t}else{if(4!==a.length)throw new Error("Wrong border radius - it should be like css border radius");n=Math.max(0,a[0]),l=Math.max(0,a[1]),u=Math.max(0,a[2]),d=Math.max(0,a[3])}else{const e=Math.max(0,a);n=e,l=e,u=e,d=e}s||e.beginPath(),e.moveTo(t+n,i),e.lineTo(t+r-l,i),0!==l&&e.arcTo(t+r,i,t+r,i+l,l),e.lineTo(t+r,i+o-u),0!==u&&e.arcTo(t+r,i+o,t+r-u,i+o,u),e.lineTo(t+d,i+o),0!==d&&e.arcTo(t,i+o,t,i+o-d,d),e.lineTo(t,i+n),0!==n&&e.arcTo(t,i,t+n,i,n)}function g(e,t,i,r,o,a,n=0,l=0,u="",d=s.LineStyle.Solid){if(e.save(),!l||!u||u===a)return v(e,t,i,r,o,n),e.fillStyle=a,e.fill(),void e.restore();const c=l/2;if("transparent"!==a){const c="transparent"!==u&&d!==s.LineStyle.Solid;v(e,c?t:t+l,c?i:i+l,c?r:r-2*l,c?o:o-2*l,c?n:y(n,-l)),e.fillStyle=a,e.fill()}if("transparent"!==u){v(e,t+c,i+c,r-l,o-l,y(n,-c)),e.lineWidth=l,e.strokeStyle=u,D(e,d),e.closePath(),e.stroke()}e.restore()}function _(e,t){return t=Math.max(1,t),e.map((e=>e*t))}function b(e,t,i,r,o,l,u,d,c){const{context:f}=e,m=l%2/2,p=t+m,y=r+m;let v,g;if(d){const{borderMode:e,borderWidth:s,color:n,dashPattern:u,lineStyle:c}=d;switch(e){case"outer":{const e=-l/2-s/2,t=-s/2;g={left:p+e,right:y-e,top:i+t,bottom:o-t};break}case"center":{const e=s%2/2;g={left:t+e,right:r+e,top:i+e,bottom:o+e};break}case"inner":{const e=-l/2+s/2,t=s/2;g={left:p+e,right:y-e,top:i+t,bottom:o-t}}}f.strokeStyle=n,f.lineWidth=s;let h=-1;u?f.setLineDash(_(u,s)):void 0!==c&&(D(f,c),
c===a.LINESTYLE_SOLID&&(h=1)),v={left:g.left+h*s/2,top:g.top+h*s/2,right:g.right-h*s/2,bottom:g.bottom-h*s/2}}if(u&&(f.fillStyle=u.color,v||(v={left:p-l/2,right:y+l/2,top:i,bottom:o}),f.fillRect(v.left,v.top,v.right-v.left,v.bottom-v.top)),c){const{lineWidth:a,lineColor:s,lineStyle:l,excludeBoundaries:u}=c;f.save(),f.lineCap="butt",f.lineWidth=a,f.strokeStyle=s,D(f,l);const m=()=>h(f,Math.floor((i+o)/2),d?.rightToLeftStroke?r:t,d?.rightToLeftStroke?t:r);u?(0,n.drawWithExclusionAreaByScope)(e,u,m):m(),f.restore()}if(g){if((d?.lineStyle??s.LineStyle.Solid)===s.LineStyle.Solid)f.strokeRect(g.left,g.top,g.right-g.left,g.bottom-g.top);else{const e=d?.rightToLeftStroke?g.right:g.left,t=d?.rightToLeftStroke?g.left:g.right,i=g.top,r=g.bottom;f.lineCap="butt",[[e,i,t,i],[e,r,t,r],[e,i,e,r],[t,i,t,r]].forEach((([e,t,i,r])=>{f.beginPath(),f.moveTo(e,t),f.lineTo(i,r),f.stroke()}))}}}function w(e,t,i,r){e.beginPath(),e.arc(t,i,r,0,2*Math.PI,!1),e.closePath()}function P(e,t,i){e.beginPath(),e.moveTo(t[0].x,t[0].y);for(const i of t)e.lineTo(i.x,i.y);e.closePath(),e.stroke(),i&&e.fill()}function D(e,t){let i=[];t!==a.LINESTYLE_SOLID&&(i=T(e.lineWidth,t)),e.setLineDash(i)}function T(e,t){return[[e,2*e],[5*e,6*e],[6*e,6*e],[e,4*e],[2*e,e]][t-1]}function S(e,t,i,r,o){e.moveTo(t,i),e.lineTo(r,o)}function M(e,t,i,r,o){isFinite(t)&&isFinite(r)&&isFinite(i)&&isFinite(o)&&(e.beginPath(),S(e,t,i,r,o),e.stroke())}function x(e,t,i,r,o,a){const{horizontalPixelRatio:s,verticalPixelRatio:n}=a;let l;return t===r?(l=[Math.round(t*s),i*n,Math.round(t*s),o*n],f(e,l[0],l[1],l[3])):i===o?(l=[t*s,Math.round(i*n),r*s,Math.round(i*n)],c(e,l[1],l[0],l[2])):(l=[t*s,i*n,r*s,o*n],S(e,l[0],l[1],l[2],l[3])),l}function C(e,t,i,r,o,a=l.dpr1PixelRatioInfo){e.beginPath(),x(e,t,i,r,o,a),e.stroke()}function I(e,t,i,a){const s=(0,r.equalPoints)(i,a[0])?(0,r.equalPoints)(i,a[1])?null:a[1]:a[0];return null!==e&&null!==s?(0,o.intersectPolygonAndHalfplane)(e,(0,r.halfplaneThroughPoint)((0,r.lineThroughPoints)(t,i),s)):null}function k(e,t){const i=new Path2D;return i.addPath(e,(new DOMMatrix).scaleSelf(t,t)),i}},832126:(e,t,i)=>{i.d(t,{PriceAxisViewRenderer:()=>h,hittestByData:()=>c});var r=i(610555),o=i(906453),a=i(793750),s=i(680574),n=i(436465),l=i(578679),u=i(850699);const d=new Path2D("M4.09.93c.4.16.75.4 1.02.73a5.47 5.47 0 0 0-3.78 3.27A2.5 2.5 0 0 1 3.2.77c.31 0 .61.06.89.16Zm8.24 3.35a2.5 2.5 0 0 0-3.27-3.23c-.38.16-.7.4-.97.7a5.47 5.47 0 0 1 3.56 3.5c.3-.26.53-.6.68-.97Zm-3.15-.84a4.5 4.5 0 1 0-5.5 7.12 4.5 4.5 0 0 0 5.5-7.12ZM6 4h1v4H4V7h2V4Z");function c(e,t){const i=(0,a.lastMouseOrTouchEventInfo)().isTouch?20:0,s=e.hitTestData;if(void 0===s||!e.visible)return null;const{itemBox:n,clickHandler:u,tooltip:d}=s;if(n){const a=(0,r.box)(new r.Point(n.min.x-i,n.min.y-i),new r.Point(n.max.x+i,n.max.y+i));if((0,o.pointInBox)(t,a))return new l.HitTestResult(e.hitTarget??l.HitTarget.Custom,{clickHandler:u?.bind(null,t),tapHandler:u?.bind(null,t),hoverModelFromAxis:s.hoverModelFromAxis,activeItem:s.activeItem,tooltip:d})}return null}class h{constructor(e,t){
this._bodyBox=null,this.setData(e,t)}setData(e,t){this._data=e,this._commonData=t}lastDrawnBodyBox(){return this._bodyBox}draw(e,t,i,o,a){const l=this._data,{mediaSize:d,bitmapSize:c,horizontalPixelRatio:h,verticalPixelRatio:f}=t;if(!l.visible||this._isOutOfScreen(i,d.height))return;const m=this._commonData,p=void 0!==l.labelIcon,y=i.paddingTop+m.additionalPaddingTop,v=i.paddingBottom+m.additionalPaddingBottom,{paddingOuter:g,paddingInner:_,fontSize:b,borderSize:w}=i,P=l.ignoreAdditionalPaddingInner?0:i.additionalPaddingInner;let D=l.text,T=l.textColor||m.textColor,S=l.secondLine||"",M=m.secondLineTextColor||T,x=l.thirdLine||"";const C=m.thirdLineTextColor||T;0===S.length&&(S=x,M=C,x=""),0===D.length&&(D=S,T=M,S=x,M=C,x=""),e.save(),void 0!==m.globalAlpha&&(e.globalAlpha*=m.globalAlpha),e.font=i.font;const I=o.yMidCorrection(e,D)*f,k=b+y+v,R=(l.labelIconMinWidth??0)*h,V=Boolean(S),L=Boolean(x),A=_+g+P,K=[Math.ceil(o.measureText(e,D)),V?Math.ceil(o.measureText(e,S)):0,L?Math.ceil(o.measureText(e,x)):0],N=Math.max(1,Math.floor(f));let F=Math.round(k*f);F%2!=N%2&&(F+=1);const O=Math.round((b+i.lineSpacing)*f),E=Math.round(2*(b+i.lineSpacing)*f),B=Math.max(1,Math.floor(w*h)),H=l.separatorVisible?B:0,W=l.borderVisible?B:0,z=p?Math.max(F,R):Math.round((Math.max(...K)+A)*h),j=Math.round(P*h),q=c.width,$=Math.ceil(_*h),G=Math.round((m.fixedCoordinate??m.coordinate)*f)-Math.floor(.5*f),U=Math.floor(G+N/2-F/2),Z=U+F,Y="right"===a,J=void 0!==l.xCoord?Math.round(l.xCoord*h)+(Y?1:-1)*Math.round(z/2):Y?q-H:H;let Q,X=J;const ee=l.backgroung??m.background;e.fillStyle=ee;const te=2*f;if(e.textAlign=Y?"right":"left",e.textBaseline="middle",Y?(X=J-z,Q=J-j-$+H):(X=J+z,Q=J+j+$-H),this._bodyBox=null,D||p){const i=L?F+E:V?F+O:F,o=m.borderColor??ee,a=void 0!==l.xCoord?te:0;if(((t,o,s)=>{if(Y){(0,u.drawRoundRectWithInnerBorder)(e,X,U,z,i,t,l.overridenRadius?(0,u.scaleDrawRoundRectRadii)(l.overridenRadius,f):[te,a,a,te],W,o,s);const n=(0,r.point)(X/h,U/f),d=n.add((0,r.point)(z/h,i/f));this._bodyBox=(0,r.box)(n,d)}else{(0,u.drawRoundRectWithInnerBorder)(e,J,U,z,i,t,l.overridenRadius?(0,u.scaleDrawRoundRectRadii)(l.overridenRadius,f):[a,te,te,a],W,o,s);const n=(0,r.point)(J/h,U/f),d=n.add((0,r.point)(z/h,i/f));this._bodyBox=(0,r.box)(n,d)}})(ee,o,m.borderStyle),p){switch(l.labelIcon){case 0:this._drawPlusIcon(e,J,X,U,G,Z,N);break;case 1:this._drawClockExistingAlertIcon(e,J,X,t,U,i)}return void e.restore()}e.save(),e.translate(Q,(U+Z)/2+I),(0,n.drawScaled)(e,h,f,(()=>{e.fillStyle=T,e.fillText(D,0,0)})),e.restore()}V&&(e.fillStyle=M,e.save(),e.translate(Q,(U+Z)/2+I+O),(0,n.drawScaled)(e,h,f,(()=>{e.fillText((0,s.startWithLTR)(S),0,0)})),e.restore()),L&&(e.fillStyle=C,e.save(),e.translate(Q,(U+Z)/2+I+E),(0,n.drawScaled)(e,h,f,(()=>{e.fillText((0,s.startWithLTR)(x),0,0)})),e.restore()),e.restore()}topBottomTotalHeight(e){const t=this._lines();if(!this._data.visible||0===t)return{top:0,bottom:0,total:0}
;const i=e.fontSize/2+e.paddingTop+this._commonData.additionalPaddingTop,r=(t-.5)*e.fontSize+(t-1)*e.lineSpacing+e.paddingBottom+this._commonData.additionalPaddingBottom;return{top:i,bottom:r,total:i+r}}hitTest(e){return c(this._data,e)}_drawPlusIcon(e,t,i,r,o,a,s){e.fillStyle=this._commonData.textColor,e.strokeStyle=this._commonData.textColor,e.lineWidth=s;const n=Math.abs(t-i);let l=Math.round(.35*n);l%2!=s%2&&(l+=1);let u=Math.round(.65*n);u%2!=s%2&&(u+=1);const d=Math.floor((n-l)/2),c=Math.min(t,i),h=c+Math.floor(n/2-s/2);e.fillRect(c+d,o,l,s),e.fillRect(h,r+d,s,l),e.beginPath(),e.arc(h+s/2,o+s/2,u/2,0,2*Math.PI,!1),e.stroke()}_drawClockExistingAlertIcon(e,t,i,r,o,a){e.fillStyle=this._commonData.textColor;const s=Math.abs(t-i),n=Math.min(t,i),{horizontalPixelRatio:l,verticalPixelRatio:u}=r,c=s/(23*l),h=s/(23*u),f=12*l*c,m=10.73*u*h,p=Math.floor((s-f)/2),y=Math.floor((a-m)/2)-1;e.save(),e.translate(n+p,o+y),e.scale(l*c,u*h),e.fill(d),e.restore()}_lines(){const e=this._data;return(e.text?1:0)+(e.secondLine?1:0)+(e.thirdLine?1:0)}_isOutOfScreen(e,t){const i=this._commonData,r=i.fixedCoordinate??i.coordinate,{total:o}=this.topBottomTotalHeight(e),a=o/this._lines();return r-a/2-3>t||r+(o-a/2)+3<0}}},207925:(e,t,i)=>{i.d(t,{PriceAxisView:()=>a});var r=i(832126),o=i(650369);class a{constructor(e){this._commonRendererData={coordinate:0,textColor:"#FFF",background:"#000",additionalPaddingBottom:0,additionalPaddingTop:0},this._axisRendererData={text:"",visible:!1,separatorVisible:!0,borderVisible:!1,ignoreAdditionalPaddingInner:!1},this._paneRendererData={text:"",visible:!1,separatorVisible:!1,borderVisible:!1,ignoreAdditionalPaddingInner:!0},this._invalidated=!0,this._active=!1,this._axisRenderer=new(e||r.PriceAxisViewRenderer)(this._axisRendererData,this._commonRendererData),this._paneRenderer=new(e||r.PriceAxisViewRenderer)(this._paneRendererData,this._commonRendererData)}setActive(e){this._active=e}text(){return this._updateRendererDataIfNeeded(),this._axisRendererData.text}secondLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.secondLine}thirdLineText(){return this._updateRendererDataIfNeeded(),this._axisRendererData.thirdLine}background(){return this._updateRendererDataIfNeeded(),this._commonRendererData.background}color(){return this._updateRendererDataIfNeeded(),this.generateTextColor(this.background())}generateTextColor(e){return(0,o.colorFromBackground)(e)}coordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.coordinate}floatCoordinate(){return this._updateRendererDataIfNeeded(),this._commonRendererData.floatCoordinate??this._commonRendererData.coordinate}update(e){this._invalidated=!0}topBottomTotalHeight(e){this._updateRendererDataIfNeeded();const{top:t,bottom:i,total:r}=this._axisRenderer.topBottomTotalHeight(e),{top:o,bottom:a,total:s}=this._paneRenderer.topBottomTotalHeight(e);return{top:Math.max(t,o),bottom:Math.max(i,a),total:Math.max(r,s)}}getFixedCoordinate(){return this._commonRendererData.fixedCoordinate||0}setFixedCoordinate(e){
this._commonRendererData.fixedCoordinate=e}isVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible||this._paneRendererData.visible}isAxisLabelVisible(){return this._updateRendererDataIfNeeded(),this._axisRendererData.visible}isPaneLabelVisible(){return this._updateRendererDataIfNeeded(),this._paneRendererData.visible}renderer(){return this._updateRendererDataIfNeeded(),this._axisRenderer}paneRenderer(){return this._updateRendererDataIfNeeded(),this._paneRenderer}setPaneRendererLabelIcon(e){this._paneRendererData.labelIcon=e}setPaneLabelVisible(e){this._paneRendererData.visible=e,this._invalidated=!0}ignoreAlignment(){return!1}_updateRendererDataIfNeeded(){this._invalidated&&(this._commonRendererData.fixedCoordinate=void 0,this._updateRendererData(this._axisRendererData,this._paneRendererData,this._commonRendererData),this._invalidated=!1)}}},74037:(e,t,i)=>{i.d(t,{isRootPath:()=>n,propertyByPath:()=>s,propertyPathForSource:()=>o});var r=i(650151);function o(e,t="properties"){return`charts.${e.model().id()}.sources.${e.id()}.${t}`}function a(e,t){if(t.length<4)throw new Error("Invalid chart path");const i=function(e,t){return(0,r.ensureDefined)(e.getAll().find((e=>e.hasModel()&&e.model().model().id()===t))).model().model()}(e,t[0]),o=t[1];if("sources"===o){return(0,r.ensureNotNull)(i.dataSourceForId(t[2])).propertyByPath(t.slice(3).join("."))}throw new Error(`Invalid chart path, unknown root: ${o}`)}function s(e,t){const i=t.split(".");if(i.length<1)throw new Error("Invalid path");const r=i[0];if("charts"===r)return a(e,i.slice(1));throw new Error(`Invalid path, unknown root: ${r}`)}function n(e){return e.startsWith("charts.")}},260670:(e,t,i)=>{i.d(t,{dpr1PixelRatioInfo:()=>o,equalPixelRatios:()=>s,equalRenderingInfos:()=>a});var r=i(327714);const o={horizontalPixelRatio:1,verticalPixelRatio:1};function a(e,t){return(0,r.equalSizes)(e.mediaSize,t.mediaSize)&&(0,r.equalSizes)(e.bitmapSize,t.bitmapSize)&&s(e,t)}function s(e,t){return e.horizontalPixelRatio===t.horizontalPixelRatio&&e.verticalPixelRatio===t.verticalPixelRatio}},763268:(e,t,i)=>{i.d(t,{applyDefaultColorsToPropsState:()=>R,blacklistedProperties:()=>L,prepareStudyProperties:()=>V,prepareStudyPropertiesForLoadChart:()=>T,prepareStudyPropsStateForLoadChart:()=>S,studyGeneralPropsState:()=>x,studyPropsExcludeDefaultsKeys:()=>A});var r=i(998034),o=i(130551),a=i(735566),s=i(536794),n=i(790188),l=i(327734),u=i(981182),d=i(453287),c=i(344060),h=i(841528),f=i(294721),m=i(61689),p=i(140831);const y=(0,a.getLogger)("Chart.Study"),v=(0,n.getHexColorByName)("color-tv-blue-500"),g=(0,n.getHexColorByName)("color-tv-blue-500"),_=(0,n.getHexColorByName)("color-tv-blue-500"),b=(0,n.getHexColorByName)("color-tv-blue-500"),w=(0,n.getHexColorByName)("color-cold-gray-500"),P=(0,n.getHexColorByName)("color-tv-blue-500"),D=(0,n.getHexColorByName)("color-tv-blue-500");function T(e,t,i,r,o,a){return function(e,t,i,r,o,a,s){const n=S(e,t,i,r,a);return K(t||e,o,n,s,!0)}(e,t,i,r,l.StudyMetaInfo.getStudyPropertyRootName(e),o,a)}function S(e,t,i,o,a){
e.version&&i.version&&e.version!==i.version&&y.logWarn("Serialized metaInfo version "+e.version+" is not equal to the saved state version "+i.version);const n=t||e,u=(0,s.clone)(n.defaults)??{},c=l.StudyMetaInfo.getStudyPropertyRootName(n),h=l.StudyMetaInfo.getStudyPropertyRootName(e);let f=x();return(0,r.default)(f,M(e)),(0,r.default)(f,(0,s.clone)(e.defaults)),(0,r.default)(f,u),(0,r.default)(f,(0,d.factoryDefaults)(c)),(0,r.default)(f,(0,d.factoryDefaults)(h)),(0,r.default)(f,C(n,o,c)),(0,r.default)(f,C(e,o,h)),(0,r.default)(f,i),R(f,n),f=o.updateStudyState(f,e,t),void 0!==a&&t&&(f=a(i,f,e,t)),l.StudyMetaInfo.versionOf(n)>=1&&(0,r.default)(f,I(u,f)),f}function M(e){const t={};if(e.plots)for(let i=0;i<e.plots.length;i++){const r=e.plots[i],o=r.id;if((0,p.isColorerPlot)(r))continue;const a={display:4294967295,color:v,linestyle:u.LINESTYLE_SOLID,linewidth:2,plottype:p.LineStudyPlotStyle.Line,trackPrice:!1};(0,p.isBarColorerPlot)(r)&&(a.transparency=0),a.plottype=r.type,a.title=o,t[o]=(0,s.clone)(a)}return{styles:t}}function x(){const e=(0,s.clone)((0,d.defaults)("study"));return e.intervalsVisibilities=(0,s.clone)(h.intervalsVisibilitiesDefaults),e}function C(e,t,i){let r=(0,s.clone)((0,d.defaults)(i,t));return"Overlay"!==e.shortId&&"Compare"!==e.shortId||(r.currencyId=null,r.unitId=null),e.isTVScript&&e.TVScriptSourceCode!==r.TVScriptSourceCode&&(r=(0,s.clone)((0,d.factoryDefaults)(i))),r}function I(e,t){const i={};return c.StudyVersioning.mergeInputsObjPart(i,e.inputs??{}),c.StudyVersioning.mergeInputsObjPart(i,t.inputs),{inputs:i}}function k(e,t,i,a){if(l.StudyMetaInfo.versionOf(e)<1)throw new Error("This function cannot work with metainfo of the old format version. Required format version >= 1");const n=l.StudyMetaInfo.getStudyPropertyRootName(e),u=(0,s.clone)(e.defaults),c=(0,d.factoryDefaults)(n),h=x();if((0,r.default)(h,M(e)),(0,r.default)(h,u),(0,r.default)(h,c),(0,r.default)(h,C(e,a,n)),(0,r.default)(h,t),(0,r.default)(h,I(u,h)),R(h,e),null!==i){const t=i.model().studiesColorRotatorFactory().getColorRotator(e);null!==t&&("Overlay@tv-basicstudies"===e.id?h.lineStyle.color=t.getColor(h.lineStyle.color,c.lineStyle.color===h.lineStyle.color):(0,r.default)(h,function(e,t){for(const i of Object.keys(e.styles)){const r=e.styles[i];if((0,o.isObject)(r)&&"color"in r){const e=r.color;r.color=t.getColor(e)}}return e}(h,t)))}return a.updateStudyInputsIfNeeded(h,h.version??e.version,e),h}function R(e,t){if(t.plots&&e.styles)for(let i=0;i<t.plots.length;i++){const r=t.plots[i],o=r.id;if((0,p.isLinePlot)(r)){const t=e.styles[o];t&&null===t.color&&(t.color=v)}else if((0,p.isShapesPlot)(r)){const t=e.styles[o];t&&(null===t.color&&(t.color=g),null===t.textColor&&(t.textColor=b))}else if((0,p.isCharsPlot)(r)){const t=e.styles[o];t&&(null===t.color&&(t.color=P),null===t.textColor&&(t.textColor=D))}else if((0,p.isOhlcPlot)(r)){const t=e.ohlcPlots?.[r.target];t&&null===t.color&&(t.color=_)}}if(e.bands)for(let t=0;t<e.bands.length;++t){const i=e.bands[t];null===i.color&&(i.color=w)}}function V(e,t,i,r,o){
return function(e,t,i,r,o,a){const n=k(e,t,i,r),u=l.StudyMetaInfo.getSourceInputIds(e);return u.forEach(((e,t)=>{const i=n.inputs[e];t<a.length?n.inputs[e]=`${a[t].id()}$0`:(0,s.isString)(i)&&i.includes("$")&&(n.inputs[e]="close")})),K(e,o,n)}(e,t,i,r,l.StudyMetaInfo.getStudyPropertyRootName(e),o)}const L=["id","description","description_localized","shortDescription","_metainfoVersion","is_price_study","is_hidden_study","priceScale","fullId","shortId","scriptIdPart","packageId","productId","isTVScriptStub","defaults","symbolSource","historyCalculationMayChange","format","linkedToSeries","isTVLibrary","docs","exports","exportTypes","extra","usesPrivateLib","financialPeriod","groupingKey","pine","isRGB","isTVScript","TVScriptMetaInfoExprs","usePlotsZOrder","isTVScriptStrategy","TVScriptSourceCode","lookaheadFutureData","hasAlertFunction","defaultStrategyAlertMessage","tags","canBeChild","canNotBeChild","_serverMetaInfoVersion","warnings"];function A(e){const t=["visible","precision","minTick","intervalsVisibilities","inputs.first_visible_bar_time","inputs.last_visible_bar_time","inputs.subscribeRealtime"];for(let i=0;i<e.inputs.length;++i){const r=e.inputs[i];r.isHidden&&(t.push(`inputs.${i}`),t.push(`inputs.${r.id}`))}return t}function K(e,t,i,r,o){for(const e of L)delete i[e];const a=new f.DefaultProperty({defaultName:t,state:i,excludedDefaultsKeys:A(e),excludedStateKeys:["version"],theme:r});a.removeProperty("intervalsVisibilities"),a.addChild("intervalsVisibilities",new m.IntervalsVisibilitiesProperty(i&&i.intervalsVisibilities)),"PivotPointsStandard@tv-basicstudies"!==e.id&&"PivotPointsHighLow@tv-basicstudies"!==e.id||!a.hasChild("font")||a.removeProperty("font");const s=l.StudyMetaInfo.versionOf(e);return a.hasChild("version")?a.childs().version?.setValue(s):a.addProperty("version",s),e.TVScriptMetaInfoExprs&&!o&&a.addProperty("patchMetaInfoDefaults",!0),a}},446448:(e,t,i)=>{i.d(t,{LiveStudyGraphics:()=>s.LiveStudyGraphics,createGraphicsPaneViews:()=>f,createGraphicsPriceAxisViews:()=>p,emptyStudyGraphics:()=>a.emptyStudyGraphics,isStudyGraphicsEmpty:()=>o.isStudyGraphicsEmpty,loadStudyGraphics:()=>a.loadStudyGraphics,saveStudyGraphics:()=>a.saveStudyGraphics});var r=i(735566),o=i(523480),a=i(934255),s=i(139096),n=i(207925),l=i(650369);class u extends n.PriceAxisView{constructor(e,t){super(),this._source=e,this._data=t}_updateRendererData(e,t,i){e.visible=!1;const r=this._source.priceScale(),o=this._source.properties().childs(),a=o.visible.value();if(!r||r.isEmpty()||!a)return;const s=o.graphics.childs()[this._data.lineType]?.childs()[this._data.styleId]?.childs();if(!(void 0!==s&&s.visible&&s.visible.value()&&s.showPrice&&s.showPrice.value()&&this._isLabelVisibleAccordinglyToProperties()))return;const n=this._source.firstValue();if(null===n)return;const u=this._data.line.level,d=(0,l.resetTransparency)(s.color.value());i.background=d,i.textColor=this.generateTextColor(d),i.coordinate=r.priceToCoordinate(u,n),e.text=r.formatPrice(u,n,{signPositive:r.isPercentage()}),e.visible=!0}
_isLabelVisibleAccordinglyToProperties(){const e=this._source.model().properties().childs().scalesProperties.childs();return(e.showStudyLastValue.value()||e.showFundamentalLastValue.value())&&this._source.properties().childs().showLabelsOnPriceScale.value()}}const d=(0,r.getLogger)("Chart.StudyGraphics"),c=new Set(["dwgtablecells","tpoBlockSets","tpoLevels","tpoVolumeRows","logs","performance"]);async function h(e,t,r,o){const a=e=>({regularPaneView:new e(t,r,o)}),s=e=>({regularPaneView:new e(t,r,!1,o),forceOverlayPaneView:new e(t,r,!0,o)});switch(e){case"hlines":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,734944))).LevelPaneView);case"lines":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,127207))).LinePaneView);case"shapemarks":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,535150))).ShapeMarkPaneView);case"textmarks":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,620394))).TextMarkPaneView);case"trendchannels":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,790249))).TrendChannelPaneView);case"dwglabels":return s((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,749065))).DwgLabelPaneView);case"dwglines":return s((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,412377))).DwgLinePaneView);case"dwgpolylines":return s((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,715316))).DwgPolylinePaneView);case"dwgboxes":return s((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,19186))).DwgBoxPaneView);case"dwgtables":return s((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,614933))).DwgTablePaneView);case"dwglinefills":return s((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,98282))).DwgLineFillPaneView);case"tpos":return{regularPaneView:new((await Promise.all([i.e(32856),i.e(97542),i.e(75368),i.e(38071),i.e(99185),i.e(19391),i.e(54123),i.e(96068),i.e(66635),i.e(769)]).then(i.bind(i,916445))).TpoPaneView)(t,r,o)};case"footprints":return{regularPaneView:new((await Promise.all([i.e(80977),i.e(53464),i.e(9141)]).then(i.bind(i,646452))).VolumeFootprintPaneView)(t,r)}}switch(e){case"hhists":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,101816))).HHistPaneView);case"horizlines":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,399545))).HorizLinePaneView);case"vertlines":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,56284))).VertLinePaneView);case"polygons":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,175920))).PolygonPaneView);case"backgrounds":return a((await Promise.all([i.e(48094),i.e(99185),i.e(74005),i.e(20507)]).then(i.bind(i,68931))).BackgroundPaneView)}return null}
async function f(e,t,i){const r=[],o=[],a=Object.keys(e.graphicsInfo());a.sort(((e,t)=>m(e)-m(t)));for(const s of a){const a=await h(s,e,t,i);null!==a?(r.push(a.regularPaneView),a.forceOverlayPaneView&&o.push(a.forceOverlayPaneView)):c.has(s)||d.logWarn(`${s} is not supported by this build of graphics subsystem, skipping`)}return{regularPaneViews:r,forceOverlayPaneViews:o}}function m(e){return o.primitivesZOrders.get(e)??0}function p(e){const t=Object.keys(e.graphicsInfo()),i=[];for(const r of t)switch(r){case"hlines":e.graphics().hlines().forEach(((t,o)=>{t.forEach((t=>{void 0!==t.level&&i.push(new u(e,{line:{level:t.level},styleId:o,lineType:r}))}))}));break;case"horizlines":e.graphics().horizlines().forEach(((t,o)=>{t.forEach((t=>{void 0!==t.level&&i.push(new u(e,{line:{level:t.level},styleId:o,lineType:r}))}))}))}return i}},887947:(e,t,i)=>{i.d(t,{makeNextStudyId:()=>s,makeNextSymbolId:()=>o});let r=0;function o(){return r++,"ss_"+r}let a=0;function s(){return a++,"st"+a}},549904:(e,t,i)=>{i.d(t,{colorsAreCloseEnough:()=>u,isColorDark:()=>h});var r=i(481251),o=i(724377);function a(e){return e<0&&(e+=2*Math.PI),e}function s(e,t){const[i,r,o]=e,[s,n,l]=t,u=(Math.sqrt(r**2+o**2)+Math.sqrt(n**2+l**2))/2,d=.5*(1-Math.sqrt(Math.pow(u,7)/(Math.pow(u,7)+6103515625))),c=(1+d)*r,h=(1+d)*n,f=Math.sqrt(c*c+o*o),m=Math.sqrt(h*h+l*l),p=0===o&&0===c?0:a(Math.atan2(o,c)),y=0===l&&0===h?0:a(Math.atan2(l,h)),v=s-i,g=m-f;let _;const b=f*m;0===b?_=0:(_=y-p,_<-Math.PI?_+=2*Math.PI:_>Math.PI&&(_-=2*Math.PI));const w=2*Math.sqrt(b)*Math.sin(_/2),P=(i+s)/2,D=(f+m)/2;let T;const S=p+y;T=f*m==0?S:Math.abs(p-y)<=Math.PI?S/2:S<2*Math.PI?(S+2*Math.PI)/2:(S-2*Math.PI)/2;const M=1-.17*Math.cos(T-Math.PI/6)+.24*Math.cos(2*T)+.32*Math.cos(3*T+Math.PI/30)-.2*Math.cos(4*T-Math.PI/180*63),x=Math.PI/6*Math.exp(-Math.pow((T-Math.PI/180*275)/(Math.PI/180*25),2)),C=2*Math.sqrt(Math.pow(D,7)/(Math.pow(D,7)+6103515625)),I=1+.015*Math.pow(P-50,2)/Math.sqrt(20+Math.pow(P-50,2)),k=1+.045*D,R=1+.015*D*M,V=-Math.sin(2*x)*C;return Math.sqrt(Math.pow(v/(1*I),2)+Math.pow(g/(1*k),2)+Math.pow(w/(1*R),2)+V*(g/(1*k))*(w/(1*R)))}const n=[127,127,127];function l(e){const t=e[3],i=e.slice(0,3);for(let e=0;e<3;e++)i[e]=Math.round(i[e]*t+n[e]*(1-t));return i}function u(e,t){return s(m(f(l((0,o.parseRgba)(e)))),m(f(l((0,o.parseRgba)(t)))))<3}const d=(0,r.default)((()=>m(f([0,0,0])))),c=(0,r.default)((()=>m(f([255,255,255]))));function h(e){const t=m(f(l((0,o.parseRgba)(e))));return s(t,d())<s(t,c())}function f(e){const[t,i,r]=e,o=t/255,a=i/255,s=r/255,n=100*(o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92),l=100*(a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92),u=100*(s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92);return[.4124*n+.3576*l+.1805*u,.2126*n+.7152*l+.0722*u,.0193*n+.1192*l+.9505*u]}function m(e){const[t,i,r]=e,o=t/95.047,a=i/100,s=r/108.883,n=o>.008856?Math.pow(o,1/3):7.787*o+16/116,l=a>.008856?Math.pow(a,1/3):7.787*a+16/116;return[116*l-16,500*(n-l),200*(l-(s>.008856?Math.pow(s,1/3):7.787*s+16/116))]}},42437:(e,t,i)=>{function r(e){let t
;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if(e instanceof Date)t=new Date(e.valueOf());else if(Array.isArray(e)){t=[];let i=0;const o=e.length;for(;i<o;i++)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=r(e[i]))}else{t={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=r(e[i]))}return t}i.d(t,{deepCopy:()=>r})}}]);