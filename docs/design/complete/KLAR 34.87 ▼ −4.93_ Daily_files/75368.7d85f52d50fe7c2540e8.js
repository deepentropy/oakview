"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[75368],{320583:(t,e,i)=>{i.d(e,{PanePriceAxisView:()=>a});var n=i(204181);class s{constructor(t){this._priceAxisViewRenderer=null,this._rendererOptions=null,this._align="right",this._textWidthCache=t}setParams(t,e,i,n,s){this._priceAxisViewRenderer=t,this._rendererOptions=e,this._align=s}draw(t,e){null!==this._rendererOptions&&null!==this._priceAxisViewRenderer&&this._priceAxisViewRenderer.draw(t,e,this._rendererOptions,this._textWidthCache,this._align)}hitTest(t,e){return void 0===this._priceAxisViewRenderer?.hitTest?null:this._priceAxisViewRenderer?.hitTest(t,e,this._align)}}class a{constructor(t,e,i){this._renderer=null,this._invalidated=!0,this._priceAxisView=t,this._textWidthCache=new n.TextWidthCache(100),this._dataSource=e,this._chartModel=i,this._fontSize=-1,this._panePriceAxisViewRenderer=new s(this._textWidthCache)}update(t){this._invalidated=!0}renderer(t){return this._invalidated&&this._updateImpl(t),this._renderer}_position(){const t=this._chartModel.crosshairSource(),e=this._dataSource===t?t.pane:this._chartModel.paneForSource(this._dataSource);if(null===e)return null;const i=this._priceScale();if(null===i)return null;let n=e.priceScalePosition(i);return"overlay"===n&&(n=e.priceScalePosition(e.defaultPriceScale())),"overlay"===n?null:n}_updateImpl(t){this._renderer=null;const e=this._position();if(null===e)return;const i=this._chartModel.priceAxisRendererOptions();i.fontSize!==this._fontSize&&(this._fontSize=i.fontSize,this._textWidthCache.reset()),this._panePriceAxisViewRenderer.setParams(this._priceAxisView.paneRenderer(),i,t.mediaSize.width,t.mediaSize.height,e),this._renderer=this._panePriceAxisViewRenderer,this._invalidated=!1}_priceScale(){return this._dataSource.priceScale()}}},847068:(t,e,i)=>{i.d(e,{applyColor:()=>r});var n=i(283873),s=i(169958),a=i(487122);const l=new WeakMap;function r(t,e,i=0,r=3){const{context:o,bitmapSize:h,mediaSize:c}=t;let d;if((0,n.default)(e))d=e;else if(e.type===a.ColorType.Solid)d=e.color;else{let t=l.get(o);void 0===t&&(t=new s.CircularCacheBuffer(1e3),l.set(o,t));const n=0===i?c.height:h.height,a=`${e.startColor}_${e.endColor}_${n}`;let r=t.get(a);void 0===r&&(r=o.createLinearGradient(0,0,0,n),r.addColorStop(0,e.startColor),r.addColorStop(1,e.endColor),t.set(a,r)),d=r}1&r&&(o.strokeStyle=d),2&r&&(o.fillStyle=d)}},78842:(t,e,i)=>{i.d(e,{PaneRendererArea:()=>o});var n=i(610555),s=i(938933),a=i(289417),l=i(850699),r=i(847068);class o extends s.PaneRendererLine{constructor(t){t.forceLineColor=!1,super(t)}_drawImpl(t){const e=this._data;if(0===e.items.length)return;let i=this._data.visibleItemsRange?.startItemIndex??0,o=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(;i<o&&!(0,a.coordinateIsValid)(e.items[i].y);)i++;for(;o>=0&&!(0,a.coordinateIsValid)(e.items[o].y);)o--;if(i>o)return;const{context:h,horizontalPixelRatio:c,verticalPixelRatio:d}=t;h.save(),h.scale(c,d),h.lineCap="round",(0,r.applyColor)(t,e.lineColor,0,1),h.lineWidth=e.lineWidth,(0,
l.setLineStyle)(h,e.lineStyle),h.lineWidth=1;const u=new Map,_=new s.PaneRendererLineItemsIterator(this._data.items,i,o+1,this._data.skipHoles);for(;_.next();){const t=_.currentValue();let i;i=(0,s.isValidPoint)(t)&&t.style?t.style.color:e.lineColor;const n=_.nextValue();if((0,s.isValidPoint)(n)&&n?.style){const e=n.style.color;if(i!==e){const i=u.get(e)??[];i.push(t),u.set(e,i)}}const a=u.get(i)??[];a.push(t),u.set(i,a)}for(const[i,a]of u){h.beginPath();let l=0;for(let t=0;t<a.length;t++){const r=a[t];if(!(0,s.isValidPoint)(r))continue;if(!r.style||r.style?.color===i)continue;const o=(0,n.point)(Math.round(a[l].center),e.bottom);h.moveTo(o.x,o.y),this._walkLine(h,a.slice(l,t),!0,e.bottom,!0,!1,o),l=t}{const s=(0,n.point)(Math.round(a[l].center),e.bottom);if(h.moveTo(s.x,s.y),this._walkLine(h,a.slice(l,a.length),!0,e.bottom,!0,!1,s),h.closePath(),e.isSeries){const t=h.createLinearGradient(0,0,0,e.bottom);t.addColorStop(0,e.color1),t.addColorStop(1,e.color2),h.fillStyle=t,e.simpleMode=!0}else(0,r.applyColor)(t,i,0,2);h.fill()}}h.lineWidth=e.lineWidth,h.restore(),super._drawImpl(t)}}},938933:(t,e,i)=>{i.d(e,{PaneRendererLine:()=>g,PaneRendererLineItemsIterator:()=>x,isValidPoint:()=>f});var n=i(650151),s=i(610555),a=i(2624),l=i(578679),r=i(289417),o=i(850699),h=i(753530),c=i(847068),d=i(615790),u=i(315269);const _={y:NaN};function f(t){return null!==t&&!isNaN(t.y)}function m(t){t.index=null,t.currentBreakProcessed=!1,t.value=null}function p(t,e){t.index=e.index,t.currentBreakProcessed=e.currentBreakProcessed,t.value=e.value}class x{constructor(t,e,i,s){this._calculatedPrev={index:null,currentBreakProcessed:!1,value:null},this._calculatedCurrent={index:null,currentBreakProcessed:!1,value:null},this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},this._preallocatedVariable={index:null,currentBreakProcessed:!1,value:null},t.length&&((0,n.assert)(e<=i,"First index must be less or equal to last index"),(0,n.assert)(e<t.length,"First index must be less then array length"),(0,n.assert)(i<=t.length,"Last index must be less or equal to array length")),this._items=t,this._firstIndexWithRange=e,this._lastIndexWithRange=i,this._skipHoles=s}next(){if(0===this._items.length)return!1;if(null!==this._calculatedNext.index)return null!==this._calculatedNext.value&&(p(this._calculatedPrev,this._calculatedCurrent),p(this._calculatedCurrent,this._calculatedNext),m(this._calculatedNext),!0);let t;this._preallocatedVariable={...this._calculatedCurrent};do{null===this._preallocatedVariable.index?(this._preallocatedVariable.index=this._firstIndexWithRange,this._preallocatedVariable.currentBreakProcessed=!1,t=this._preallocatedVariable.index<this._lastIndexWithRange):(this._incrementPointer(this._preallocatedVariable),t=this._isValidPointer(this._preallocatedVariable)),t&&this._calcValue(this._preallocatedVariable)}while(t&&this._skipHoles&&!f(this._preallocatedVariable.value));return t&&(p(this._calculatedPrev,this._calculatedCurrent),p(this._calculatedCurrent,this._preallocatedVariable),m(this._calculatedNext)),t}prevValue(){
return this._calculatedPrev.value}currentValue(){return(0,n.ensureNotNull)(this._calculatedCurrent.value)}currentValueIsLast(){return(0,n.ensureNotNull)(this._calculatedCurrent.index)===this._items.length-1}currentValueIsFirst(){return 0===(0,n.ensureNotNull)(this._calculatedCurrent.index)}nextValue(){if(null!==this._calculatedNext.index)return this._calculatedNext.value;let t;p(this._calculatedNext,this._calculatedCurrent),this._calculatedNext.value=null;do{this._incrementPointer(this._calculatedNext),t=this._isValidPointer(this._calculatedNext),t?this._calcValue(this._calculatedNext):this._calculatedNext.value=null}while(t&&this._skipHoles&&!f(this._calculatedNext.value));return this._calculatedNext.value}atStart(){return this._calculatedCurrent.index===this._firstIndexWithRange&&!this._calculatedCurrent.currentBreakProcessed}_needBreakBefore(t){return!this._skipHoles&&!!this._items[t].breakBefore}_calcValue(t){const e=(0,n.ensureNotNull)(t.index);this._needBreakBefore(e)&&!t.currentBreakProcessed?t.value=_:t.value=this._items[e]}_incrementPointer(t){const e=(0,n.ensureNotNull)(t.index);this._needBreakBefore(e)&&!this._calculatedCurrent.currentBreakProcessed?t.currentBreakProcessed=!0:(t.index=e+1,t.currentBreakProcessed=!1)}_isValidPointer(t){const e=(0,n.ensureNotNull)(t.index);return e<this._lastIndexWithRange||e===this._lastIndexWithRange-1&&this._needBreakBefore(e)&&t.currentBreakProcessed}}class g extends h.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=t}hitTest(t){const e=(0,r.interactionTolerance)().series+this._data.lineWidth/2;let i=this._data.visibleItemsRange?.startItemIndex??0,n=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(;n-i>2;){const e=Math.round((n+i)/2);this._data.items[e].center<=t.x?i=e:n=e}i=Math.max(1,i-1),n=Math.min(this._data.items.length-1,n+1);for(let r=i;r<=n;++r){const i=this._data.items[r-1],n=this._data.items[r],o=i.center,h=n.center;if((0,a.distanceToSegment)(new s.Point(o,i.y),new s.Point(h,n.y),new s.Point(t.x,t.y)).distance<=e)return this._data.hittest?this._data.hittest:new l.HitTestResult(l.HitTarget.Regular)}return null}_drawImpl(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n}=t;e.scale(i,n),e.lineCap="round",e.lineJoin="round",(0,c.applyColor)(t,this._data.lineColor,0,3),e.lineWidth=this._data.lineWidth,(0,o.setLineStyle)(e,this._data.lineStyle),(0,r.setValidLineStyle)(e,this._data.lineStyle),this._data.simpleMode?this._drawSimpleMode(t):this._drawLines(e)}_drawSimpleMode(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n}=t;e.beginPath(),this._walkLine(e,this._data.items,!1,NaN),e.stroke();const s=this._data.lineWidth+2;if(this._data.withMarkers&&2*s<this._data.barSpacing){e.scale(1/i,1/n),(0,c.applyColor)(t,this._data.lineColor,1,2);const a=Math.max(1,Math.floor(i))%2/2,l=s*n+a,r=2*Math.PI;e.beginPath();const o=this._data.visibleItemsRange?.startItemIndex??0;for(let t=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1+1;t-- >=o;){const s=this._data.items[t];if(s){
const t=Math.round(s.center*i)+a,o=s.y*n;e.moveTo(t,o),e.arc(t,o,l,0,r)}}e.fill()}}_walkLine(t,e,i,n,s,a,l){if(!e)return{distance:0,dashPattern:[]};const r=.25*this._data.barSpacing;let o,h,c=null;const _=s?0:this._data.visibleItemsRange?.startItemIndex??0,m=s?e.length:Math.min(this._data.visibleItemsRange?.endItemIndex??e.length,e.length);if(_>m||_>=e.length)return{distance:0,dashPattern:[]};if(!a){const{distance:a,dashPattern:r}=this._walkLine(t,e,i,n,s,!0,l),o=(0,d.sum)(r);if(o>0){const e=a%o;t.lineDashOffset=o-e-r[1]}}const p=new u.SmartDashCanvas(t,!!a,l),g=new x(e,_,m,this._data.skipHoles);for(;g.next();){if(o=g.currentValue(),h=g.nextValue(),f(o)){const t=Math.round(o.center);c&&f(c)?(p.lineTo(t,o.y),i&&!f(h)&&p.lineTo(t,n)):h&&f(h)?i?(g.atStart()||p.lineTo(t,n),p.lineTo(t,o.y)):p.moveTo(t,o.y):i?(g.atStart()||p.lineTo(t-r,n),p.lineTo(t-r,o.y),p.lineTo(t+r,o.y),p.lineTo(t+r,n)):(p.moveTo(t-r,o.y),p.lineTo(t+r,o.y))}c=o}return{distance:p.lastSegmentDistance(),dashPattern:p.lastSegmentDashPattern()}}_drawLines(t,e){if(!this._data.items.length||0===this._data.lineWidth)return{distance:0,dashPattern:[]};let i,n,s=null;const a=.25*this._data.barSpacing,l=new u.SmartDashCanvas(t,!!e);let r=0;if(!e){const{distance:e,dashPattern:i}=this._drawLines(t,!0),n=(0,d.sum)(i);if(n>0){const s=e%n;t.lineDashOffset=r=n-s-i[1]}}l.beginPath();const o=this._data.visibleItemsRange?.startItemIndex??0,h=this._data.visibleItemsRange?.endItemIndex??this._data.items.length;if(o>h||o>=this._data.items.length)return{distance:0,dashPattern:[]};const c=this._data.items[o];c&&l.moveTo(c.center,c.y);let _,m=t.strokeStyle,p=t.lineWidth;const g=new x(this._data.items,o,h,this._data.skipHoles);for(;g.next();){let o,h,c;s=g.prevValue(),i=g.currentValue(),n=g.nextValue();let u=!1,x=!1,I=!1;if(f(i)&&(i.style&&!this._data.forceLineColor?(o=i.style.color,h=i.style.width,c=i.style.style):(o=this._data.lineColor,h=this._data.lineWidth,c=this._data.lineStyle),this._data.ignorePaletteLineWidth&&(h=this._data.lineWidth),x=c!==_,I=h!==p,u=o!==m||x||I),u){if(m=o,p=h,_=c,l.stroke(),l.beginPath(),!e){l.setStrokeStyle(o);const e=l.lastSegmentDistance(),i=l.lastSegmentDashPattern(),n=(0,d.sum)(i);if(n>0){const i=e%n;t.lineDashOffset=i+r}}if(l.setLineWidth(h),l.setLineStyle(c),f(s))l.moveTo(s.center,s.y);else{const t=i;l.moveTo(t.center,t.y)}}y=s,v=n,f(P=i)&&(f(y)?l.lineTo(P.center,P.y):v&&f(v)?l.moveTo(P.center,P.y):(l.moveTo(P.center-a,P.y),l.lineTo(P.center+a,P.y)))}var y,P,v;return l.stroke(),{distance:l.lastSegmentDistance(),dashPattern:l.lastSegmentDashPattern()}}}},315269:(t,e,i)=>{i.d(e,{SmartDashCanvas:()=>o});var n=i(650151),s=i(610555),a=i(289417),l=i(981182),r=i(850699);class o{constructor(t,e,i){this._lastSegmentDistance=0,this._lastLineWidth=-1,this._lastLineStyle=-1,this._ctx=t,this._calculateOnly=e,this._lastDashPattern=t.getLineDash(),this._lastPoint=i??null}beginPath(){this._calculateOnly||this._ctx.beginPath()}stroke(){this._calculateOnly||this._ctx.stroke()}fill(){this._calculateOnly||this._ctx.fill()}lastSegmentDistance(){
return this._lastSegmentDistance}lastSegmentDashPattern(){return this._lastDashPattern}lastLineWidth(){return this._lastLineWidth}moveTo(t,e){this._lastPoint=(0,s.point)(t,e),this._calculateOnly||this._ctx.moveTo(t,e)}lineTo(t,e){const i=(0,n.ensureNotNull)(this._lastPoint),a=i.x-t,l=i.y-e;this._lastSegmentDistance+=Math.sqrt(a*a+l*l),this._calculateOnly||this._ctx.lineTo(t,e),this._lastPoint=(0,s.point)(t,e)}setLineWidth(t){this._lastLineWidth!==t&&(this._lastLineWidth=t,this._lastDashPattern=this._lastLineStyle===l.LINESTYLE_SOLID?[]:(0,r.computeDashPattern)(t,this._lastLineStyle),this._calculateOnly||(this._ctx.lineWidth=t,this._lastLineStyle>=0&&(0,a.setValidLineStyle)(this._ctx,this._lastLineStyle)))}setLineStyle(t){this._lastLineStyle!==t&&(this._lastLineStyle=t??this._lastLineStyle),void 0!==t&&this._lastLineWidth>0&&(this._lastDashPattern=t===l.LINESTYLE_SOLID?[]:(0,r.computeDashPattern)(this._lastLineWidth,t)),this._calculateOnly||(0,a.setValidLineStyle)(this._ctx,t)}setStrokeStyle(t){this._calculateOnly||(this._ctx.strokeStyle=t)}context(){return this._ctx}}},501849:(t,e,i)=>{i.d(e,{PaneRendererStepLine:()=>g,StepLineDecoration:()=>n});var n,s=i(2624),a=i(610555),l=i(578679),r=i(289417),o=i(850699),h=i(753530),c=i(938933),d=i(847068),u=i(315269),_=i(615790);!function(t){t[t.None=0]="None",t[t.Diamonds=1]="Diamonds"}(n||(n={}));class f{constructor(t){this._forceExtendFirstBar=!!t}initialize(t,e,i,n){const{context:s,horizontalPixelRatio:a,verticalPixelRatio:l}=i,r=e.lineStyle;s.lineCap="butt",s.lineJoin="round";const o=Math.max(Math.floor(n.style?.width??e.lineWidth*a));t.setLineStyle(r);const h=o%2?.5:0;t.moveTo(Math.round(n.center*a)+h,Math.round(n.y*l)+h),(0,d.applyColor)(i,n.style?.color??e.lineColor,1,1),t.setLineWidth(o)}startFragment(t,e,i,n,s){t.beginPath();const a=n.firstItem&&n.extendToBarsEndings?i.center:i.left;t.moveTo(isNaN(a)?-50:a,s?.y??i.y)}finishFragment(t,e,i,n){i&&n&&t.lineTo(i.left,n.y),t.stroke()}hitTest(t,e,i,n){if(!(0,c.isValidPoint)(e))return!1;const l=e.style?.width??t.lineWidth,o=(0,r.interactionTolerance)().series+l/2,{left:h,y:d}=e,u=isNaN(h)?-50:h;let _,f;return i&&(0,c.isValidPoint)(i)?(_=i.left,f=i.y):(_=e.right,f=e.y),!(u<n.x-o&&_<n.x-o||u>n.x+o&&_>n.x+o)&&((0,s.distanceToSegment)((0,a.point)(u,d),(0,a.point)(_,d),n).distance<o||d!==f&&(0,s.distanceToSegment)((0,a.point)(_,d),(0,a.point)(_,f),n).distance<o)}applyColor(t,e){(0,d.applyColor)(t,e,1,1)}applyLineWidth(t,e,i){t.setLineWidth(i)}applyLineStyle(t,e,i){t.setLineStyle(i)}drawItem(t,e,i,n,s){void 0!==s&&t.lineTo(i.left,s.y),t.lineTo(!n.firstItem||n.extendToBarsEndings||this._forceExtendFirstBar?i.left:i.center,i.y),t.lineTo(n.lastItem&&!n.extendToBarsEndings?i.center:i.right,i.y)}needDashOffset(){return!0}}class m{constructor(){this._lineWidth=1,this._initialAlpha=1}initialize(t,e,i,n){this._initialAlpha=i.context.globalAlpha,this.applyColor(i,n.style?.color??e.lineColor),this._lineWidth=Math.max(Math.floor(n.style?.width??e.lineWidth*i.horizontalPixelRatio))}startFragment(t,e,i,n,s){t.beginPath()}finishFragment(t,e){
e.fill()}drawItem(t,e,i,n,s){if(n.valIsNotSameAsPrev&&!isNaN(i.left)){const t=e.context;t.save(),t.translate(i.left,i.y),t.rotate(Math.PI/4);const n=this._scaleByLineWidth(this._lineWidth);t.scale(n,n),this._drawItemRotatedAndTranslated(e),t.restore()}}applyLineWidth(t,e,i){this._lineWidth=i}applyLineStyle(t,e,i){}hitTest(t,e,i,n){if(!e.valIsNotSameAsPrev)return!1;const s=n.subtract((0,a.point)(e.left,e.y));return this._hitTestTranslated(s,e.style?.width??t.lineWidth)}needDashOffset(){return!1}_scaleByLineWidth(t){return Math.sqrt(t)}}class p extends m{applyColor(t,e){(0,d.applyColor)(t,e,1,2)}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<8*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,o.drawRoundRect)(t.context,-4,-4,8,8,2,!0)}}class x extends m{applyColor(t,e){t.context.globalAlpha=.15*this._initialAlpha,(0,d.applyColor)(t,e,1,2)}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<21*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,o.drawRoundRect)(t.context,-10.5,-10.5,21,21,5,!0)}}class g extends h.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._data=t??null}setData(t){this._data=t}hitTest(t){const e=this._data;if(null===e||0===e.items.length)return null;const{items:i,visibleItemsRange:s,skipHoles:a}=e,r=s?.startItemIndex??0,o=s?.endItemIndex??i.length;if(o<=r)return null;const h=e.decoration===n.Diamonds?[new f,new x]:[new f];const d=new c.PaneRendererLineItemsIterator(i,r,o,a);for(;d.next();){const i=d.currentValue(),n=d.nextValue();for(const s of h)if((0,c.isValidPoint)(i)&&s.hitTest(e,i,(0,c.isValidPoint)(n)?n:null,t))return new l.HitTestResult(l.HitTarget.Regular)}return null}_drawImpl(t){if(null===this._data||0===this._data.items.length)return;(this._data.decoration===n.Diamonds?[new f(!0),new p,new x]:[new f]).forEach((e=>this._drawDecorationItem(t,e)))}_drawDecorationItem(t,e,i){if(null===this._data||0===this._data.items.length)return{distance:0,dashPattern:[]};const{lineWidth:n,lineColor:s,lineStyle:a,items:l,visibleItemsRange:r,skipHoles:o,extendToBarsEndings:h}=this._data,{context:d,horizontalPixelRatio:f,verticalPixelRatio:m}=t;let p=!1,x=Math.max(Math.floor((l[0].style?.width??n)*f)),g=x%2?.5:0;const y=r?.startItemIndex??0,P=r?.endItemIndex??l.length;if(P<=y)return{distance:0,dashPattern:[]};const v=new u.SmartDashCanvas(d,!!i);let I,C,S,w,b=0;if(!i&&e.needDashOffset()){const{distance:i,dashPattern:n}=this._drawDecorationItem(t,e,!0),s=(0,_.sum)(n);if(s>0){const t=i%s;d.lineDashOffset=b=s-t-n[1]}}e.initialize(v,this._data,t,l[0]),e.applyColor(t,l[y].style?.color??s),e.applyLineWidth(v,d,x),e.applyLineStyle(v,d,a);let T=!1;const R=new c.PaneRendererLineItemsIterator(l,y,P,o);for(;R.next();){const l=R.currentValue();if(!(0,c.isValidPoint)(l)){I=void 0,T=!0;continue}const r=l.style?.color??s,o=l.style?.width??n,u=l.style?.style??a,y=r!==C,P=o!==S,L=u!==w,M={firstItem:R.currentValueIsFirst(),lastItem:R.currentValueIsLast(),extendToBarsEndings:h,valIsNotSameAsPrev:l.valIsNotSameAsPrev},B={y:Math.round(l.y*m)+g,
left:Math.round(l.left*f)+g,center:Math.round(l.center*f)+g,right:Math.round(l.right*f)+g};if(y||P||T||L){if(C&&S&&p&&(e.finishFragment(v,d,B,I),p=!1),y&&e.applyColor(t,r),P&&(x=Math.max(1,Math.floor(o*f)),g=x%2?.5:0,e.applyLineWidth(v,d,x)),L&&e.applyLineStyle(v,d,u),!i){const t=v.lastSegmentDistance(),e=v.lastSegmentDashPattern(),i=(0,_.sum)(e);if(i>0){const e=t%i;d.lineDashOffset=e+b}}e.startFragment(v,d,B,M,I),p=!0,T=!1,C=r,S=o,w=u}e.drawItem(v,t,B,M,I),I=B}return p&&(e.finishFragment(v,d),p=!1),{distance:v.lastSegmentDistance(),dashPattern:v.lastSegmentDashPattern()}}}},771175:(t,e,i)=>{i.d(e,{SelectionIndexes:()=>s});var n=i(650151);class s{constructor(t){this._baseIndex=null,this._offsetInBar=null,this._offsetInTime=null,this._barsBetweenPoints=null,this._timescale=t}indexes(){const t=this._timescale.visibleBarsStrictRange();if(null===t)return[];const e=t.firstBar(),i=t.lastBar();if(null===this._offsetInTime||null===this._barsBetweenPoints){const t=this._timescale.barSpacing();this._barsBetweenPoints=Math.floor(120/t),this._offsetInBar=i%this._barsBetweenPoints,this._offsetInTime=this._timescale.indexToTimePoint(this._offsetInBar),this._baseIndex=this._timescale.baseIndex()}const s=this._timescale.baseIndex();this._baseIndex!==s&&(this._baseIndex=s,this._offsetInBar=(0,n.ensureNotNull)(this._timescale.timePointToIndex(this._offsetInTime)));const a=(0,n.ensureNotNull)(this._offsetInBar),l=[];let r=Math.floor((e-a)/this._barsBetweenPoints);const o=Math.floor((i-a)/this._barsBetweenPoints);for(;r<=o;r++)l.push(a+r*this._barsBetweenPoints);return l}clear(){this._offsetInBar=null,this._offsetInTime=null,this._baseIndex=null,this._barsBetweenPoints=null}}},415748:(t,e,i)=>{function n(t){t.lineWidth=void 0,t.lineStyle=void 0;for(let e=0;e<t.colors.length;e++)t.colors[e]=void 0;return t}function s(){return{colors:[void 0,void 0,void 0,void 0,void 0,void 0,void 0],lineWidth:void 0,lineStyle:void 0}}i.d(e,{clearStyle:()=>n,createEmptyStyle:()=>s})},964121:(t,e,i)=>{i.d(e,{PaneRendererColumns:()=>a});var n=i(753530),s=i(578679);class a extends n.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._precalculatedCache=[],this.setData(t)}setData(t){this._data=t,this._precalculatedCache=[]}hitTest(t){if(null===this._data)return null;const e=this._data.visibleItemsRange?.startItemIndex??0,i=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(let n=e;n<=i;n++){const e=this._data.items[n];if(t.x>=e.left&&t.x<=e.right){const i=e.y;if(t.y>=Math.min(i,this._data.histogramBase)&&t.y<=Math.max(i,this._data.histogramBase))return new s.HitTestResult(s.HitTarget.Regular)}}return null}_drawImpl(t){if(null===this._data||0===this._data.items.length)return;const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n}=t;this._precalculatedCache.length||this._fillPrecalculatedCache(i)
;const s=Math.max(1,Math.floor(i)),a=Math.max(1,Math.floor(n)),l=Math.round(this._data.histogramBase*n)-Math.floor(s/2),r=l+s,o=this._data.lineColor,h=this._data.visibleItemsRange?.startItemIndex??0,c=(this._data.visibleItemsRange?.endItemIndex??this._data.items.length)-1;for(let t=h;t<=c;t++){const i=this._data.items[t],s=this._precalculatedCache[t-h],c=Math.round(i.y*n);let d,u;e.fillStyle=i.style?i.style.color:o,c<=l?(d=c,u=r):(d=l,u=c-Math.floor(a/2)+a),e.fillRect(s.left,d,s.right-s.left+1,u-d)}}_fillPrecalculatedCache(t){if(null===this._data||0===this._data.items.length)return void(this._precalculatedCache=[]);const{barSpacing:e,visibleItemsRange:i,items:n}=this._data,s=Math.ceil(e*t)<=1?0:Math.max(1,Math.floor(t)),a=i?.startItemIndex??0,l=(i?.endItemIndex??n.length)-1,r=l-a+1;if(r<=0)return void(this._precalculatedCache=[]);this._precalculatedCache=new Array(r);for(let e=a;e<=l;e++){const i=n[e],l=Math.round(i.center*t);let r,o;const h=Math.round((i.right-i.left)*t)-s;if(h%2){const t=(h-1)/2;r=l-t,o=l+t}else{const t=h/2;r=l-t,o=l+t-1}this._precalculatedCache[e-a]={left:r,right:o,roundedCenter:l,center:i.center*t,time:i.timePointIndex}}for(let t=a+1;t<=l;t++){const e=this._precalculatedCache[t-a],i=this._precalculatedCache[t-a-1];e.time===i.time+1&&(e.left-i.right!==s+1&&(i.roundedCenter>i.center?i.right=e.left-s-1:e.left=i.right+s+1))}let o=Math.ceil(e*t);for(let t=a+1;t<=l;t++){const e=this._precalculatedCache[t-a];e.right<e.left&&(e.right=e.left);const i=e.right-e.left+1;o=Math.min(i,o)}if(s>0&&o<4)for(let t=a+1;t<=l;t++){const e=this._precalculatedCache[t-a];e.right-e.left+1>o&&(e.roundedCenter>e.center?e.right-=1:e.left+=1)}}}},873769:(t,e,i)=>{i.d(e,{createStudyPlotColorProvider:()=>f});var n=i(140831),s=i(650151),a=i(415748),l=i(536794);const r=new Map([[0,"color"],[2,"textColor"],[3,"borderColor"],[4,"wickColor"],[5,"colorup"],[6,"colordown"]]);class o{constructor(t){const e=t.childs(),i=[e.color?t=>t.colors[0]=e.color?.value():null,e.colorup?t=>t.colors[5]=e.colorup?.value():null,e.colordown?t=>t.colors[6]=e.colordown?.value():null,e.textColor?t=>t.colors[2]=e.textColor?.value():null,e.borderColor?t=>t.colors[3]=e.borderColor?.value():null,e.wickColor?t=>t.colors[4]=e.wickColor?.value():null,e.linewidth?t=>t.lineWidth=e.linewidth?.value():null,e.linestyle?t=>t.lineStyle=e.linestyle?.value():null].filter(l.notNull);this._fillPlotStyles=t=>{for(const e of i)e(t)}}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return this._fillPlotStyles(i),i}isColorDefined(){return!0}singleColor(){return!0}getDefaultPlotPointStyle(){return null}}const h=[0,1,2,3,4,5,6];class c{constructor(t,e,i,n){this._palettesColors=new Map,this._defaultPlotColors=new Map,this._indexes=n;const a=e.styles[i];if(a)for(const[t,e]of r)this._defaultPlotColors.set(t,a[e]);const l=(0,s.ensureDefined)(t.palettes),o=t.plots;n.forEach(((t,i)=>{const n=o[t];if(n&&"palette"in n){const t=l[n.palette],s=e.palettes[n.palette];if(t&&s){const{valToIndex:e}=t,{colors:n}=s,a={...n};e&&Object.keys(e).forEach((t=>{const i=e[t]
;void 0!==i&&(a[t]=n[i])})),this._palettesColors.set(i,a)}}}))}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return h.forEach((e=>{if(this._palettesColors.has(e)){const n=t[(0,s.ensureDefined)(this._indexes.get(e))+1];if("number"==typeof n){const t=this._palettesColors.get(e)?.[n];0===e&&t&&(i.lineWidth=t.width.value(),i.lineStyle=t.style.value()),i.colors[e]=t?.color.value()}else i.colors[e]="transparent"}else i.colors[e]=this._defaultPlotColors.get(e)?.value()})),i}getDefaultPlotPointStyle(){const t=this._palettesColors.get(0)?.[0];if(void 0!==t){return{colors:[t.color.value(),void 0,void 0,void 0,void 0,void 0,void 0],lineStyle:void 0,lineWidth:t.width.value()}}return null}isColorDefined(){return!!this._palettesColors.size}singleColor(){return!1}}var d=i(576313);class u{constructor(t){this._rgbaFromInteger=(0,d.rgbaFromIntegerCached)(),this._indexes=t}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return this._indexes.forEach(((e,n)=>{const s=t[e+1];if(null!=s){const t=this._rgbaFromInteger(s);i.colors[n]=t}else i.colors[n]="transparent"})),i}isColorDefined(){return!0}singleColor(){return!1}getDefaultPlotPointStyle(){return null}}const _=new Map([[0,function(t,e){const i=(0,n.isColorerPlot)(e)||(0,n.isOhlcColorerPlot)(e);return"target"in e&&e.target===t&&i}],[2,function(t,e){const i=(0,n.isTextColorerPlot)(e);return"target"in e&&e.target===t&&i}],[1,function(t,e){return(0,n.isBgColorerPlot)(e)&&e.id===t}],[3,function(t,e){const i=(0,n.isCandleBorderColorerPlot)(e);return"target"in e&&e.target===t&&i}],[4,function(t,e){const i=(0,n.isCandleWickColorerPlot)(e);return"target"in e&&e.target===t&&i}],[5,function(t,e){const i=(0,n.isUpColorerPlot)(e);return"target"in e&&e.target===t&&i}],[6,function(t,e){const i=(0,n.isDownColorerPlot)(e);return"target"in e&&e.target===t&&i}]]);function f(t,e,i){const{colorers:n}=function(t,e){const i=t.plots,n=i.findIndex((t=>t.id===e)),s=new Map;return i.forEach(((t,i)=>{_.forEach(((n,a)=>{n(e,t)&&s.set(a,i)}))})),{plotIndex:-1===n?null:n,colorers:s}}(t,i);if(n.size)return t.isRGB?new u(n):new c(t,e,i,n);{const t=e.ohlcPlots;if(t&&t[i])return new o(t[i]);const n=e.styles[i];return new o(n)}}},576313:(t,e,i)=>{i.d(e,{rgbaFromIntegerCached:()=>l});var n=i(259332),s=i(650369),a=i(169958);function l(t=1e3){const e=n.default.Cache;n.default.Cache=a.CircularCacheBuffer.bind(a.CircularCacheBuffer,t);const i=(0,n.default)(s.rgbaFromInteger);return n.default.Cache=e,i}}}]);