"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[314],{853854:(e,t,i)=>{var n=i(348730).makeFont,s=i(348730).parseFont,r=i(735566).getLogger;const{drawPoly:o}=i(850699);var a=r("Model.ChartTradingUtils"),l={_fontHeightCache:{},_parsedColorCache:{},_parseColor:function(e){if(this._parsedColorCache[e])return this._parsedColorCache[e];var t=document.createElement("div");t.style.color=e;var i=t.style.color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i)||t.style.color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d*\.?\d+)\s*\)$/i),n={r:i[1],g:i[2],b:i[3],a:i[4]||"1"};return this._parsedColorCache[e]=n,n},getColorFromProperties:function(e,t){var i=1-t.value()/100,n=this._parseColor(e.value());return"rgba("+n.r+","+n.g+","+n.b+","+i+")"},setColorToProperties:function(e,t,i){var n=this._parseColor(e);t.setValue("rgb("+n.r+","+n.g+","+n.b+")");var s=100*(1-n.a);i.setValue(Math.max(0,Math.min(s,100)))},getFontFromProperties:function(e,t,i,s){return n(t.value(),e.value(),s.value()?"italic":"",i.value()?"bold":"")},setFontToProperties:function(e,t,i,n,r){var o=s(e);null!==o?(o.family.length>0&&t.setValue(o.family),i.setValue(o.size),n.setValue(o.bold),r.setValue(o.italic)):a.logError("Invalid font: "+e)},fontHeight:function(e){if(!this._fontHeightCache[e]){var t=document.createElement("span");t.appendChild(document.createTextNode("height")),document.body.appendChild(t),t.style.cssText="font: "+e+"; white-space: nowrap; display: inline;";var i=t.offsetHeight;document.body.removeChild(t),this._fontHeightCache[e]=Math.ceil(i)}return this._fontHeightCache[e]},drawPolyHoverOrPress:function(e,t,i,n){n?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.15)",o(e,t,!0),e.restore()):i&&(e.save(),e.fillStyle="rgba(0, 0, 0, 0.1)",o(e,t,!0),e.restore())},repaint:function(e){e.lightUpdate()},roundToMinTick:function(e,t){var i=1/e.mainSource().base();return i*Math.round(t/i)}};e.exports=l},916682:(e,t,i)=>{i.d(t,{commonLineToolPropertiesStateKeys:()=>n});const n=["symbolStateVersion","zOrderVersion","frozen","title","interval","symbol","currencyId","unitId","visible","intervalsVisibilities.ticks","intervalsVisibilities.seconds","intervalsVisibilities.secondsFrom","intervalsVisibilities.secondsTo","intervalsVisibilities.minutes","intervalsVisibilities.minutesFrom","intervalsVisibilities.minutesTo","intervalsVisibilities.hours","intervalsVisibilities.hoursFrom","intervalsVisibilities.hoursTo","intervalsVisibilities.days","intervalsVisibilities.daysFrom","intervalsVisibilities.daysTo","intervalsVisibilities.weeks","intervalsVisibilities.weeksFrom","intervalsVisibilities.weeksTo","intervalsVisibilities.months","intervalsVisibilities.monthsFrom","intervalsVisibilities.monthsTo","intervalsVisibilities.ranges"]},621533:(e,t,i)=>{i.d(t,{InplaceTextLineDataSource:()=>y,InplaceTextUndoCommand:()=>m});var n=i(650279),s=i(650151),r=i(610555),o=i(790188),a=i(724377),l=i(444372),c=i(892323),u=i(4944),h=i(77294),d=i(925341),p=i(23369),g=i(830842),_=i(399285);const f={selectionColor:(0,
o.getHexColorByName)("color-tv-blue-500"),cursorColor:(0,o.getHexColorByName)("color-black")},v={selectionColor:(0,o.getHexColorByName)("color-white"),cursorColor:(0,o.getHexColorByName)("color-white")};class m extends d.UndoCommand{constructor(e,t,n,s){super(new c.TranslatedString("change {title} text",l.t(null,void 0,i(257122))).format({title:new c.TranslatedString(t.name(),t.translatedType())}),!0,!_.lineToolsDoNotAffectChartInvalidation),this._sourceId=t.id(),this._model=e,this._oldValue=n,this._newValue=s}redo(){const e=this._source();this._textProperty(e).setValue(this._newValue)}undo(){const e=this._source();this._textProperty(e).setValue(this._oldValue)}_textProperty(e){return e.editableTextProperties().text}_source(){return(0,s.ensureNotNull)(this._model.dataSourceForId(this._sourceId))}}class y extends p.LineDataSource{constructor(e,t,n,s){super(e,t,n,s),this._container=null,this._activeEditingOwnerSource=null,this._editableText=new h.WatchedValue(""),this._activateTextEditingEl=null,this._paneView=null,this._selectionData={},this._cursorPaneView=null,this._cursorPosition=null,this._editingOnCreation=!1,this._editingActivationTime=null,this._editingDeactivationTime=0,this._editableText.subscribe((()=>{this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id()))})),this._isDarkBackground=(0,u.combine)(((e,t)=>{if(null===t)return this._model.dark().value();const i=(0,a.blendRgba)((0,a.parseRgba)(e),(0,a.parseRgba)(t));return"black"===(0,a.rgbToBlackWhiteString)([i[0],i[1],i[2]],150)}),this._model.backgroundColor().spawnOwnership(),this._createDataSourceBackgroundColorWV()),Promise.all([i.e(22296),i.e(48094),i.e(93235),i.e(314),i.e(94874),i.e(74005),i.e(86034),i.e(51583)]).then(i.bind(i,62856)).then((t=>{this._cursorPaneView=new t.InplaceTextCursorPaneView(this,e),this._additionalCursorDataGetters&&(this._cursorPaneView.setAdditionalCursorData(...this._additionalCursorDataGetters),null!==this._cursorPosition&&(this._cursorPaneView.setCursorPosition(this._cursorPosition),e.updateSource(this)))}))}destroy(){this._isDarkBackground.destroy(),this._editableText.unsubscribe(),this._closeTextEditor(),super.destroy()}editableTextStyle(){return{...this._isDarkBackground.value()?v:f}}removeIfEditableTextIsEmpty(){return!1}activateEditingOnCreation(){return!1}topPaneViews(e){return this._activeEditingOwnerSource&&e.hasDataSource(this._activeEditingOwnerSource)&&!window.TradingView.printing&&this._cursorPaneView?(this._cursorPaneView.update((0,g.sourceChangeEvent)(this.id())),[this._cursorPaneView]):null}dataAndViewsReady(){return super.dataAndViewsReady()&&null!==this._cursorPaneView}editableText(){return this._editableText}textEditingEl(){return this._activateTextEditingEl}activateTextEditingOn(e,t){this._activateTextEditingEl=e,this._editingOnCreation=!!t,this._editingActivationTime=performance.now(),this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id()))}deactivateTextEditing(){this._closeTextEditor()}textEditingActivationTime(){return this._editingActivationTime}textEditingJustFinished(){
return performance.now()-this._editingDeactivationTime<100}setAdditionalCursorData(e,t){this._cursorPaneView?this._cursorPaneView.setAdditionalCursorData(e,t):this._additionalCursorDataGetters=[e,t]}_updateAllPaneViews(e){super._updateAllPaneViews(e),this._cursorPaneView?.update(e)}async _openTextEditor(e,t,n,o,a){if(null!==this._container)return;null===this._editingActivationTime&&(this._editingActivationTime=performance.now()),this._activateTextEditingEl=null,this._cursorPosition=null,this._container=document.createElement("div"),this._container.style.position="absolute",this._container.style.top="0",this._container.style.bottom="0",this._container.style.left="0",this._container.style.right="0",this._container.style.overflow="hidden",this._container.style.pointerEvents="none",t.appendChild(this._container);const{updateChartEditorText:l,closeChartEditorText:c}=await Promise.all([i.e(35698),i.e(32227),i.e(15592)]).then(i.bind(i,259216));if(null===this._container||this._isDestroyed)return;this._activeEditingOwnerSource=e,this._closeChartEditorText=c;const{text:u,textColor:h,wordWrap:d}=this.editableTextProperties(),{forbidLineBreaks:p,maxLength:_}=this.editableTextStyle();this._editableText.setValue(u.value());const f=this.isFixed()?(0,s.ensureDefined)(this.fixedPoint(e)):(0,s.ensureNotNull)(this.pointToScreenPoint(this._points[0],e)),v={position:(0,r.point)(f.x,f.y),textInfo:n,placeholder:o,text:this._editableText,textColor:h,wordWrap:d,forbidLineBreaks:p,maxLength:_,onClose:a,onSelectionChange:this._onSelectionChange.bind(this),onContextMenu:this.onContextMenu?this.onContextMenu.bind(this):void 0};l(this._container,v),this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id()))}_closeTextEditor(e){null===this._container||this._isDestroyed||(this._editingActivationTime=null,this._editingDeactivationTime=performance.now(),this._saveEditedText(),this._editingOnCreation=!1,this._onSelectionChange(),this._closeChartEditorText?.(this._container),this._closeChartEditorText=void 0,this._container.remove(),this._container=null,this._activeEditingOwnerSource=null,this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id())))}_saveEditedText(){const e=this.editableTextProperties().text.value(),t=this._editableText.value();e!==t&&(this._editingOnCreation&&this.editableTextProperties().text.setValue(t),this._model.undoModel().undoHistory().pushUndoCommand(this._changeEditableTextUndoCommand(e,t)))}_changeEditableTextUndoCommand(e,t){return new m(this._model,this,e,t)}_createDataSourceBackgroundColorWV(){return new h.WatchedValue(null).readonly().ownership()}_onSelectionChange(e){if(null===this._container)return;const t={};if(void 0!==e){const{start:i,end:n}=e;i===n?t.cursorPosition=i:t.selectionRange=[Math.min(i,n),Math.max(i,n)]}(0,n.default)(t,this._selectionData)||(this._selectionData=t,this._paneViews.forEach((e=>{e.forEach((e=>{"setSelectionRange"in e&&e.setSelectionRange(t.selectionRange)}))})),this._cursorPaneView?this._cursorPaneView.setCursorPosition(t.cursorPosition):this._cursorPosition=t.cursorPosition??null,
this.updateAllViewsAndRedraw((0,g.sourceChangeEvent)(this.id())))}}},422499:(e,t,i)=>{i.d(t,{LineDataSourceProperty:()=>a});var n=i(154834),s=i(998034),r=i(650151),o=i(294721);class a extends o.DefaultProperty{constructor({templateKeys:e,...t}){super({ignoreAllowSavingDefaults:!0,saveNonDefaultUserPreferencesOnly:!0,...t}),this._templateKeys=(0,r.ensureDefined)(e||this._allDefaultsKeys)}template(){return(0,o.extractState)(this.state(),this._templateKeys,[])}applyTemplate(e){this.mergeAndFire((0,o.extractState)((0,s.default)((0,n.default)(this._factoryDefaultsSupplier()),e),this._templateKeys))}}},217006:(e,t,i)=>{i.d(t,{LineToolWithRelativePriceCoordinate:()=>g,getNoDataPosition:()=>d,getSeriesPosition:()=>p,positionToCoordinate:()=>c});var n=i(650151),s=i(498374),r=i(621533);function o(e,t,i){const n=e.barFunction();switch(e.style()){case 3:case 10:case 2:case 14:case 15:return n(t.value);default:return t.value[-1===i?3:2]}}function a(e){return e>=0?1:-1}function l(e,t){return-1===a(e)!==t?-1:1}function c(e,t,i,n){const s=Math.min(t,Math.max(0,1===n?i:t-i));return i-n*Math.abs(s*e/100)}function u(e,t,i){const n=e.index();return null===n?null:{index:n,price:t.coordinateToPrice(t.height()/2,i)}}function h(e,t){const i=e.data().bars(),n=i.first(),r=i.last();if(null===n||null===r)return null;let l;const c=t.index();if(null===c){if(void 0===t.time)return null;const e=t.time(),o=n.value[0],a=r.value[0];if(e<o-86400||e>a)return null;l=i.searchByTime(e,s.PlotRowSearchMode.NearestRight,4)}else l=i.search(c);return null===l?null:{index:l.index,price:o(e,l,a(t.position()))}}function d(e,t,i,n){const s=u(e,t,n);if(null===s)return null;const r=l(e.position(),t.isInverted());return{index:s.index,price:s.price,poleStartY:t.height(),visualDirection:1,positionPointDirection:r,startsOnSeriesData:!1,priceCoordinate:t.priceToCoordinate(s.price,n),indexCoordinate:i.indexToCoordinate(s.index)}}function p(e,t,i=!0){const s=h(e,t),r=e.priceScale(),o=e.model().timeScale(),a=(0,n.ensureNotNull)(e.firstValue());if(null===s)return d(t,r,o,a);let c=0;const u=e.properties().childs(),p=r.priceToCoordinate(s.price,a),g=l(t.position(),r.isInverted());if(i)switch(e.style()){case 16:c=1===g?u.hlcAreaStyle.childs().highLineWidth.value()/2:u.hlcAreaStyle.childs().lowLineWidth.value()/2;break;case 3:c=u.areaStyle.childs().linewidth.value()/2;break;case 2:c=u.lineStyle.childs().linewidth.value()/2;break;case 14:c=u.lineWithMarkersStyle.childs().linewidth.value()/2;break;case 15:c=u.steplineStyle.childs().linewidth.value()/2;break;case 10:const e=Math.abs(100-u.baselineStyle.childs().baseLevelPercentage.value());c=r.height()*e/100>p?u.baselineStyle.childs().topLineWidth.value()/2:u.baselineStyle.childs().bottomLineWidth.value()/2;break;case 1:case 9:case 8:case 12:case 4:case 7:c=3;break;case 0:c=u.barStyle.childs().thinBars.value()?3:Math.max(3,.25*o.barSpacing());break;case 11:c=u.rangeStyle.childs().thinBars.value()?3:Math.max(3,.25*o.barSpacing());break;case 5:c=Math.max(4,.25*o.barSpacing());break;case 6:c=Math.max(5,.25*o.barSpacing())}const _=p-g*c
;return{index:s.index,price:s.price,poleStartY:_,visualDirection:g,positionPointDirection:g,startsOnSeriesData:!0,priceCoordinate:p,indexCoordinate:o.indexToCoordinate(s.index)}}class g extends r.InplaceTextLineDataSource{constructor(){super(...arguments),this._startMovingAnchorY=NaN}priceSource(){return this.ownerSource()}editableTextProperties(){(0,n.assert)(!1,"unexpected method call")}addPoint(e,t,i){return super.addPoint(this._updatePositionAndCorrectPoint(e),t,i)}setPoint(e,t,i,n){n?super.setPoint(e,t,i,n):(super.setPoint(e,this._updatePositionAndCorrectPoint(t,!this.isPhantom()&&!this._allowChangeAnchorHorizontally()),i),this._syncPosition())}setPointAndChangeIndex(e,t,i){super.setPoint(e,this._updatePositionAndCorrectPoint(t),i),this._syncPosition()}startMoving(e,t,i,s){s||(this._startMovingAnchorY=(0,n.ensureNotNull)(this._anchorYCoordinate())),super.startMoving(e,t,i)}move(e,t,i,s){const r=(0,n.ensureDefined)((0,n.ensureNotNull)(this.startMovingPoint()).logical),o=(0,n.ensureDefined)(e.logical);if(!s&&0===t){const e=this._points[0],t=o.index-r.index,i=(0,n.ensureNotNull)(this.priceScale()),s=(0,n.ensure)(this.ownerSource()?.firstValue()),a=i.priceToCoordinate(o.price,s)-i.priceToCoordinate(r.price,s),l=this._startMovingAnchorY+a,c=i.coordinateToPrice(l,s);this._updatePositionAndCorrectPoint({index:e.index+t,price:c})}super.move(e,t,i),s||this._syncPosition()}_allowChangeAnchorHorizontally(){return!1}_updatePositionAndCorrectPoint(e,t=!1){t&&(e.index=this._points[0].index);const i=this.priceSource();if(null===i)return e;const n=i.priceScale(),s=i.firstValue();if(null===n||n.isEmpty()||null===s)return e;const r=n.height();let a=r/2,l=e.price>=n.coordinateToPrice(a,s)?1:-1;const c=this._model.mainSeries();if(i===c){const t=c.data().search(this._baseSeriesIndexForPoint(e));if(null!==t){const i=o(c,t,-1),r=o(c,t,1);l=e.price>=i?1:-1,a=n.priceToCoordinate(1===l?r:i,s),e.price=1===l?Math.max(r,e.price):e.price}}const u=1===(-1===l!==n.isInverted()?-1:1)?a:r-a,h=n.priceToCoordinate(e.price,s),d=Math.min(r,Math.abs(h-a)),p=Math.max(0,Math.min(100,100*d/u))*l;return this.properties().childs().position.setValue(p),e}_baseSeriesIndexForPoint(e){return e.index}_syncPosition(){const e=this.linkKey().value();null!==e&&this._syncLineStyleChanges(e,{position:this.properties().childs().position.value()})}_anchorYCoordinate(){const e=this.priceSource();if(null===e)return null;const t=e.priceScale(),i=e.firstValue();if(null===t||t.isEmpty()||null===i)return null;const n=this._model.mainSeries(),s=this.customEvent();if(null===s)return null;let r=null;if(e===n&&(r=h(n,s)),null===r&&(r=u(s,t,i)),null===r)return null;const o=s.position(),a=t.priceToCoordinate(r.price,i);return c(o,t.height(),a,l(o,t.isInverted()))}}},549385:(e,t,i)=>{i.d(t,{LineToolParallelChannelPropertiesImpl:()=>V,coeffs:()=>v});var n=i(154834),s=i(998034),r=i(650151),o=i(553407),a=i(61499),l=i(981182),c=i(594632),u=i(916682),h=i(841528),d=i(294721),p=i(422499),g=i(478481),_=i(48782),f=i(909740);const v=[-.25,0,.25,.5,.75,1,1.25];const m={
intervalsVisibilities:{...h.intervalsVisibilitiesDefaults},...function(){const e={};return v.forEach(((t,i)=>{e[`level${i+1}`]={visible:[1,3,5].includes(i),coeff:t,lineStyle:3===i?l.LINESTYLE_DASHED:l.LINESTYLE_SOLID,lineWidth:[1,5].includes(i)?2:1}})),e}(),extendLeft:!1,extendRight:!1,fillBackground:!0,transparency:80,labelVisible:!1,labelHorzAlign:c.HorizontalAlign.Left,labelVertAlign:c.VerticalAlign.Bottom,labelFontSize:14,labelBold:!1,labelItalic:!1,version:2};const y={...function(){const e={};for(let t=0;t<v.length;t++)e[`level${t+1}`]={color:"#2962ff"};return e}(),labelTextColor:o.colors.colorTvBlue500,backgroundColor:o.colors.colorTvBlue500Alpha20},x=new Map([[a.StdTheme.Light,y],[a.StdTheme.Dark,y]]),b="linetoolparallelchannel",w=(0,d.extractAllPropertiesKeys)((0,r.ensureDefined)(x.get(a.StdTheme.Light))),C=(0,d.extractAllPropertiesKeys)(m),S=[...w,...C,"labelText"],T=[...w,...C,...u.commonLineToolPropertiesStateKeys,"labelText"];function P(e){const{linecolor:t,linestyle:i,linewidth:r,showMidline:o,midlinecolor:l,midlinestyle:c,midlinewidth:u,...h}=e;return{...(0,s.default)((0,n.default)(m),x.get(f.watchedTheme.value())??x.get(a.StdTheme.Light)),...h,level4:{visible:o,color:l,lineStyle:c,lineWidth:u,coeff:.5},level2:{color:t,lineStyle:i,lineWidth:r,visible:!0,coeff:0},level6:{color:t,lineStyle:i,lineWidth:r,visible:!0,coeff:1}}}class V extends p.LineDataSourceProperty{constructor(e){1===(e.state&&"version"in e.state?e.state.version:1)&&e.state&&(e.state=P(e.state),e.state=(0,d.extractState)(e.state,e.allStateKeys)),super(e),this.addChild("linesColors",new g.LineToolColorsProperty(v.map(((e,t)=>(0,r.ensureDefined)(this.child(`level${t+1}`)).childs().color)))),this.addChild("linesWidths",new g.LineToolWidthsProperty(v.map(((e,t)=>(0,r.ensureDefined)(this.child(`level${t+1}`)).childs().lineWidth)))),this.addChild("textsColors",new g.LineToolColorsProperty([(0,r.ensureDefined)(this.child("labelTextColor"))]))}applyTemplate(e){1===("version"in e?e.version:1)&&(e=P(e),e=(0,d.extractState)(e,this._templateKeys)),super.applyTemplate(e)}static create(e,t){return new this({defaultName:b,factoryDefaultsSupplier:()=>(0,_.factoryDefaultsForCurrentTheme)(m,x),nonThemedDefaultsKeys:C,themedDefaultsKeys:w,templateKeys:S,allStateKeys:T,state:t,theme:e})}_userSettings(){let e=(0,d.createDefaultsState)(!0,b,[],null);return 1===(e&&"version"in e?e.version:1)&&(e=P(e)),(0,d.extractState)((0,n.default)(e),this._allDefaultsKeys,this._excludedDefaultsKeys)}}},902471:(e,t,i)=>{var n,s;i.d(t,{AlertStatus:()=>n,Direction:()=>s}),function(e){e[e.Waiting=0]="Waiting",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(n||(n={})),function(e){e[e.Up=1]="Up",e[e.Down=2]="Down"}(s||(s={}))},717012:(e,t,i)=>{var n;i.d(t,{RiskRewardPointIndex:()=>n}),function(e){e[e.Entry=0]="Entry",e[e.Close=1]="Close",e[e.ActualEntry=2]="ActualEntry",e[e.ActualClose=3]="ActualClose"}(n||(n={}))},848511:(e,t,i)=>{i.d(t,{svgRenderer:()=>P});var n=i(650151),s=i(735566);const r=(0,s.getLogger)("Chart.SvgParser");function o(e,t){
const i=e.split(/[,\s]/).map((e=>parseFloat(e.trim())));let n=0;for(const e of i){if(!Number.isFinite(e)&&n<t)return null;n+=1}return i}const a=/([a-zA-Z]+)\((.*)\)/g;function l(e,t){const i=e.getAttribute("transform")?.toLowerCase();if(void 0===i)return null;const n=[];let s;a.lastIndex=0;do{if(s=a.exec(i),null!==s){const e=s[1],i=s[2];switch(e){case"matrix":const s=o(i,6);null!==s&&n.push({type:e,a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]});break;case"rotate":const a=o(i,1);null!==a&&n.push({type:e,a:a[0],x:a[1]??(t?t.width/2:void 0),y:a[2]??(t?t.height/2:void 0)});break;case"translate":const l=o(i,1);null!==l&&n.push({type:e,x:l[0],y:l[1]});break;case"scale":const c=o(i,1);null!==c&&n.push({type:e,x:c[0],y:c[1]});break;default:r.logWarn(`Unsupported transform operation: ${e}`)}}}while(null!==s);return 0===n.length?null:n}function c(e,t){for(const i of t)switch(i.type){case"matrix":e.transform(i.a,i.b,i.c,i.d,i.e,i.f);break;case"rotate":void 0!==i.x&&void 0!==i.y&&e.translate(i.x,i.y),e.rotate(i.a*Math.PI/180),void 0!==i.x&&void 0!==i.y&&e.translate(-i.x,-i.y);break;case"scale":e.scale(i.x,i.y??i.x);break;case"translate":e.translate(i.x,i.y??0)}}function u(e,t){return parseFloat(e.getAttribute(t)??"")}const h=/^url\(#(.*)\)/;function d(e){return h.exec(e)?.[1]??null}function p(e,t,i){const s={},r=e.getAttribute("fill");if(null!==r){const e=d(r);s.getFillStyle=null!==e?i=>(0,n.ensureDefined)(t.getStyle(e,i)):e=>r}const o=e.getAttribute("stroke");if(null!==o){const e=d(o);s.getStrokeStyle=null!==e?i=>(0,n.ensureDefined)(t.getStyle(e,i)):e=>o}const a=u(e,"stroke-width");Number.isFinite(a)&&(s.strokeWidth=a);const c=u(e,"opacity");Number.isFinite(c)&&(s.fillOpacity=c,s.strokeOpacity=c);const h=u(e,"stroke-opacity");Number.isFinite(h)&&(s.strokeOpacity=h);const p=u(e,"fill-opacity");if(Number.isFinite(p)&&(s.fillOpacity=p),i){const t=l(e);null!==t&&(s.transform=t)}return s}class g{constructor(e){this._transformOperations=e}apply(e,t){null!==this._transformOperations?(e.save(),c(e,this._transformOperations)):e.restore()}}class _{constructor(e,t,i){this._styleData={...i,...p(e,t,!0)}}apply(e,t){if(!this._isValid())return;const{getFillStyle:i,getStrokeStyle:n,strokeWidth:s,transform:r,strokeOpacity:o,fillOpacity:a}=this._styleData,l=void 0!==r||void 0!==o||void 0!==a;l&&(e.save(),void 0!==r&&c(e,r)),this._render(e);const u=i?.(e);"none"!==u&&(t.doNotApplyColors||(void 0!==a&&(e.globalAlpha=a),e.fillStyle=u??"black"),this._fill(e));const h=n?.(e);void 0!==h&&"none"!==h&&(void 0!==s&&(e.lineWidth=s),t.doNotApplyColors||(void 0!==a&&(e.globalAlpha=a),e.strokeStyle=h),this._stroke(e)),l&&e.restore()}_fill(e){e.fill()}_stroke(e){e.stroke()}}class f extends _{constructor(e,t,i){super(e,t,i);const n=e.getAttribute("d");this._path=null!==n?new Path2D(n):null,this._fillRule=e.getAttribute("fill-rule")??void 0}_fill(e){e.fill((0,n.ensureNotNull)(this._path),this._fillRule)}_stroke(e){e.stroke((0,n.ensureNotNull)(this._path))}_render(e){}_isValid(){return null!==this._path}}class v extends _{constructor(e,t,i){super(e,t,i),
this._cx=u(e,"cx"),this._cy=u(e,"cy"),this._r=u(e,"r")}_render(e){e.beginPath(),e.arc(this._cx,this._cy,this._r,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._r)}}class m extends _{constructor(e,t,i){super(e,t,i),this._cx=u(e,"cx"),this._cy=u(e,"cy"),this._rx=u(e,"rx"),this._ry=u(e,"ry")}_render(e){e.beginPath(),e.ellipse(this._cx,this._cy,this._rx,this._ry,0,0,2*Math.PI)}_isValid(){return Number.isFinite(this._cx)&&Number.isFinite(this._cy)&&Number.isFinite(this._rx)&&Number.isFinite(this._ry)}}class y{constructor(e){this._originalViewBox=e}apply(e,t){const i=t.targetViewBox;e.translate(i.x,i.y),e.scale(i.width/this._originalViewBox.width,i.height/this._originalViewBox.height),e.beginPath(),e.rect(0,0,this._originalViewBox.width,this._originalViewBox.height),e.clip(),e.translate(-this._originalViewBox.x,-this._originalViewBox.y)}}const x=(0,s.getLogger)("Chart.SvgParser");function b(e){const t=e.getAttribute("gradientUnits");if("objectBoundingBox"===t)return void x.logWarn(`Unsupported linearGradient gradientUnits: ${t}`);const i=[],n=e.getElementsByTagName("stop");for(let e=0;e<n.length;++e){const t=n[e],s=u(t,"offset"),r=t.getAttribute("stop-color");null!==r&&i.push([Number.isFinite(s)?s:0,r])}const s=u(e,"x1"),r=u(e,"y1"),o=u(e,"x2"),a=u(e,"y2");return e=>{const t=e.createLinearGradient(s,r,o,a);for(const e of i)t.addColorStop(e[0],e[1]);return t}}const w=(0,s.getLogger)("Chart.SvgParser");const C=new DOMParser,S=(0,s.getLogger)("Chart.SvgParser");function T(e,t,i,n,s,r){const o=e.children;let a,c=r;"g"!==e.tagName&&"svg"!==e.tagName||(c={...c,...p(e,s,!1)},a=l(e,{width:i,height:n})??void 0),void 0!==a&&t.push(new g(a));for(let e=0;e<o.length;++e){const r=o[e];"defs"!==r.tagName&&T(r,t,i,n,s,c)}switch(void 0!==a&&t.push(new g(null)),e.tagName){case"g":case"svg":case"defs":break;case"path":t.push(new f(e,s,r));break;case"circle":t.push(new v(e,s,r));break;case"ellipse":t.push(new m(e,s,r));break;default:S.logWarn(`Unsupported tag name: ${e.tagName}`)}}function P(e){const t=C.parseFromString(e,"application/xml"),i=[],s=t.getElementsByTagName("svg")[0],r=(0,n.ensureNotNull)(s.getAttribute("viewBox")).split(" ").map(parseFloat),o=r[2],a=r[3],l={x:r[0],y:r[1],width:o,height:a};i.push(new y(l));let c={getStyle:()=>{}};const u=s.getElementsByTagName("defs");return u.length>0&&(c=function(e){const t={},i=e.children;for(let e=0;e<i.length;++e){const n=i[e],s=n.getAttribute("id");s&&("linearGradient"===n.tagName?t[s]=b(n):w.logWarn(`Unsupported defs tag: ${n.tagName}`))}const n=new WeakMap;return{getStyle:(e,i)=>{const s=t[e];if(!s)return;let r=n.get(i);void 0===r&&(r=new Map,n.set(i,r));const o=r.get(e);if(void 0!==o)return o;const a=s(i);return r.set(e,a),a}}}(u[0])),T(s,i,o,a,c),{viewBox:()=>l,render:(e,t)=>{e.save();for(const n of i)n.apply(e,t);e.restore()}}}},48782:(e,t,i)=>{i.d(t,{factoryDefaultsForCurrentTheme:()=>l});var n=i(998034),s=i(154834),r=i(650151),o=i(909740),a=i(61499);function l(e,t){const i=o.watchedTheme.value()??a.StdTheme.Light,l=(0,
s.default)(e);return(0,n.default)(l,(0,r.ensureDefined)(t.get(i))),l}}}]);